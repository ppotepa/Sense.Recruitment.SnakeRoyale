/*! For license information please see game-library.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(t,e,r){(function(e){var check=function(t){return t&&t.Math==Math&&t};t.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof e&&e)||Function("return this")()}).call(this,r(7))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,r){return e&&defineProperties(t.prototype,e),r&&defineProperties(t,r),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function MiniSignalBinding(t,e,r){void 0===e&&(e=!1),_classCallCheck(this,MiniSignalBinding),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}return i(MiniSignalBinding,[{key:"detach",value:function detach(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),MiniSignalBinding}();function _addMiniSignalBinding(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function MiniSignal(){_classCallCheck(this,MiniSignal),this._head=this._tail=void 0}return i(MiniSignal,[{key:"handlers",value:function handlers(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function has(t){if(!(t instanceof n))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function dispatch(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function add(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new n(t,!1,e))}},{key:"once",value:function once(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new n(t,!0,e))}},{key:"detach",value:function detach(t){if(!(t instanceof n))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function detachAll(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),MiniSignal}();o.MiniSignalBinding=n,e.default=o,t.exports=e.default},function(t,e,r){var i=r(0),n=r(22),o=r(4),s=r(29),a=r(30),u=r(53),h=n("wks"),c=i.Symbol,l=u?c:c&&c.withoutSetter||s;t.exports=function(t){return o(h,t)||(a&&o(c,t)?h[t]=c[t]:h[t]=l("Symbol."+t)),h[t]}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var i=r(5);t.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var i=r(3);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var i=r(62),n=r(0),aFunction=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?aFunction(i[t])||aFunction(n[t]):i[t]&&i[t][e]||n[t]&&n[t][e]}},function(t,e,r){var i=r(8),n=r(12),o=r(28);t.exports=i?function(t,e,r){return n.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var i=r(8),n=r(25),o=r(6),s=r(27),a=Object.defineProperty;e.f=i?a:function defineProperty(t,e,r){if(o(t),e=s(e,!0),o(r),n)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var i=r(0),n=r(11),o=r(4),s=r(17),a=r(18),u=r(31),h=u.get,c=u.enforce,l=String(String).split("String");(t.exports=function(t,e,r,a){var u=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof e||o(r,"name")||n(r,"name",e),c(r).source=l.join("string"==typeof e?e:"")),t!==i?(u?!d&&t[e]&&(h=!0):delete t[e],h?t[e]=r:n(t,e,r)):h?t[e]=r:s(e,r)})(Function.prototype,"toString",(function toString(){return"function"==typeof this&&h(this).source||a(this)}))},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,r){"use strict";var i=r(94),n=r(96);function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=urlParse,e.resolve=function urlResolve(t,e){return urlParse(t,!1,!0).resolve(e)},e.resolveObject=function urlResolveObject(t,e){return t?urlParse(t,!1,!0).resolveObject(e):e},e.format=function urlFormat(t){n.isString(t)&&(t=urlParse(t));return t instanceof Url?t.format():Url.prototype.format.call(t)},e.Url=Url;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(u),c=["%","/","?",";","#"].concat(h),l=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=r(97);function urlParse(t,e,r){if(t&&n.isObject(t)&&t instanceof Url)return t;var i=new Url;return i.parse(t,e,r),i}Url.prototype.parse=function(t,e,r){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),u=-1!==s&&s<t.indexOf("#")?"?":"#",v=t.split(u);v[0]=v[0].replace(/\\/g,"/");var _=t=v.join(u);if(_=_.trim(),!r&&1===t.split("#").length){var x=a.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=o.exec(_);if(b){var T=(b=b[0]).toLowerCase();this.protocol=T,_=_.substr(b.length)}if(r||b||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===_.substr(0,2);!E||b&&m[b]||(_=_.substr(2),this.slashes=!0)}if(!m[b]&&(E||b&&!y[b])){for(var S,P,w=-1,I=0;I<l.length;I++){-1!==(A=_.indexOf(l[I]))&&(-1===w||A<w)&&(w=A)}-1!==(P=-1===w?_.lastIndexOf("@"):_.lastIndexOf("@",w))&&(S=_.slice(0,P),_=_.slice(P+1),this.auth=decodeURIComponent(S)),w=-1;for(I=0;I<c.length;I++){var A;-1!==(A=_.indexOf(c[I]))&&(-1===w||A<w)&&(w=A)}-1===w&&(w=_.length),this.host=_.slice(0,w),_=_.slice(w),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var R=this.hostname.split(/\./),M=(I=0,R.length);I<M;I++){var C=R[I];if(C&&!C.match(d)){for(var D="",L=0,F=C.length;L<F;L++)C.charCodeAt(L)>127?D+="x":D+=C[L];if(!D.match(d)){var N=R.slice(0,I),B=R.slice(I+1),U=C.match(p);U&&(N.push(U[1]),B.unshift(U[2])),B.length&&(_="/"+B.join(".")+_),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=i.toASCII(this.hostname));var k=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+k,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!f[T])for(I=0,M=h.length;I<M;I++){var j=h[I];if(-1!==_.indexOf(j)){var X=encodeURIComponent(j);X===j&&(X=escape(j)),_=_.split(j).join(X)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var z=_.indexOf("?");if(-1!==z?(this.search=_.substr(z),this.query=_.substr(z+1),e&&(this.query=g.parse(this.query)),_=_.slice(0,z)):e&&(this.search="",this.query={}),_&&(this.pathname=_),y[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"";var V=this.search||"";this.path=k+V}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=g.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+i},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(n.isString(t)){var e=new Url;e.parse(t,!1,!0),t=e}for(var r=new Url,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var h=a[u];"protocol"!==h&&(r[h]=t[h])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!y[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var d=c[l];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||m[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var f=r.pathname||"",g=r.search||"";r.path=f+g}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=_||v||r.host&&t.pathname,b=x,T=r.pathname&&r.pathname.split("/")||[],E=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),x=x&&(""===p[0]||""===T[0])),_)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),r.search=t.search,r.query=t.query;else if(!n.isNullOrUndefined(t.search)){if(E)r.hostname=r.host=T.shift(),(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift());return r.search=t.search,r.query=t.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=T.slice(-1)[0],P=(r.host||t.host||T.length>1)&&("."===S||".."===S)||""===S,w=0,I=T.length;I>=0;I--)"."===(S=T[I])?T.splice(I,1):".."===S?(T.splice(I,1),w++):w&&(T.splice(I,1),w--);if(!x&&!b)for(;w--;w)T.unshift("..");!x||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),P&&"/"!==T.join("/").substr(-1)&&T.push("");var A,O=""===T[0]||T[0]&&"/"===T[0].charAt(0);E&&(r.hostname=r.host=O?"":T.length?T.shift():"",(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift()));return(x=x||r.host&&T.length)&&!O&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},Url.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){var i={};i[r(2)("toStringTag")]="z",t.exports="[object z]"===String(i)},function(t,e,r){var i=r(0),n=r(11);t.exports=function(t,e){try{n(i,t,e)}catch(r){i[t]=e}return e}},function(t,e,r){var i=r(24),n=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return n.call(t)}),t.exports=i.inspectSource},function(t,e,r){var i=r(8),n=r(58),o=r(28),s=r(20),a=r(27),u=r(4),h=r(25),c=Object.getOwnPropertyDescriptor;e.f=i?c:function getOwnPropertyDescriptor(t,e){if(t=s(t),e=a(e,!0),h)try{return c(t,e)}catch(t){}if(u(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e,r){var i=r(59),n=r(35);t.exports=function(t){return i(n(t))}},function(t,e,r){"use strict";t.exports=function parseURI(t,e){if(t){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[r.key[o]]=i[o]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,(function(t,e,i){e&&(n[r.q.name][e]=i)})),n}}},function(t,e,r){var i=r(23),n=r(24);(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports=!1},function(t,e,r){var i=r(0),n=r(17),o="__core-js_shared__",s=i[o]||n(o,{});t.exports=s},function(t,e,r){var i=r(8),n=r(3),o=r(26);t.exports=!i&&!n((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var i=r(0),n=r(5),o=i.document,s=n(o)&&n(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,r){var i=r(5);t.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++r+i).toString(36)}},function(t,e,r){var i=r(3);t.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},function(t,e,r){var i,n,o,s=r(54),a=r(0),u=r(5),h=r(11),c=r(4),l=r(55),d=r(32),p=a.WeakMap;if(s){var f=new p,m=f.get,y=f.has,g=f.set;i=function(t,e){return g.call(f,t,e),e},n=function(t){return m.call(f,t)||{}},o=function(t){return y.call(f,t)}}else{var v=l("state");d[v]=!0,i=function(t,e){return h(t,v,e),e},n=function(t){return c(t,v)?t[v]:{}},o=function(t){return c(t,v)}}t.exports={set:i,get:n,has:o,enforce:function(t){return o(t)?n(t):i(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=n(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}}},function(t,e){t.exports={}},function(t,e,r){var i=r(16),n=r(9),o=r(2)("toStringTag"),s="Arguments"==n(function(){return arguments}());t.exports=i?n:function(t){var e,r,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:s?n(e):"Object"==(i=n(e))&&"function"==typeof e.callee?"Arguments":i}},function(t,e,r){var i=r(0),n=r(19).f,o=r(11),s=r(13),a=r(17),u=r(60),h=r(38);t.exports=function(t,e){var r,c,l,d,p,f=t.target,m=t.global,y=t.stat;if(r=m?i:y?i[f]||a(f,{}):(i[f]||{}).prototype)for(c in e){if(d=e[c],l=t.noTargetGet?(p=n(r,c))&&p.value:r[c],!h(m?c:f+(y?".":"#")+c,t.forced)&&void 0!==l){if(typeof d==typeof l)continue;u(d,l)}(t.sham||l&&l.sham)&&o(d,"sham",!0),s(r,c,d,t)}}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,r){var i=r(37),n=Math.min;t.exports=function(t){return t>0?n(i(t),9007199254740991):0}},function(t,e){var r=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:r)(t)}},function(t,e,r){var i=r(3),n=/#|\.prototype\./,isForced=function(t,e){var r=s[o(t)];return r==u||r!=a&&("function"==typeof e?i(e):!!e)},o=isForced.normalize=function(t){return String(t).replace(n,".").toLowerCase()},s=isForced.data={},a=isForced.NATIVE="N",u=isForced.POLYFILL="P";t.exports=isForced},function(t,e){t.exports={}},function(t,e,r){var i=r(14);t.exports=function(t,e,r){if(i(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,i){return t.call(e,r,i)};case 3:return function(r,i,n){return t.call(e,r,i,n)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var i,n,o,s=r(0),a=r(3),u=r(9),h=r(40),c=r(80),l=r(26),d=r(42),p=s.location,f=s.setImmediate,m=s.clearImmediate,y=s.process,g=s.MessageChannel,v=s.Dispatch,_=0,x={},b="onreadystatechange",run=function(t){if(x.hasOwnProperty(t)){var e=x[t];delete x[t],e()}},runner=function(t){return function(){run(t)}},listener=function(t){run(t.data)},post=function(t){s.postMessage(t+"",p.protocol+"//"+p.host)};f&&m||(f=function setImmediate(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return x[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},i(_),_},m=function clearImmediate(t){delete x[t]},"process"==u(y)?i=function(t){y.nextTick(runner(t))}:v&&v.now?i=function(t){v.now(runner(t))}:g&&!d?(o=(n=new g).port2,n.port1.onmessage=listener,i=h(o.postMessage,o,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||a(post)||"file:"===p.protocol?i=b in l("script")?function(t){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),run(t)}}:function(t){setTimeout(runner(t),0)}:(i=post,s.addEventListener("message",listener,!1))),t.exports={set:f,clear:m}},function(t,e,r){var i=r(43);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},function(t,e,r){var i=r(10);t.exports=i("navigator","userAgent")||""},function(t,e,r){"use strict";var i=r(14),PromiseCapability=function(t){var e,r;this.promise=new t((function(t,i){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=i})),this.resolve=i(e),this.reject=i(r)};t.exports.f=function(t){return new PromiseCapability(t)}},function(t,e,r){var i=function(t){"use strict";var e,r=Object.prototype,i=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function(t,e,r){return t[e]=r}}function wrap(t,e,r,i){var n=e&&e.prototype instanceof Generator?e:Generator,o=Object.create(n.prototype),s=new Context(i||[]);return o._invoke=function makeInvokeMethod(t,e,r){var i=u;return function invoke(n,o){if(i===c)throw new Error("Generator is already running");if(i===l){if("throw"===n)throw o;return doneResult()}for(r.method=n,r.arg=o;;){var s=r.delegate;if(s){var a=maybeInvokeDelegate(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===u)throw i=l,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=c;var p=tryCatch(t,e,r);if("normal"===p.type){if(i=r.done?l:h,p.arg===d)continue;return{value:p.arg,done:r.done}}"throw"===p.type&&(i=l,r.method="throw",r.arg=p.arg)}}}(t,r,s),o}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var u="suspendedStart",h="suspendedYield",c="executing",l="completed",d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};p[o]=function(){return this};var f=Object.getPrototypeOf,m=f&&f(f(values([])));m&&m!==r&&i.call(m,o)&&(p=m);var y=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(r,n,o,s){var a=tryCatch(t[r],t,n);if("throw"!==a.type){var u=a.arg,h=u.value;return h&&"object"==typeof h&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){invoke("next",t,o,s)}),(function(t){invoke("throw",t,o,s)})):e.resolve(h).then((function(t){u.value=t,o(u)}),(function(t){return invoke("throw",t,o,s)}))}s(a.arg)}var r;this._invoke=function enqueue(t,i){function callInvokeWithMethodAndArg(){return new e((function(e,r){invoke(t,i,e,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,r){var i=t.iterator[r.method];if(i===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,maybeInvokeDelegate(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var n=tryCatch(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,d;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function next(){for(;++n<t.length;)if(i.call(t,n))return next.value=t[n],next.done=!1,next;return next.value=e,next.done=!0,next};return s.next=s}}return{next:doneResult}}function doneResult(){return{value:e,done:!0}}return GeneratorFunction.prototype=y.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunction.displayName=define(GeneratorFunctionPrototype,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[s]=function(){return this},t.AsyncIterator=AsyncIterator,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var s=new AsyncIterator(wrap(e,r,i,n),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},defineIteratorMethods(y),define(y,a,"Generator"),y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function next(){for(;e.length;){var r=e.pop();if(r in t)return next.value=r,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function handle(i,n){return s.type="throw",s.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var n=i.arg;resetTryEntry(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:values(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function Events(){}function EE(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function addListener(t,e,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new EE(r,i||t,o),a=n?n+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function clearEvent(t,e){0==--t._eventsCount?t._events=new Events:delete t._events[e]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(n=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},EventEmitter.prototype.listeners=function listeners(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},EventEmitter.prototype.listenerCount=function listenerCount(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},EventEmitter.prototype.emit=function emit(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var u,h,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,s),!0}for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c.fn.apply(c.context,u)}else{var d,p=c.length;for(h=0;h<p;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),l){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,r);break;case 4:c[h].fn.call(c[h].context,e,r,i);break;default:if(!u)for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c[h].fn.apply(c[h].context,u)}}return!0},EventEmitter.prototype.on=function on(t,e,r){return addListener(this,t,e,r,!1)},EventEmitter.prototype.once=function once(t,e,r){return addListener(this,t,e,r,!0)},EventEmitter.prototype.removeListener=function removeListener(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return clearEvent(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||clearEvent(this,o);else{for(var a=0,u=[],h=s.length;a<h;a++)(s[a].fn!==e||i&&!s[a].once||r&&s[a].context!==r)&&u.push(s[a]);u.length?this._events[o]=1===u.length?u[0]:u:clearEvent(this,o)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var e;return t?(e=n?n+t:t,this._events[e]&&clearEvent(this,e)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=n,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},function(t,e,r){"use strict";function earcut(t,e,r){r=r||2;var i,n,o,s,a,u,h,c=e&&e.length,l=c?e[0]*r:t.length,d=linkedList(t,0,l,r,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function eliminateHoles(t,e,r,i){var n,o,s,a=[];for(n=0,o=e.length;n<o;n++)(s=linkedList(t,e[n]*i,n<o-1?e[n+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),a.push(getLeftmost(s));for(a.sort(compareX),n=0;n<a.length;n++)eliminateHole(a[n],r),r=filterPoints(r,r.next);return r}(t,e,d,r)),t.length>80*r){i=o=t[0],n=s=t[1];for(var f=r;f<l;f+=r)(a=t[f])<i&&(i=a),(u=t[f+1])<n&&(n=u),a>o&&(o=a),u>s&&(s=u);h=0!==(h=Math.max(o-i,s-n))?1/h:0}return earcutLinked(d,p,r,i,n,h),p}function linkedList(t,e,r,i,n){var o,s;if(n===signedArea(t,e,r,i)>0)for(o=e;o<r;o+=i)s=insertNode(o,t[o],t[o+1],s);else for(o=r-i;o>=e;o-=i)s=insertNode(o,t[o],t[o+1],s);return s&&equals(s,s.next)&&(removeNode(s),s=s.next),s}function filterPoints(t,e){if(!t)return t;e||(e=t);var r,i=t;do{if(r=!1,i.steiner||!equals(i,i.next)&&0!==area(i.prev,i,i.next))i=i.next;else{if(removeNode(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function earcutLinked(t,e,r,i,n,o,s){if(t){!s&&o&&function indexCurve(t,e,r,i){var n=t;do{null===n.z&&(n.z=zOrder(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function sortLinked(t){var e,r,i,n,o,s,a,u,h=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,i=r,a=0,e=0;e<h&&(a++,i=i.nextZ);e++);for(u=h;a>0||u>0&&i;)0!==a&&(0===u||!i||r.z<=i.z)?(n=r,r=r.nextZ,a--):(n=i,i=i.nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,h*=2}while(s>1);return t}(n)}(t,i,n,o);for(var a,u,h=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?isEarHashed(t,i,n,o):isEar(t))e.push(a.i/r),e.push(t.i/r),e.push(u.i/r),removeNode(t),t=u.next,h=u.next;else if((t=u)===h){s?1===s?earcutLinked(t=cureLocalIntersections(filterPoints(t),e,r),e,r,i,n,o,2):2===s&&splitEarcut(t,e,r,i,n,o):earcutLinked(filterPoints(t),e,r,i,n,o,1);break}}}function isEar(t){var e=t.prev,r=t,i=t.next;if(area(e,r,i)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(pointInTriangle(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&area(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function isEarHashed(t,e,r,i){var n=t.prev,o=t,s=t.next;if(area(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,u=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,h=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,c=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,l=zOrder(a,u,e,r,i),d=zOrder(h,c,e,r,i),p=t.prevZ,f=t.nextZ;p&&p.z>=l&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&pointInTriangle(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&pointInTriangle(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=l;){if(p!==t.prev&&p!==t.next&&pointInTriangle(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&pointInTriangle(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function cureLocalIntersections(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!equals(n,o)&&intersects(n,i,i.next,o)&&locallyInside(n,o)&&locallyInside(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),removeNode(i),removeNode(i.next),i=t=o),i=i.next}while(i!==t);return filterPoints(i)}function splitEarcut(t,e,r,i,n,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&isValidDiagonal(s,a)){var u=splitPolygon(s,a);return s=filterPoints(s,s.next),u=filterPoints(u,u.next),earcutLinked(s,e,r,i,n,o),void earcutLinked(u,e,r,i,n,o)}a=a.next}s=s.next}while(s!==t)}function compareX(t,e){return t.x-e.x}function eliminateHole(t,e){if(e=function findHoleBridge(t,e){var r,i=e,n=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>s){if(s=a,a===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===s)return r;var u,h=r,c=r.x,l=r.y,d=1/0;i=r;do{n>=i.x&&i.x>=c&&n!==i.x&&pointInTriangle(o<l?n:s,o,c,l,o<l?s:n,o,i.x,i.y)&&(u=Math.abs(o-i.y)/(n-i.x),locallyInside(i,t)&&(u<d||u===d&&(i.x>r.x||i.x===r.x&&sectorContainsSector(r,i)))&&(r=i,d=u)),i=i.next}while(i!==h);return r}(t,e)){var r=splitPolygon(e,t);filterPoints(e,e.next),filterPoints(r,r.next)}}function sectorContainsSector(t,e){return area(t.prev,t,e.prev)<0&&area(e.next,t,t.next)<0}function zOrder(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function getLeftmost(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function pointInTriangle(t,e,r,i,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(r-s)*(e-a)>=0&&(r-s)*(o-a)-(n-s)*(i-a)>=0}function isValidDiagonal(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function intersectsPolygon(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&intersects(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(locallyInside(t,e)&&locallyInside(e,t)&&function middleInside(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==t);return i}(t,e)&&(area(t.prev,t,e.prev)||area(t,e.prev,e))||equals(t,e)&&area(t.prev,t,t.next)>0&&area(e.prev,e,e.next)>0)}function area(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function equals(t,e){return t.x===e.x&&t.y===e.y}function intersects(t,e,r,i){var n=sign(area(t,e,r)),o=sign(area(t,e,i)),s=sign(area(r,i,t)),a=sign(area(r,i,e));return n!==o&&s!==a||(!(0!==n||!onSegment(t,r,e))||(!(0!==o||!onSegment(t,i,e))||(!(0!==s||!onSegment(r,t,i))||!(0!==a||!onSegment(r,e,i)))))}function onSegment(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function sign(t){return t>0?1:t<0?-1:0}function locallyInside(t,e){return area(t.prev,t,t.next)<0?area(t,e,t.next)>=0&&area(t,t.prev,e)>=0:area(t,e,t.prev)<0||area(t,t.next,e)<0}function splitPolygon(t,e){var r=new Node(t.i,t.x,t.y),i=new Node(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function insertNode(t,e,r,i){var n=new Node(t,e,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,e,r,i){for(var n=0,o=e,s=r-i;o<r;o+=i)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}t.exports=earcut,t.exports.default=earcut,earcut.deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,s=Math.abs(signedArea(t,0,o,r));if(n)for(var a=0,u=e.length;a<u;a++){var h=e[a]*r,c=a<u-1?e[a+1]*r:t.length;s-=Math.abs(signedArea(t,h,c,r))}var l=0;for(a=0;a<i.length;a+=3){var d=i[a]*r,p=i[a+1]*r,f=i[a+2]*r;l+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},earcut.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);n>0&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){(function(i,n){var o;!function(i){var s=i.Promise,a=s&&"resolve"in s&&"reject"in s&&"all"in s&&"race"in s&&function(){var t;return new s((function(e){t=e})),"function"==typeof t}();e?(e.Promise=a?s:Promise,e.Polyfill=Promise):void 0===(o=function(){return a?s:Promise}.call(e,r,e,t))||(t.exports=o);var u="pending",h="sealed",c="fulfilled",l="rejected",NOOP=function(){};function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}var d,p=void 0!==n?n:setTimeout,f=[];function asyncFlush(){for(var t=0;t<f.length;t++)f[t][0](f[t][1]);f=[],d=!1}function asyncCall(t,e){f.push([t,e]),d||(d=!0,p(asyncFlush,0))}function invokeCallback(t){var e=t.owner,r=e.state_,i=e.data_,n=t[r],o=t.then;if("function"==typeof n){r=c;try{i=n(i)}catch(t){reject(o,t)}}handleThenable(o,i)||(r===c&&resolve(o,i),r===l&&reject(o,i))}function handleThenable(t,e){var r;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var i=e.then;if("function"==typeof i)return i.call(e,(function(i){r||(r=!0,e!==i?resolve(t,i):fulfill(t,i))}),(function(e){r||(r=!0,reject(t,e))})),!0}}catch(e){return r||reject(t,e),!0}return!1}function resolve(t,e){t!==e&&handleThenable(t,e)||fulfill(t,e)}function fulfill(t,e){t.state_===u&&(t.state_=h,t.data_=e,asyncCall(publishFulfillment,t))}function reject(t,e){t.state_===u&&(t.state_=h,t.data_=e,asyncCall(publishRejection,t))}function publish(t){var e=t.then_;t.then_=void 0;for(var r=0;r<e.length;r++)invokeCallback(e[r])}function publishFulfillment(t){t.state_=c,publish(t)}function publishRejection(t){t.state_=l,publish(t)}function Promise(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof Promise==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function invokeResolver(t,e){function rejectPromise(t){reject(e,t)}try{t((function resolvePromise(t){resolve(e,t)}),rejectPromise)}catch(t){rejectPromise(t)}}(t,this)}Promise.prototype={constructor:Promise,state_:u,then_:null,data_:void 0,then:function(t,e){var r={owner:this,then:new this.constructor(NOOP),fulfilled:t,rejected:e};return this.state_===c||this.state_===l?asyncCall(invokeCallback,r):this.then_.push(r),r.then},catch:function(t){return this.then(null,t)}},Promise.all=function(t){if(!isArray(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,r){var i=[],n=0;function resolver(t){return n++,function(r){i[t]=r,--n||e(i)}}for(var o,s=0;s<t.length;s++)(o=t[s])&&"function"==typeof o.then?o.then(resolver(s),r):i[s]=o;n||e(i)}))},Promise.race=function(t){if(!isArray(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,r){for(var i,n=0;n<t.length;n++)(i=t[n])&&"function"==typeof i.then?i.then(e,r):e(i)}))},Promise.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this((function(e){e(t)}))},Promise.reject=function(t){return new this((function(e,r){r(t)}))}}("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this)}).call(this,r(7),r(91).setImmediate)},function(t,e,r){"use strict";var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function toObject(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function shouldUseNative(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,s,a=toObject(t),u=1;u<arguments.length;u++){for(var h in r=Object(arguments[u]))n.call(r,h)&&(a[h]=r[h]);if(i){s=i(r);for(var c=0;c<s.length;c++)o.call(r,s[c])&&(a[s[c]]=r[s[c]])}}return a}},,function(t,e){t.exports=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){var i=r(16),n=r(13),o=r(56);i||n(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,r){var i=r(30);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,r){var i=r(0),n=r(18),o=i.WeakMap;t.exports="function"==typeof o&&/native code/.test(n(o))},function(t,e,r){var i=r(22),n=r(29),o=i("keys");t.exports=function(t){return o[t]||(o[t]=n(t))}},function(t,e,r){"use strict";var i=r(16),n=r(33);t.exports=i?{}.toString:function toString(){return"[object "+n(this)+"]"}},function(t,e,r){"use strict";var i,n,o,s,a=r(34),u=r(23),h=r(0),c=r(10),l=r(69),d=r(13),p=r(70),f=r(71),m=r(72),y=r(5),g=r(14),v=r(73),_=r(9),x=r(18),b=r(74),T=r(78),E=r(79),S=r(41).set,P=r(81),w=r(82),I=r(83),A=r(44),O=r(84),R=r(31),M=r(38),C=r(2),D=r(85),L=C("species"),F="Promise",N=R.get,B=R.set,U=R.getterFor(F),k=l,G=h.TypeError,j=h.document,X=h.process,H=c("fetch"),z=A.f,V=z,Y="process"==_(X),W=!!(j&&j.createEvent&&h.dispatchEvent),q="unhandledrejection",Z=M(F,(function(){if(!(x(k)!==String(k))){if(66===D)return!0;if(!Y&&"function"!=typeof PromiseRejectionEvent)return!0}if(u&&!k.prototype.finally)return!0;if(D>=51&&/native code/.test(k))return!1;var t=k.resolve(1),FakePromise=function(t){t((function(){}),(function(){}))};return(t.constructor={})[L]=FakePromise,!(t.then((function(){}))instanceof FakePromise)})),K=Z||!T((function(t){k.all(t).catch((function(){}))})),isThenable=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},notify=function(t,e,r){if(!e.notified){e.notified=!0;var i=e.reactions;P((function(){for(var n=e.value,o=1==e.state,s=0;i.length>s;){var a,u,h,c=i[s++],l=o?c.ok:c.fail,d=c.resolve,p=c.reject,f=c.domain;try{l?(o||(2===e.rejection&&onHandleUnhandled(t,e),e.rejection=1),!0===l?a=n:(f&&f.enter(),a=l(n),f&&(f.exit(),h=!0)),a===c.promise?p(G("Promise-chain cycle")):(u=isThenable(a))?u.call(a,d,p):d(a)):p(n)}catch(t){f&&!h&&f.exit(),p(t)}}e.reactions=[],e.notified=!1,r&&!e.rejection&&onUnhandled(t,e)}))}},dispatchEvent=function(t,e,r){var i,n;W?((i=j.createEvent("Event")).promise=e,i.reason=r,i.initEvent(t,!1,!0),h.dispatchEvent(i)):i={promise:e,reason:r},(n=h["on"+t])?n(i):t===q&&I("Unhandled promise rejection",r)},onUnhandled=function(t,e){S.call(h,(function(){var r,i=e.value;if(isUnhandled(e)&&(r=O((function(){Y?X.emit("unhandledRejection",i,t):dispatchEvent(q,t,i)})),e.rejection=Y||isUnhandled(e)?2:1,r.error))throw r.value}))},isUnhandled=function(t){return 1!==t.rejection&&!t.parent},onHandleUnhandled=function(t,e){S.call(h,(function(){Y?X.emit("rejectionHandled",t):dispatchEvent("rejectionhandled",t,e.value)}))},bind=function(t,e,r,i){return function(n){t(e,r,n,i)}},internalReject=function(t,e,r,i){e.done||(e.done=!0,i&&(e=i),e.value=r,e.state=2,notify(t,e,!0))},internalResolve=function(t,e,r,i){if(!e.done){e.done=!0,i&&(e=i);try{if(t===r)throw G("Promise can't be resolved itself");var n=isThenable(r);n?P((function(){var i={done:!1};try{n.call(r,bind(internalResolve,t,i,e),bind(internalReject,t,i,e))}catch(r){internalReject(t,i,r,e)}})):(e.value=r,e.state=1,notify(t,e,!1))}catch(r){internalReject(t,{done:!1},r,e)}}};Z&&(k=function Promise(t){v(this,k,F),g(t),i.call(this);var e=N(this);try{t(bind(internalResolve,this,e),bind(internalReject,this,e))}catch(t){internalReject(this,e,t)}},(i=function Promise(t){B(this,{type:F,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(k.prototype,{then:function then(t,e){var r=U(this),i=z(E(this,k));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=Y?X.domain:void 0,r.parent=!0,r.reactions.push(i),0!=r.state&&notify(this,r,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),n=function(){var t=new i,e=N(t);this.promise=t,this.resolve=bind(internalResolve,t,e),this.reject=bind(internalReject,t,e)},A.f=z=function(t){return t===k||t===o?new n(t):V(t)},u||"function"!=typeof l||(s=l.prototype.then,d(l.prototype,"then",(function then(t,e){var r=this;return new k((function(t,e){s.call(r,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof H&&a({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(t){return w(k,H.apply(h,arguments))}}))),a({global:!0,wrap:!0,forced:Z},{Promise:k}),f(k,F,!1,!0),m(F),o=c(F),a({target:F,stat:!0,forced:Z},{reject:function reject(t){var e=z(this);return e.reject.call(void 0,t),e.promise}}),a({target:F,stat:!0,forced:u||Z},{resolve:function resolve(t){return w(u&&this===o?k:this,t)}}),a({target:F,stat:!0,forced:K},{all:function all(t){var e=this,r=z(e),i=r.resolve,n=r.reject,o=O((function(){var r=g(e.resolve),o=[],s=0,a=1;b(t,(function(t){var u=s++,h=!1;o.push(void 0),a++,r.call(e,t).then((function(t){h||(h=!0,o[u]=t,--a||i(o))}),n)})),--a||i(o)}));return o.error&&n(o.value),r.promise},race:function race(t){var e=this,r=z(e),i=r.reject,n=O((function(){var n=g(e.resolve);b(t,(function(t){n.call(e,t).then(r.resolve,i)}))}));return n.error&&i(n.value),r.promise}})},function(t,e,r){"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!i.call({1:2},1);e.f=o?function propertyIsEnumerable(t){var e=n(this,t);return!!e&&e.enumerable}:i},function(t,e,r){var i=r(3),n=r(9),o="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==n(t)?o.call(t,""):Object(t)}:Object},function(t,e,r){var i=r(4),n=r(61),o=r(19),s=r(12);t.exports=function(t,e){for(var r=n(e),a=s.f,u=o.f,h=0;h<r.length;h++){var c=r[h];i(t,c)||a(t,c,u(e,c))}}},function(t,e,r){var i=r(10),n=r(63),o=r(68),s=r(6);t.exports=i("Reflect","ownKeys")||function ownKeys(t){var e=n.f(s(t)),r=o.f;return r?e.concat(r(t)):e}},function(t,e,r){var i=r(0);t.exports=i},function(t,e,r){var i=r(64),n=r(67).concat("length","prototype");e.f=Object.getOwnPropertyNames||function getOwnPropertyNames(t){return i(t,n)}},function(t,e,r){var i=r(4),n=r(20),o=r(65).indexOf,s=r(32);t.exports=function(t,e){var r,a=n(t),u=0,h=[];for(r in a)!i(s,r)&&i(a,r)&&h.push(r);for(;e.length>u;)i(a,r=e[u++])&&(~o(h,r)||h.push(r));return h}},function(t,e,r){var i=r(20),n=r(36),o=r(66),createMethod=function(t){return function(e,r,s){var a,u=i(e),h=n(u.length),c=o(s,h);if(t&&r!=r){for(;h>c;)if((a=u[c++])!=a)return!0}else for(;h>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},function(t,e,r){var i=r(37),n=Math.max,o=Math.min;t.exports=function(t,e){var r=i(t);return r<0?n(r+e,0):o(r,e)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var i=r(0);t.exports=i.Promise},function(t,e,r){var i=r(13);t.exports=function(t,e,r){for(var n in e)i(t,n,e[n],r);return t}},function(t,e,r){var i=r(12).f,n=r(4),o=r(2)("toStringTag");t.exports=function(t,e,r){t&&!n(t=r?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,r){"use strict";var i=r(10),n=r(12),o=r(2),s=r(8),a=o("species");t.exports=function(t){var e=i(t),r=n.f;s&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t}},function(t,e,r){var i=r(6),n=r(75),o=r(36),s=r(40),a=r(76),u=r(77),Result=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,r,h,c){var l,d,p,f,m,y,g,v=s(e,r,h?2:1);if(c)l=t;else{if("function"!=typeof(d=a(t)))throw TypeError("Target is not iterable");if(n(d)){for(p=0,f=o(t.length);f>p;p++)if((m=h?v(i(g=t[p])[0],g[1]):v(t[p]))&&m instanceof Result)return m;return new Result(!1)}l=d.call(t)}for(y=l.next;!(g=y.call(l)).done;)if("object"==typeof(m=u(l,v,g.value,h))&&m&&m instanceof Result)return m;return new Result(!1)}).stop=function(t){return new Result(!0,t)}},function(t,e,r){var i=r(2),n=r(39),o=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||s[o]===t)}},function(t,e,r){var i=r(33),n=r(39),o=r(2)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||n[i(t)]}},function(t,e,r){var i=r(6);t.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,r){var i=r(2)("iterator"),n=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){n=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var o={};o[i]=function(){return{next:function(){return{done:r=!0}}}},t(o)}catch(t){}return r}},function(t,e,r){var i=r(6),n=r(14),o=r(2)("species");t.exports=function(t,e){var r,s=i(t).constructor;return void 0===s||null==(r=i(s)[o])?e:n(r)}},function(t,e,r){var i=r(10);t.exports=i("document","documentElement")},function(t,e,r){var i,n,o,s,a,u,h,c,l=r(0),d=r(19).f,p=r(9),f=r(41).set,m=r(42),y=l.MutationObserver||l.WebKitMutationObserver,g=l.process,v=l.Promise,_="process"==p(g),x=d(l,"queueMicrotask"),b=x&&x.value;b||(i=function(){var t,e;for(_&&(t=g.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?s():o=void 0,t}}o=void 0,t&&t.enter()},_?s=function(){g.nextTick(i)}:y&&!m?(a=!0,u=document.createTextNode(""),new y(i).observe(u,{characterData:!0}),s=function(){u.data=a=!a}):v&&v.resolve?(h=v.resolve(void 0),c=h.then,s=function(){c.call(h,i)}):s=function(){f.call(l,i)}),t.exports=b||function(t){var e={fn:t,next:void 0};o&&(o.next=e),n||(n=e,s()),o=e}},function(t,e,r){var i=r(6),n=r(5),o=r(44);t.exports=function(t,e){if(i(t),n(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){var i=r(0);t.exports=function(t,e){var r=i.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,r){var i,n,o=r(0),s=r(43),a=o.process,u=a&&a.versions,h=u&&u.v8;h?n=(i=h.split("."))[0]+i[1]:s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(n=i[1]),t.exports=n&&+n},function(t,e,r){"use strict";var i=r(34),n=r(87);i({target:"String",proto:!0,forced:r(88)("anchor")},{anchor:function anchor(t){return n(this,"a","name",t)}})},function(t,e,r){var i=r(35),n=/"/g;t.exports=function(t,e,r,o){var s=String(i(t)),a="<"+e;return""!==r&&(a+=" "+r+'="'+String(o).replace(n,"&quot;")+'"'),a+">"+s+"</"+e+">"}},function(t,e,r){var i=r(3);t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e,r){t.exports=r(45)},function(t,e){function asyncGeneratorStep(t,e,r,i,n,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(i,n)}t.exports=function _asyncToGenerator(t){return function(){var e=this,r=arguments;return new Promise((function(i,n){var o=t.apply(e,r);function _next(t){asyncGeneratorStep(o,i,n,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(o,i,n,_next,_throw,"throw",t)}_next(void 0)}))}}},function(t,e,r){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function Timeout(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new Timeout(n.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new Timeout(n.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function onTimeout(){t._onTimeout&&t._onTimeout()}),e))},r(92),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(7))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var i,n=1,o={},s=!1,a=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?function installNextTickImplementation(){i=function(t){e.nextTick((function(){runIfPresent(t)}))}}():!function canUsePostMessage(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?function installMessageChannelImplementation(){var t=new MessageChannel;t.port1.onmessage=function(t){runIfPresent(t.data)},i=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function installReadyStateChangeImplementation(){var t=a.documentElement;i=function(e){var r=a.createElement("script");r.onreadystatechange=function(){runIfPresent(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():function installSetTimeoutImplementation(){i=function(t){setTimeout(runIfPresent,0,t)}}():function installPostMessageImplementation(){var e="setImmediate$"+Math.random()+"$",onGlobalMessage=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&runIfPresent(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",onGlobalMessage,!1):t.attachEvent("onmessage",onGlobalMessage),i=function(r){t.postMessage(e+r,"*")}}(),u.setImmediate=function setImmediate(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var s={callback:t,args:e};return o[n]=s,i(n),n++},u.clearImmediate=clearImmediate}function clearImmediate(t){delete o[t]}function runIfPresent(t){if(s)setTimeout(runIfPresent,0,t);else{var e=o[t];if(e){s=!0;try{!function run(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{clearImmediate(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(7),r(93))},function(t,e){var r,i,n=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(r===setTimeout)return setTimeout(t,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){r=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){i=defaultClearTimeout}}();var o,s=[],a=!1,u=-1;function cleanUpNextTick(){a&&o&&(a=!1,o.length?s=o.concat(s):u=-1,s.length&&drainQueue())}function drainQueue(){if(!a){var t=runTimeout(cleanUpNextTick);a=!0;for(var e=s.length;e;){for(o=s,s=[];++u<e;)o&&o[u].run();u=-1,e=s.length}o=null,a=!1,function runClearTimeout(t){if(i===clearTimeout)return clearTimeout(t);if((i===defaultClearTimeout||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function Item(t,e){this.fun=t,this.array=e}function noop(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new Item(t,e)),1!==s.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=noop,n.addListener=noop,n.once=noop,n.off=noop,n.removeListener=noop,n.removeAllListeners=noop,n.emit=noop,n.prependListener=noop,n.prependOnceListener=noop,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){(function(t,i){var n;!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof i&&i;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,h=36,c=/^xn--/,l=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function error(t){throw RangeError(p[t])}function map(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function mapDomain(t,e){var r=t.split("@"),i="";return r.length>1&&(i=r[0]+"@",t=r[1]),i+map((t=t.replace(d,".")).split("."),e).join(".")}function ucs2decode(t){for(var e,r,i=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function ucs2encode(t){return map(t,(function(t){var e="";return t>65535&&(e+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=m(t)})).join("")}function digitToBasic(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function adapt(t,e,r){var i=0;for(t=r?f(t/700):t>>1,t+=f(t/e);t>455;i+=h)t=f(t/35);return f(i+36*t/(t+38))}function decode(t){var e,r,i,n,o,s,a,c,l,d,p,m=[],y=t.length,g=0,v=128,_=72;for((r=t.lastIndexOf("-"))<0&&(r=0),i=0;i<r;++i)t.charCodeAt(i)>=128&&error("not-basic"),m.push(t.charCodeAt(i));for(n=r>0?r+1:0;n<y;){for(o=g,s=1,a=h;n>=y&&error("invalid-input"),((c=(p=t.charCodeAt(n++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:h)>=h||c>f((u-g)/s))&&error("overflow"),g+=c*s,!(c<(l=a<=_?1:a>=_+26?26:a-_));a+=h)s>f(u/(d=h-l))&&error("overflow"),s*=d;_=adapt(g-o,e=m.length+1,0==o),f(g/e)>u-v&&error("overflow"),v+=f(g/e),g%=e,m.splice(g++,0,v)}return ucs2encode(m)}function encode(t){var e,r,i,n,o,s,a,c,l,d,p,y,g,v,_,x=[];for(y=(t=ucs2decode(t)).length,e=128,r=0,o=72,s=0;s<y;++s)(p=t[s])<128&&x.push(m(p));for(i=n=x.length,n&&x.push("-");i<y;){for(a=u,s=0;s<y;++s)(p=t[s])>=e&&p<a&&(a=p);for(a-e>f((u-r)/(g=i+1))&&error("overflow"),r+=(a-e)*g,e=a,s=0;s<y;++s)if((p=t[s])<e&&++r>u&&error("overflow"),p==e){for(c=r,l=h;!(c<(d=l<=o?1:l>=o+26?26:l-o));l+=h)_=c-d,v=h-d,x.push(m(digitToBasic(d+_%v,0))),c=f(_/v);x.push(m(digitToBasic(c,0))),o=adapt(r,g,i==n),r=0,++i}++r,++e}return x.join("")}a={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function toASCII(t){return mapDomain(t,(function(t){return l.test(t)?"xn--"+encode(t):t}))},toUnicode:function toUnicode(t){return mapDomain(t,(function(t){return c.test(t)?decode(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return a}.call(e,r,e,t))||(t.exports=n)}()}).call(this,r(95)(t),r(7))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(98),e.encode=e.stringify=r(99)},function(t,e,r){"use strict";function hasOwnProperty(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var u=t.length;a>0&&u>a&&(u=a);for(var h=0;h<u;++h){var c,l,d,p,f=t[h].replace(s,"%20"),m=f.indexOf(r);m>=0?(c=f.substr(0,m),l=f.substr(m+1)):(c=f,l=""),d=decodeURIComponent(c),p=decodeURIComponent(l),hasOwnProperty(o,d)?i(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var stringifyPrimitive=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,o){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?map(n(t),(function(n){var o=encodeURIComponent(stringifyPrimitive(n))+r;return i(t[n])?map(t[n],(function(t){return o+encodeURIComponent(stringifyPrimitive(t))})).join(e):o+encodeURIComponent(stringifyPrimitive(t[n]))})).join(e):o?encodeURIComponent(stringifyPrimitive(o))+r+encodeURIComponent(stringifyPrimitive(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function map(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var n=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},,function(t,e,r){"use strict";r.r(e),r.d(e,"utils",(function(){return i})),r.d(e,"AccessibilityManager",(function(){return Bt})),r.d(e,"accessibleTarget",(function(){return Ft})),r.d(e,"InteractionData",(function(){return jt})),r.d(e,"InteractionEvent",(function(){return Xt})),r.d(e,"InteractionManager",(function(){return Wt})),r.d(e,"InteractionTrackingData",(function(){return Ht})),r.d(e,"interactiveTarget",(function(){return Vt})),r.d(e,"Application",(function(){return zr})),r.d(e,"AbstractBatchRenderer",(function(){return Br})),r.d(e,"AbstractRenderer",(function(){return Rr})),r.d(e,"Attribute",(function(){return _e})),r.d(e,"BaseRenderTexture",(function(){return pe})),r.d(e,"BaseTexture",(function(){return $t})),r.d(e,"BatchDrawCall",(function(){return Lr})),r.d(e,"BatchGeometry",(function(){return kr})),r.d(e,"BatchPluginFactory",(function(){return Xr})),r.d(e,"BatchRenderer",(function(){return Hr})),r.d(e,"BatchShaderGenerator",(function(){return Ur})),r.d(e,"BatchTextureArray",(function(){return Fr})),r.d(e,"Buffer",(function(){return be})),r.d(e,"Filter",(function(){return sr})),r.d(e,"FilterState",(function(){return Me})),r.d(e,"Framebuffer",(function(){return de})),r.d(e,"GLFramebuffer",(function(){return Be})),r.d(e,"GLProgram",(function(){return xr})),r.d(e,"GLTexture",(function(){return wr})),r.d(e,"Geometry",(function(){return we})),r.d(e,"IGLUniformData",(function(){return _r})),r.d(e,"MaskData",(function(){return He})),r.d(e,"ObjectRenderer",(function(){return De})),r.d(e,"Program",(function(){return ir})),r.d(e,"Quad",(function(){return Ie})),r.d(e,"QuadUv",(function(){return Ae})),r.d(e,"RenderTexture",(function(){return ge})),r.d(e,"RenderTexturePool",(function(){return ve})),r.d(e,"Renderer",(function(){return Mr})),r.d(e,"Shader",(function(){return nr})),r.d(e,"SpriteMaskFilter",(function(){return hr})),r.d(e,"State",(function(){return or})),r.d(e,"System",(function(){return ce})),r.d(e,"Texture",(function(){return ye})),r.d(e,"TextureMatrix",(function(){return ur})),r.d(e,"TextureUvs",(function(){return fe})),r.d(e,"UniformGroup",(function(){return Re})),r.d(e,"ViewableBuffer",(function(){return Nr})),r.d(e,"autoDetectRenderer",(function(){return autoDetectRenderer})),r.d(e,"checkMaxIfStatementsInShader",(function(){return checkMaxIfStatementsInShader})),r.d(e,"defaultFilterVertex",(function(){return Dr})),r.d(e,"defaultVertex",(function(){return Cr})),r.d(e,"resources",(function(){return he})),r.d(e,"systems",(function(){return Ar})),r.d(e,"uniformParsers",(function(){return Ke})),r.d(e,"Extract",(function(){return Wr})),r.d(e,"AppLoaderPlugin",(function(){return hi})),r.d(e,"Loader",(function(){return ui})),r.d(e,"LoaderResource",(function(){return si})),r.d(e,"TextureLoader",(function(){return ai})),r.d(e,"ParticleContainer",(function(){return di})),r.d(e,"ParticleRenderer",(function(){return fi})),r.d(e,"BasePrepare",(function(){return Qi})),r.d(e,"CountLimiter",(function(){return Ki})),r.d(e,"Prepare",(function(){return Ji})),r.d(e,"TimeLimiter",(function(){return $i})),r.d(e,"Spritesheet",(function(){return tn})),r.d(e,"SpritesheetLoader",(function(){return en})),r.d(e,"TilingSprite",(function(){return nn})),r.d(e,"TilingSpriteRenderer",(function(){return un})),r.d(e,"BitmapFont",(function(){return gn})),r.d(e,"BitmapFontData",(function(){return mn})),r.d(e,"BitmapFontLoader",(function(){return bn})),r.d(e,"BitmapText",(function(){return xn})),r.d(e,"Ticker",(function(){return kt})),r.d(e,"TickerPlugin",(function(){return Gt})),r.d(e,"UPDATE_PRIORITY",(function(){return Nt})),r.d(e,"ALPHA_MODES",(function(){return k})),r.d(e,"BLEND_MODES",(function(){return M})),r.d(e,"BUFFER_BITS",(function(){return R})),r.d(e,"CLEAR_MODES",(function(){return G})),r.d(e,"DRAW_MODES",(function(){return C})),r.d(e,"ENV",(function(){return A})),r.d(e,"FORMATS",(function(){return D})),r.d(e,"GC_MODES",(function(){return j})),r.d(e,"MASK_TYPES",(function(){return H})),r.d(e,"MIPMAP_MODES",(function(){return U})),r.d(e,"MSAA_QUALITY",(function(){return z})),r.d(e,"PRECISION",(function(){return X})),r.d(e,"RENDERER_TYPE",(function(){return O})),r.d(e,"SCALE_MODES",(function(){return N})),r.d(e,"TARGETS",(function(){return L})),r.d(e,"TYPES",(function(){return F})),r.d(e,"WRAP_MODES",(function(){return B})),r.d(e,"Bounds",(function(){return Mt})),r.d(e,"Container",(function(){return Lt})),r.d(e,"DisplayObject",(function(){return Ct})),r.d(e,"TemporaryDisplayObject",(function(){return Dt})),r.d(e,"FillStyle",(function(){return yi})),r.d(e,"GRAPHICS_CURVES",(function(){return mi})),r.d(e,"Graphics",(function(){return Ui})),r.d(e,"GraphicsData",(function(){return Mi})),r.d(e,"GraphicsGeometry",(function(){return Li})),r.d(e,"LINE_CAP",(function(){return li})),r.d(e,"LINE_JOIN",(function(){return ci})),r.d(e,"LineStyle",(function(){return Fi})),r.d(e,"graphicsUtils",(function(){return Ri})),r.d(e,"Circle",(function(){return mt})),r.d(e,"DEG_TO_RAD",(function(){return pt})),r.d(e,"Ellipse",(function(){return yt})),r.d(e,"Matrix",(function(){return bt})),r.d(e,"ObservablePoint",(function(){return xt})),r.d(e,"PI_2",(function(){return lt})),r.d(e,"Point",(function(){return _t})),r.d(e,"Polygon",(function(){return gt})),r.d(e,"RAD_TO_DEG",(function(){return dt})),r.d(e,"Rectangle",(function(){return ft})),r.d(e,"RoundedRectangle",(function(){return vt})),r.d(e,"SHAPES",(function(){return ct})),r.d(e,"Transform",(function(){return Rt})),r.d(e,"groupD8",(function(){return Ot})),r.d(e,"Mesh",(function(){return dn})),r.d(e,"MeshBatchUvs",(function(){return hn})),r.d(e,"MeshGeometry",(function(){return fn})),r.d(e,"MeshMaterial",(function(){return pn})),r.d(e,"NineSlicePlane",(function(){return eo})),r.d(e,"PlaneGeometry",(function(){return Kn})),r.d(e,"RopeGeometry",(function(){return Qn})),r.d(e,"SimpleMesh",(function(){return to})),r.d(e,"SimplePlane",(function(){return $n})),r.d(e,"SimpleRope",(function(){return Jn})),r.d(e,"Runner",(function(){return qt})),r.d(e,"Sprite",(function(){return Xi})),r.d(e,"AnimatedSprite",(function(){return ro})),r.d(e,"TEXT_GRADIENT",(function(){return ki})),r.d(e,"Text",(function(){return Zi})),r.d(e,"TextMetrics",(function(){return Yi})),r.d(e,"TextStyle",(function(){return Vi})),r.d(e,"isMobile",(function(){return I})),r.d(e,"settings",(function(){return V})),r.d(e,"VERSION",(function(){return no})),r.d(e,"filters",(function(){return oo})),r.d(e,"useDeprecated",(function(){return useDeprecated}));var i={};r.r(i),r.d(i,"isMobile",(function(){return I})),r.d(i,"EventEmitter",(function(){return W.a})),r.d(i,"earcut",(function(){return Z.a})),r.d(i,"url",(function(){return Q.a})),r.d(i,"BaseTextureCache",(function(){return st})),r.d(i,"CanvasRenderTarget",(function(){return at})),r.d(i,"DATA_URI",(function(){return ht})),r.d(i,"ProgramCache",(function(){return nt})),r.d(i,"TextureCache",(function(){return ot})),r.d(i,"clearTextureCache",(function(){return clearTextureCache})),r.d(i,"correctBlendMode",(function(){return correctBlendMode})),r.d(i,"createIndicesForQuads",(function(){return createIndicesForQuads})),r.d(i,"decomposeDataUri",(function(){return decomposeDataUri})),r.d(i,"deprecation",(function(){return deprecation})),r.d(i,"destroyTextureCache",(function(){return destroyTextureCache})),r.d(i,"determineCrossOrigin",(function(){return determineCrossOrigin})),r.d(i,"getBufferType",(function(){return getBufferType})),r.d(i,"getResolutionOfUrl",(function(){return getResolutionOfUrl})),r.d(i,"hex2rgb",(function(){return hex2rgb})),r.d(i,"hex2string",(function(){return hex2string})),r.d(i,"interleaveTypedArrays",(function(){return interleaveTypedArrays})),r.d(i,"isPow2",(function(){return isPow2})),r.d(i,"isWebGLSupported",(function(){return isWebGLSupported})),r.d(i,"log2",(function(){return log2})),r.d(i,"nextPow2",(function(){return nextPow2})),r.d(i,"premultiplyBlendMode",(function(){return tt})),r.d(i,"premultiplyRgba",(function(){return premultiplyRgba})),r.d(i,"premultiplyTint",(function(){return premultiplyTint})),r.d(i,"premultiplyTintToRgba",(function(){return premultiplyTintToRgba})),r.d(i,"removeItems",(function(){return removeItems})),r.d(i,"rgb2hex",(function(){return rgb2hex})),r.d(i,"sayHello",(function(){return sayHello})),r.d(i,"sign",(function(){return sign})),r.d(i,"skipHello",(function(){return skipHello})),r.d(i,"string2hex",(function(){return string2hex})),r.d(i,"trimCanvas",(function(){return trimCanvas})),r.d(i,"uid",(function(){return uid}));var n=r(48),o=r(49),s=r.n(o);window.Promise||(window.Promise=n.Polyfill),Object.assign||(Object.assign=s.a);if(Date.now&&Date.prototype.getTime||(Date.now=function now(){return(new Date).getTime()}),!window.performance||!window.performance.now){var a=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-a}}for(var u=Date.now(),h=["ms","moz","webkit","o"],c=0;c<h.length&&!window.requestAnimationFrame;++c){var l=h[c];window.requestAnimationFrame=window[l+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l+"CancelAnimationFrame"]||window[l+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+u-e;return r<0&&(r=0),u=e,window.setTimeout((function(){u=Date.now(),t(performance.now())}),r)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function mathSign(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function numberIsInteger(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var d=/iPhone/i,p=/iPod/i,f=/iPad/i,m=/\biOS-universal(?:.+)Mac\b/i,y=/\bAndroid(?:.+)Mobile\b/i,g=/Android/i,v=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,_=/Silk/i,x=/Windows Phone/i,b=/\bWindows(?:.+)ARM\b/i,T=/BlackBerry/i,E=/BB10/i,S=/Opera Mini/i,P=/\b(CriOS|Chrome)(?:.+)Mobile/i,w=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};var I=function isMobile(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,i=r.split("[FBAN");void 0!==i[1]&&(r=i[0]),void 0!==(i=r.split("Twitter"))[1]&&(r=i[0]);var n=function createMatch(t){return function(e){return e.test(t)}}(r),o={apple:{phone:n(d)&&!n(x),ipod:n(p),tablet:!n(d)&&(n(f)||isAppleTabletOnIos13(e))&&!n(x),universal:n(m),device:(n(d)||n(p)||n(f)||n(m)||isAppleTabletOnIos13(e))&&!n(x)},amazon:{phone:n(v),tablet:!n(v)&&n(_),device:n(v)||n(_)},android:{phone:!n(x)&&n(v)||!n(x)&&n(y),tablet:!n(x)&&!n(v)&&!n(y)&&(n(_)||n(g)),device:!n(x)&&(n(v)||n(_)||n(y)||n(g))||n(/\bokhttp\b/i)},windows:{phone:n(x),tablet:n(b),device:n(x)||n(b)},other:{blackberry:n(T),blackberry10:n(E),opera:n(S),firefox:n(w),chrome:n(P),device:n(T)||n(E)||n(S)||n(w)||n(P)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(window.navigator);var A,O,R,M,C,D,L,F,N,B,U,k,G,j,X,H,z,V={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function maxRecommendedTextures(t){var e=!0;if(I.tablet||I.phone){var r;if(I.apple.device)if(r=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(r[1],10)<11&&(e=!1);if(I.android.device)if(r=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(r[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:I.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:function canUploadSameBuffer(){return!I.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Y=r(46),W=r.n(Y),q=r(47),Z=r.n(q),K=r(15),Q=r.n(K);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(A||(A={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(O||(O={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(R||(R={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(M||(M={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(C||(C={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(D||(D={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(L||(L={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(F||(F={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(N||(N={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(B||(B={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(U||(U={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(k||(k={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(G||(G={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(j||(j={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(X||(X={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(H||(H={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(z||(z={})),V.RETINA_PREFIX=/@([0-9\.]+)x/,V.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var J,$=!1;function skipHello(){$=!0}function sayHello(t){var e;if(!$){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var r=["\n %c %c %c PixiJS 5.3.3 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,r)}else window.console&&window.console.log("PixiJS 5.3.3 - "+t+" - http://www.pixijs.com/");$=!0}}function isWebGLSupported(){return void 0===J&&(J=function supported(){var t={stencil:!0,failIfMajorPerformanceCaveat:V.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!r||!r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()}return r=null,i}catch(t){return!1}}()),J}function hex2rgb(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function hex2string(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function string2hex(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}function rgb2hex(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var tt=function mapPremultipliedBlendModes(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[M.NORMAL_NPM]=M.NORMAL,t[M.ADD_NPM]=M.ADD,t[M.SCREEN_NPM]=M.SCREEN,e[M.NORMAL]=M.NORMAL_NPM,e[M.ADD]=M.ADD_NPM,e[M.SCREEN]=M.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}();function correctBlendMode(t,e){return tt[e?1:0][t]}function premultiplyRgba(t,e,r,i){return r=r||new Float32Array(4),i||void 0===i?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function premultiplyTint(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,i=t>>8&255,n=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(n=n*e+.5|0)}function premultiplyTintToRgba(t,e,r,i){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(i||void 0===i)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function createIndicesForQuads(t,e){void 0===e&&(e=null);var r=6*t;if((e=e||new Uint16Array(r)).length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,n=0;i<r;i+=6,n+=4)e[i+0]=n+0,e[i+1]=n+1,e[i+2]=n+2,e[i+3]=n+0,e[i+4]=n+2,e[i+5]=n+3;return e}function getBufferType(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var et={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function interleaveTypedArrays(t,e){for(var r=0,i=0,n={},o=0;o<t.length;o++)i+=e[o],r+=t[o].length;var s=new ArrayBuffer(4*r),a=null,u=0;for(o=0;o<t.length;o++){var h=e[o],c=t[o],l=getBufferType(c);n[l]||(n[l]=new et[l](s)),a=n[l];for(var d=0;d<c.length;d++){a[(d/h|0)*i+u+d%h]=c[d]}u+=h}return new Float32Array(s)}function nextPow2(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function isPow2(t){return!(t&t-1||!t)}function log2(t){var e=(t>65535?1:0)<<4,r=((t>>>=e)>255?1:0)<<3;return e|=r,e|=r=((t>>>=r)>15?1:0)<<2,(e|=r=((t>>>=r)>3?1:0)<<1)|(t>>>=r)>>1}function removeItems(t,e,r){var i,n=t.length;if(!(e>=n||0===r)){var o=n-(r=e+r>n?n-e:r);for(i=e;i<o;++i)t[i]=t[i+r];t.length=o}}function sign(t){return 0===t?0:t<0?-1:1}var rt=0;function uid(){return++rt}var it={};function deprecation(t,e,r){if(void 0===r&&(r=3),!it[e]){var i=(new Error).stack;void 0===i?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(i=i.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(i))),it[e]=!0}}var nt={},ot=Object.create(null),st=Object.create(null);function destroyTextureCache(){var t;for(t in ot)ot[t].destroy();for(t in st)st[t].destroy()}function clearTextureCache(){var t;for(t in ot)delete ot[t];for(t in st)delete st[t]}var at=function(){function CanvasRenderTarget(t,e,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||V.RESOLUTION,this.resize(t,e)}return CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(CanvasRenderTarget.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(CanvasRenderTarget.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),CanvasRenderTarget}();function trimCanvas(t){var e,r,i,n=t.width,o=t.height,s=t.getContext("2d"),a=s.getImageData(0,0,n,o).data,u=a.length,h={top:null,left:null,right:null,bottom:null},c=null;for(e=0;e<u;e+=4)0!==a[e+3]&&(r=e/4%n,i=~~(e/4/n),null===h.top&&(h.top=i),(null===h.left||r<h.left)&&(h.left=r),(null===h.right||h.right<r)&&(h.right=r+1),(null===h.bottom||h.bottom<i)&&(h.bottom=i));return null!==h.top&&(n=h.right-h.left,o=h.bottom-h.top+1,c=s.getImageData(h.left,h.top,n,o)),{height:o,width:n,data:c}}var ut,ht=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function decomposeDataUri(t){var e=ht.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function determineCrossOrigin(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,ut||(ut=document.createElement("a")),ut.href=t;var r=Object(K.parse)(ut.href),i=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&i&&r.protocol===e.protocol?"":"anonymous"}function getResolutionOfUrl(t,e){var r=V.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1}var ct,lt=2*Math.PI,dt=180/Math.PI,pt=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(ct||(ct={}));var ft=function(){function Rectangle(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=ct.RECT}return Object.defineProperty(Rectangle.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(Rectangle,"EMPTY",{get:function(){return new Rectangle(0,0,0,0)},enumerable:!1,configurable:!0}),Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},Rectangle.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},Rectangle.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},Rectangle.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},Rectangle.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(n-i,0),this},Rectangle.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,i=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=i-this.y,this},Rectangle.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=i,this.height=n-i,this},Rectangle}(),mt=function(){function Circle(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=ct.CIRC}return Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)},Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-t,n=this.y-e;return(i*=i)+(n*=n)<=r},Circle.prototype.getBounds=function(){return new ft(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Circle}(),yt=function(){function Ellipse(t,e,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=t,this.y=e,this.width=r,this.height=i,this.type=ct.ELIP}return Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)},Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(e-this.y)/this.height;return(r*=r)+(i*=i)<=1},Ellipse.prototype.getBounds=function(){return new ft(this.x-this.width,this.y-this.height,this.width,this.height)},Ellipse}(),gt=function(){function Polygon(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var n=[],o=0,s=i.length;o<s;o++)n.push(i[o].x,i[o].y);i=n}this.points=i,this.type=ct.POLY,this.closeStroke=!0}return Polygon.prototype.clone=function(){var t=new Polygon(this.points.slice());return t.closeStroke=this.closeStroke,t},Polygon.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,o=i-1;n<i;o=n++){var s=this.points[2*n],a=this.points[2*n+1],u=this.points[2*o],h=this.points[2*o+1];a>e!=h>e&&t<(e-a)/(h-a)*(u-s)+s&&(r=!r)}return r},Polygon}(),vt=function(){function RoundedRectangle(t,e,r,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===n&&(n=20),this.x=t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=ct.RREC}return RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},RoundedRectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},RoundedRectangle}(),_t=function(){function Point(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Point.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Point.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Point.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},Point}(),xt=function(){function ObservablePoint(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this._x=r,this._y=i,this.cb=t,this.scope=e}return ObservablePoint.prototype.clone=function(t,e){return void 0===t&&(t=this.cb),void 0===e&&(e=this.scope),new ObservablePoint(t,e,this._x,this._y)},ObservablePoint.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyTo=function(t){return t.set(this._x,this._y),t},ObservablePoint.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(ObservablePoint.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(ObservablePoint.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),ObservablePoint}(),bt=function(){function Matrix(t,e,r,i,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o}return Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Matrix.prototype.set=function(t,e,r,i,n,o){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this},Matrix.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},Matrix.prototype.apply=function(t,e){e=e||new _t;var r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e},Matrix.prototype.applyInverse=function(t,e){e=e||new _t;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,n=t.y;return e.x=this.d*r*i+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*n+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Matrix.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,o=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},Matrix.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},Matrix.prototype.setTransform=function(t,e,r,i,n,o,s,a,u){return this.a=Math.cos(s+u)*n,this.b=Math.sin(s+u)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},Matrix.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},Matrix.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,o=-Math.atan2(-i,n),s=Math.atan2(r,e),a=Math.abs(o+s);return a<1e-5||Math.abs(lt-a)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx,t.position.y=this.ty,t},Matrix.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,o=t*i-e*r;return this.a=i/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-i*n)/o,this.ty=-(t*this.ty-e*n)/o,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var t=new Matrix;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Matrix.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Matrix.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(Matrix,"IDENTITY",{get:function(){return new Matrix},enumerable:!1,configurable:!0}),Object.defineProperty(Matrix,"TEMP_MATRIX",{get:function(){return new Matrix},enumerable:!1,configurable:!0}),Matrix}(),Tt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Et=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],St=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Pt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],wt=[],It=[],At=Math.sign;!function init(){for(var t=0;t<16;t++){var e=[];wt.push(e);for(var r=0;r<16;r++)for(var i=At(Tt[t]*Tt[r]+St[t]*Et[r]),n=At(Et[t]*Tt[r]+Pt[t]*Et[r]),o=At(Tt[t]*St[r]+St[t]*Pt[r]),s=At(Et[t]*St[r]+Pt[t]*Pt[r]),a=0;a<16;a++)if(Tt[a]===i&&Et[a]===n&&St[a]===o&&Pt[a]===s){e.push(a);break}}for(t=0;t<16;t++){var u=new bt;u.set(Tt[t],Et[t],St[t],Pt[t],0,0),It.push(u)}}();var Ot={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Tt[t]},uY:function(t){return Et[t]},vX:function(t){return St[t]},vY:function(t){return Pt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return wt[t][e]},sub:function(t,e){return wt[t][Ot.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?Ot.S:Ot.N:2*Math.abs(e)<=Math.abs(t)?t>0?Ot.E:Ot.W:e>0?t>0?Ot.SE:Ot.SW:t>0?Ot.NE:Ot.NW},matrixAppendRotationInv:function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=It[Ot.inv(e)];n.tx=r,n.ty=i,t.append(n)}},Rt=function(){function Transform(){this.worldTransform=new bt,this.localTransform=new bt,this.position=new xt(this.onChange,this,0,0),this.scale=new xt(this.onChange,this,1,1),this.pivot=new xt(this.onChange,this,0,0),this.skew=new xt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return Transform.prototype.onChange=function(){this._localID++},Transform.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},Transform.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},Transform.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},Transform.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(Transform.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),Transform.IDENTITY=new Transform,Transform}();V.SORTABLE_CHILDREN=!1;var Mt=function(){function Bounds(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return Bounds.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Bounds.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Bounds.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?ft.EMPTY:((t=t||new ft(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},Bounds.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},Bounds.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,i=o>i?o:i,n=s>n?s:n,e=(o=t[2])<e?o:e,r=(s=t[3])<r?s:r,i=o>i?o:i,n=s>n?s:n,e=(o=t[4])<e?o:e,r=(s=t[5])<r?s:r,i=o>i?o:i,n=s>n?s:n,e=(o=t[6])<e?o:e,r=(s=t[7])<r?s:r,i=o>i?o:i,n=s>n?s:n,this.minX=e,this.minY=r,this.maxX=i,this.maxY=n},Bounds.prototype.addFrame=function(t,e,r,i,n){this.addFrameMatrix(t.worldTransform,e,r,i,n)},Bounds.prototype.addFrameMatrix=function(t,e,r,i,n){var o=t.a,s=t.b,a=t.c,u=t.d,h=t.tx,c=t.ty,l=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=o*e+a*r+h,y=s*e+u*r+c;l=m<l?m:l,d=y<d?y:d,p=m>p?m:p,f=y>f?y:f,l=(m=o*i+a*r+h)<l?m:l,d=(y=s*i+u*r+c)<d?y:d,p=m>p?m:p,f=y>f?y:f,l=(m=o*e+a*n+h)<l?m:l,d=(y=s*e+u*n+c)<d?y:d,p=m>p?m:p,f=y>f?y:f,l=(m=o*i+a*n+h)<l?m:l,d=(y=s*i+u*n+c)<d?y:d,p=m>p?m:p,f=y>f?y:f,this.minX=l,this.minY=d,this.maxX=p,this.maxY=f},Bounds.prototype.addVertexData=function(t,e,r){for(var i=this.minX,n=this.minY,o=this.maxX,s=this.maxY,a=e;a<r;a+=2){var u=t[a],h=t[a+1];i=u<i?u:i,n=h<n?h:n,o=u>o?u:o,s=h>s?h:s}this.minX=i,this.minY=n,this.maxX=o,this.maxY=s},Bounds.prototype.addVertices=function(t,e,r,i){this.addVerticesMatrix(t.worldTransform,e,r,i)},Bounds.prototype.addVerticesMatrix=function(t,e,r,i,n,o){void 0===n&&(n=0),void 0===o&&(o=n);for(var s=t.a,a=t.b,u=t.c,h=t.d,c=t.tx,l=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,y=r;y<i;y+=2){var g=e[y],v=e[y+1],_=s*g+u*v+c,x=h*v+a*g+l;d=Math.min(d,_-n),f=Math.max(f,_+n),p=Math.min(p,x-o),m=Math.max(m,x+o)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},Bounds.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},Bounds.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=n&&i<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=i<a?i:a,this.maxX=n>u?n:u,this.maxY=o>h?o:h}},Bounds.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},Bounds.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=n&&i<=o){var s=this.minX,a=this.minY,u=this.maxX,h=this.maxY;this.minX=r<s?r:s,this.minY=i<a?i:a,this.maxX=n>u?n:u,this.maxY=o>h?o:h}},Bounds.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},Bounds.prototype.addFramePad=function(t,e,r,i,n,o){t-=n,e-=o,r+=n,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>i?this.maxY:i},Bounds}(),extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function __extends(t,e){function __(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var Ct=function(t){function DisplayObject(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Rt,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Mt,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return __extends(DisplayObject,t),DisplayObject.mixin=function(t){for(var e=Object.keys(t),r=0;r<e.length;++r){var i=e[r];Object.defineProperty(DisplayObject.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},DisplayObject.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},DisplayObject.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},DisplayObject.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new ft),e=this._boundsRect),this._bounds.getRectangle(e)},DisplayObject.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new ft),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Mt);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var i=this._bounds,n=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=i,this._bounds.updateID+=this._boundsID-n,o},DisplayObject.prototype.toGlobal=function(t,e,r){return void 0===r&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},DisplayObject.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},DisplayObject.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},DisplayObject.prototype.setTransform=function(t,e,r,i,n,o,s,a,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},DisplayObject.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(DisplayObject.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Dt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),DisplayObject.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},DisplayObject.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"angle",{get:function(){return this.transform.rotation*dt},set:function(t){this.transform.rotation=t*pt},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1);(this._mask=t,this._mask)&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),DisplayObject}(W.a),Dt=function(t){function TemporaryDisplayObject(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return __extends(TemporaryDisplayObject,t),TemporaryDisplayObject}(Ct);function sortChildren(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Ct.prototype.displayObjectUpdateTransform=Ct.prototype.updateTransform;var Lt=function(t){function Container(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=V.SORTABLE_CHILDREN,e.sortDirty=!1,e}return __extends(Container,t),Container.prototype.onChildrenChange=function(t){},Container.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length>1)for(var i=0;i<e.length;i++)this.addChild(e[i]);else{var n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},Container.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},Container.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i)}},Container.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},Container.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);removeItems(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},Container.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},Container.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length>1)for(var i=0;i<e.length;i++)this.removeChild(e[i]);else{var n=e[0],o=this.children.indexOf(n);if(-1===o)return null;n.parent=null,n.transform._parentID=-1,removeItems(this.children,o,1),this._boundsID++,this.onChildrenChange(o),n.emit("removed",this),this.emit("childRemoved",n,this,o)}return e[0]},Container.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},Container.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var r,i=t,n=e-i;if(n>0&&n<=e){r=this.children.splice(i,n);for(var o=0;o<r.length;++o)r[o].parent=null,r[o].transform&&(r[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(o=0;o<r.length;++o)r[o].emit("removed",this),this.emit("childRemoved",r[o],this,o);return r}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},Container.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var i=this.children[e];i._lastSortedIndex=e,t||0===i.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},Container.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},Container.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var r=e._mask.maskObject||e._mask;r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},Container.prototype.getLocalBounds=function(e,r){void 0===r&&(r=!1);var i=t.prototype.getLocalBounds.call(this,e);if(!r)for(var n=0,o=this.children.length;n<o;++n){var s=this.children[n];s.visible&&s.updateTransform()}return i},Container.prototype._calculateBounds=function(){},Container.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},Container.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var i=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}r&&t.mask.push(this,this._mask),this._render(t);i=0;for(var n=this.children.length;i<n;i++)this.children[i].render(t);t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},Container.prototype._render=function(t){},Container.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"==typeof e?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(r)for(var n=0;n<i.length;++n)i[n].destroy(e)},Object.defineProperty(Container.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Container.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),Container}(Ct);Lt.prototype.containerUpdateTransform=Lt.prototype.updateTransform;var Ft={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ct.mixin(Ft);var Nt,Bt=function(){function AccessibilityManager(t){this._hookDiv=null,(I.tablet||I.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(AccessibilityManager.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(AccessibilityManager.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),AccessibilityManager.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},AccessibilityManager.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},AccessibilityManager.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},AccessibilityManager.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},AccessibilityManager.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},AccessibilityManager.prototype.update=function(){var t=performance.now();if(!(I.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),r=this.renderer.resolution,i=e.width/this.renderer.width*r,n=e.height/this.renderer.height*r,o=this.div;o.style.left=e.left+"px",o.style.top=e.top+"px",o.style.width=this.renderer.width+"px",o.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var a=this.children[s];if(a.renderId!==this.renderId)a._accessibleActive=!1,removeItems(this.children,s,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,s--;else{o=a._accessibleDiv;var u=a.hitArea,h=a.worldTransform;a.hitArea?(o.style.left=(h.tx+u.x*h.a)*i+"px",o.style.top=(h.ty+u.y*h.d)*n+"px",o.style.width=u.width*h.a*i+"px",o.style.height=u.height*h.d*n+"px"):(u=a.getBounds(),this.capHitArea(u),o.style.left=u.x*i+"px",o.style.top=u.y*n+"px",o.style.width=u.width*i+"px",o.style.height=u.height*n+"px",o.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(o.title=a.accessibleTitle),o.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&o.setAttribute("aria-label",a.accessibleHint)),a.accessibleTitle===o.title&&a.tabIndex===o.tabIndex||(o.title=a.accessibleTitle,o.tabIndex=a.tabIndex,this.debug&&this.updateDebugHTML(o))}}this.renderId++}},AccessibilityManager.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},AccessibilityManager.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},AccessibilityManager.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},AccessibilityManager.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},AccessibilityManager.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},AccessibilityManager.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},AccessibilityManager.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},AccessibilityManager.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},AccessibilityManager.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},AccessibilityManager}();V.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(Nt||(Nt={}));var Ut=function(){function TickerListener(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=0),void 0===i&&(i=!1),this.fn=t,this.context=e,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return TickerListener.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},TickerListener.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},TickerListener.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},TickerListener.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},TickerListener}(),kt=function(){function Ticker(){var t=this;this._head=new Ut(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/V.TARGET_FPMS,this.elapsedMS=1/V.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return Ticker.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},Ticker.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},Ticker.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},Ticker.prototype.add=function(t,e,r){return void 0===r&&(r=Nt.NORMAL),this._addListener(new Ut(t,e,r))},Ticker.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Nt.NORMAL),this._addListener(new Ut(t,e,r,!0))},Ticker.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},Ticker.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(Ticker.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),Ticker.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},Ticker.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},Ticker.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},Ticker.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*V.TARGET_FPMS;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(Ticker.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,V.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker,"shared",{get:function(){if(!Ticker._shared){var t=Ticker._shared=new Ticker;t.autoStart=!0,t._protected=!0}return Ticker._shared},enumerable:!1,configurable:!0}),Object.defineProperty(Ticker,"system",{get:function(){if(!Ticker._system){var t=Ticker._system=new Ticker;t.autoStart=!0,t._protected=!0}return Ticker._system},enumerable:!1,configurable:!0}),Ticker}(),Gt=function(){function TickerPlugin(){}return TickerPlugin.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Nt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?kt.shared:new kt,t.autoStart&&this.start()},TickerPlugin.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},TickerPlugin}(),jt=function(){function InteractionData(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new _t,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(InteractionData.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),InteractionData.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},InteractionData.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},InteractionData.prototype.reset=function(){this.isPrimary=!1},InteractionData}(),interaction_es_extendStatics=function(t,e){return(interaction_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Xt=function(){function InteractionEvent(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return InteractionEvent.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},InteractionEvent.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},InteractionEvent}(),Ht=function(){function InteractionTrackingData(t){this._pointerId=t,this._flags=InteractionTrackingData.FLAGS.NONE}return InteractionTrackingData.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(InteractionTrackingData.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"none",{get:function(){return this._flags===InteractionTrackingData.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"over",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.OVER)},set:function(t){this._doSet(InteractionTrackingData.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"rightDown",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(InteractionTrackingData.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionTrackingData.prototype,"leftDown",{get:function(){return 0!=(this._flags&InteractionTrackingData.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(InteractionTrackingData.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),InteractionTrackingData.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),InteractionTrackingData}(),zt=function(){function TreeSearch(){this._tempPoint=new _t}return TreeSearch.prototype.recursiveFindHit=function(t,e,r,i,n){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=n=e.interactive||n,u=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(i=!1,u=!1)),a=!1):e._mask&&i&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(i=!1)),u&&e.interactiveChildren&&e.children)for(var h=e.children,c=h.length-1;c>=0;c--){var l=h[c],d=this.recursiveFindHit(t,l,r,i,a);if(d){if(!l.parent)continue;a=!1,d&&(t.target&&(i=!1),s=!0)}}return n&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s))),s},TreeSearch.prototype.findHit=function(t,e,r,i){this.recursiveFindHit(t,e,r,i,!1)},TreeSearch}(),Vt={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Ct.mixin(Vt);var Yt={target:null,data:{global:null}},Wt=function(t){function InteractionManager(e,r){var i=t.call(this)||this;return r=r||{},i.renderer=e,i.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new jt,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new Xt,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new zt,i._tempDisplayObject=new Dt,i._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return function interaction_es_extends(t,e){function __(){this.constructor=t}interaction_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(InteractionManager,t),Object.defineProperty(InteractionManager.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(InteractionManager.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),InteractionManager.prototype.hitTest=function(t,e){return Yt.target=null,Yt.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(Yt,e,null,!0),Yt.target},InteractionManager.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},InteractionManager.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(kt.system.add(this.tickerUpdate,this,Nt.INTERACTION),this.tickerAdded=!0)},InteractionManager.prototype.removeTickerListener=function(){this.tickerAdded&&(kt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},InteractionManager.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},InteractionManager.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},InteractionManager.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},InteractionManager.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},InteractionManager.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},InteractionManager.prototype.dispatchEvent=function(t,e,r){r.stopPropagationHint&&t!==r.stopsPropagatingAt||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},InteractionManager.prototype.delayDispatchEvent=function(t,e,r){this.delayedEvents.push({displayObject:t,eventString:e,eventData:r})},InteractionManager.prototype.mapPositionToPoint=function(t,e,r){var i;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*n,t.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n},InteractionManager.prototype.processInteractive=function(t,e,r,i){var n=this.search.findHit(t,e,r,i),o=this.delayedEvents;if(!o.length)return n;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var u=o[a],h=u.displayObject,c=u.eventString,l=u.eventData;l.stopsPropagatingAt===h&&(l.stopPropagationHint=!0),this.dispatchEvent(h,c,l)}return n},InteractionManager.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var r=e.length,i=0;i<r;i++){var n=e[i],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},InteractionManager.prototype.processPointerDown=function(t,e,r){var i=t.data,n=t.data.identifier;if(r)if(e.trackedPointers[n]||(e.trackedPointers[n]=new Ht(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},InteractionManager.prototype.onPointerComplete=function(t,e,r){for(var i=this.normalizeToPointerData(t),n=i.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=i[s],u=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,h),"mouse"===a.pointerType||"pen"===a.pointerType){var c=2===a.button;this.emit(c?"rightup"+o:"mouseup"+o,h)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,h),this.releaseInteractionDataForPointerId(a.pointerId))}},InteractionManager.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},InteractionManager.prototype.processPointerCancel=function(t,e){var r=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},InteractionManager.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},InteractionManager.prototype.processPointerUp=function(t,e,r){var i=t.data,n=t.data.identifier,o=e.trackedPointers[n],s="touch"===i.pointerType,a="mouse"===i.pointerType||"pen"===i.pointerType,u=!1;if(a){var h=2===i.button,c=Ht.FLAGS,l=h?c.RIGHT_DOWN:c.LEFT_DOWN,d=void 0!==o&&o.flags&l;r?(this.dispatchEvent(e,h?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,h?"rightclick":"click",t),u=!0)):d&&this.dispatchEvent(e,h?"rightupoutside":"mouseupoutside",t),o&&(h?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!u||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},InteractionManager.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var r=e.length,i=0;i<r;i++){var n=e[i],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},InteractionManager.prototype.processPointerMove=function(t,e,r){var i=t.data,n="touch"===i.pointerType,o="mouse"===i.pointerType||"pen"===i.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},InteractionManager.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);i.data.originalEvent=e,this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(r.identifier)}},InteractionManager.prototype.processPointerOverOut=function(t,e,r){var i=t.data,n=t.data.identifier,o="mouse"===i.pointerType||"pen"===i.pointerType,s=e.trackedPointers[n];r&&!s&&(s=e.trackedPointers[n]=new Ht(n)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},InteractionManager.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);i.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},InteractionManager.prototype.getInteractionDataForPointerId=function(t){var e,r=t.pointerId;return 1===r||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[r]?e=this.activeInteractionData[r]:((e=this.interactionDataPool.pop()||new jt).identifier=r,this.activeInteractionData[r]=e),e.copyEvent(t),e},InteractionManager.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},InteractionManager.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},InteractionManager.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,i=t.changedTouches.length;r<i;r++){var n=t.changedTouches[r];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else if(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent)e.push(t);else{var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},InteractionManager.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},InteractionManager}(W.a),qt=function(){function Runner(t){this.items=[],this._name=t,this._aliasCount=0}return Runner.prototype.emit=function(t,e,r,i,n,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var u=this,h=u.name,c=u.items;this._aliasCount++;for(var l=0,d=c.length;l<d;l++)c[l][h](t,e,r,i,n,o,s,a);return c===this.items&&this._aliasCount--,this},Runner.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},Runner.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},Runner.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},Runner.prototype.contains=function(t){return-1!==this.items.indexOf(t)},Runner.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},Runner.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(Runner.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(Runner.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Runner}();Object.defineProperties(qt.prototype,{dispatch:{value:qt.prototype.emit},run:{value:qt.prototype.emit}}),V.PREFER_ENV=I.any?A.WEBGL:A.WEBGL2,V.STRICT_TEXTURE_CACHE=!1;var Zt=[];function autoDetectResource(t,e){if(!t)return null;var r="";if("string"==typeof t){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(var n=Zt.length-1;n>=0;--n){var o=Zt[n];if(o.test&&o.test(t,r))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var core_es_extendStatics=function(t,e){return(core_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function core_es_extends(t,e){function __(){this.constructor=t}core_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var Kt=function(){function Resource(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new qt("setRealSize"),this.onUpdate=new qt("update"),this.onError=new qt("onError")}return Resource.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},Resource.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},Resource.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(Resource.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),Resource.prototype.update=function(){this.destroyed||this.onUpdate.emit()},Resource.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(Resource.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(Resource.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Resource.prototype.style=function(t,e,r){return!1},Resource.prototype.dispose=function(){},Resource.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Resource.test=function(t,e){return!1},Resource}(),Qt=function(t){function BufferResource(e,r){var i=this,n=r||{},o=n.width,s=n.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(i=t.call(this,o,s)||this).data=e,i}return core_es_extends(BufferResource,t),BufferResource.prototype.upload=function(t,e,r){var i=t.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===k.UNPACK),r.width===e.width&&r.height===e.height?i.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,i.texImage2D(e.target,0,r.internalFormat,e.width,e.height,0,e.format,r.type,this.data)),!0},BufferResource.prototype.dispose=function(){this.data=null},BufferResource.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},BufferResource}(Kt),Jt={scaleMode:N.NEAREST,format:D.RGBA,alphaMode:k.NPM},$t=function(t){function BaseTexture(e,r){void 0===e&&(e=null),void 0===r&&(r=null);var i=t.call(this)||this,n=(r=r||{}).alphaMode,o=r.mipmap,s=r.anisotropicLevel,a=r.scaleMode,u=r.width,h=r.height,c=r.wrapMode,l=r.format,d=r.type,p=r.target,f=r.resolution,m=r.resourceOptions;return!e||e instanceof Kt||((e=autoDetectResource(e,m)).internal=!0),i.width=u||0,i.height=h||0,i.resolution=f||V.RESOLUTION,i.mipmap=void 0!==o?o:V.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==s?s:V.ANISOTROPIC_LEVEL,i.wrapMode=c||V.WRAP_MODE,i.scaleMode=void 0!==a?a:V.SCALE_MODE,i.format=l||D.RGBA,i.type=d||F.UNSIGNED_BYTE,i.target=p||L.TEXTURE_2D,i.alphaMode=void 0!==n?n:k.UNPACK,void 0!==r.premultiplyAlpha&&(i.premultiplyAlpha=r.premultiplyAlpha),i.uid=uid(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=u>0&&h>0,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(e),i}return core_es_extends(BaseTexture,t),Object.defineProperty(BaseTexture.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(BaseTexture.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),BaseTexture.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},BaseTexture.prototype.setSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},BaseTexture.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},BaseTexture.prototype._refreshPOT=function(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},BaseTexture.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},BaseTexture.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},BaseTexture.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},BaseTexture.prototype.onError=function(t){this.emit("error",this,t)},BaseTexture.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete st[this.cacheId],delete ot[this.cacheId],this.cacheId=null),this.dispose(),BaseTexture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},BaseTexture.prototype.dispose=function(){this.emit("dispose",this)},BaseTexture.prototype.castToBaseTexture=function(){return this},BaseTexture.from=function(t,e,r){void 0===r&&(r=V.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null;i?n=t:(t._pixiId||(t._pixiId="pixiid_"+uid()),n=t._pixiId);var o=st[n];if(i&&r&&!o)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return o||((o=new BaseTexture(t,e)).cacheId=n,BaseTexture.addToCache(o,n)),o},BaseTexture.fromBuffer=function(t,e,r,i){t=t||new Float32Array(e*r*4);var n=new Qt(t,{width:e,height:r}),o=t instanceof Float32Array?F.FLOAT:F.UNSIGNED_BYTE;return new BaseTexture(n,Object.assign(Jt,i||{width:e,height:r,type:o}))},BaseTexture.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),st[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),st[e]=t)},BaseTexture.removeFromCache=function(t){if("string"==typeof t){var e=st[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete st[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete st[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},BaseTexture._globalBatch=0,BaseTexture}(W.a),te=function(t){function AbstractMultiResource(e,r){var i=this,n=r||{},o=n.width,s=n.height;(i=t.call(this,o,s)||this).items=[],i.itemDirtyIds=[];for(var a=0;a<e;a++){var u=new $t;i.items.push(u),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return core_es_extends(AbstractMultiResource,t),AbstractMultiResource.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof Kt?this.addResourceAt(t[r],r):this.addResourceAt(autoDetectResource(t[r],e),r))},AbstractMultiResource.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},AbstractMultiResource.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},AbstractMultiResource.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)},AbstractMultiResource.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)},AbstractMultiResource.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],r=e.realWidth,i=e.realHeight;return t.resize(r,i),Promise.resolve(t)})),this._load},AbstractMultiResource}(Kt),ee=function(t){function ArrayResource(e,r){var i,n,o=this,s=r||{},a=s.width,u=s.height;return Array.isArray(e)?(i=e,n=e.length):n=e,o=t.call(this,n,{width:a,height:u})||this,i&&o.initFromArray(i,r),o}return core_es_extends(ArrayResource,t),ArrayResource.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},ArrayResource.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=L.TEXTURE_2D_ARRAY},ArrayResource.prototype.upload=function(t,e,r){var i=this,n=i.length,o=i.itemDirtyIds,s=i.items,a=t.gl;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,n,0,e.format,e.type,null);for(var u=0;u<n;u++){var h=s[u];o[u]<h.dirtyId&&(o[u]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,u,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},ArrayResource}(te),re=function(t){function BaseImageResource(e){var r=this,i=e,n=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return(r=t.call(this,n,o)||this).source=e,r.noSubImage=!1,r}return core_es_extends(BaseImageResource,t),BaseImageResource.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=determineCrossOrigin(e):!1!==r&&(t.crossOrigin="string"==typeof r?r:"anonymous")},BaseImageResource.prototype.upload=function(t,e,r,i){var n=t.gl,o=e.realWidth,s=e.realHeight;return i=i||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===k.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||r.width!==o||r.height!==s?(r.width=o,r.height=s,n.texImage2D(e.target,0,e.format,e.format,e.type,i)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,i),!0},BaseImageResource.prototype.update=function(){if(!this.destroyed){var e=this.source,r=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(r,i),t.prototype.update.call(this)}},BaseImageResource.prototype.dispose=function(){this.source=null},BaseImageResource}(Kt),ie=function(t){function CanvasResource(){return null!==t&&t.apply(this,arguments)||this}return core_es_extends(CanvasResource,t),CanvasResource.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},CanvasResource}(re),ne=function(t){function CubeResource(e,r){var i=this,n=r||{},o=n.width,s=n.height,a=n.autoLoad,u=n.linkBaseTexture;if(e&&e.length!==CubeResource.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");i=t.call(this,6,{width:o,height:s})||this;for(var h=0;h<CubeResource.SIDES;h++)i.items[h].target=L.TEXTURE_CUBE_MAP_POSITIVE_X+h;return i.linkBaseTexture=!1!==u,e&&i.initFromArray(e,r),!1!==a&&i.load(),i}return core_es_extends(CubeResource,t),CubeResource.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=L.TEXTURE_CUBE_MAP},CubeResource.prototype.addBaseTextureAt=function(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=L.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},CubeResource.prototype.upload=function(t,e,r){for(var i=this.itemDirtyIds,n=0;n<CubeResource.SIDES;n++){var o=this.items[n];i[n]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,r),i[n]=o.dirtyId):i[n]<-1&&(t.gl.texImage2D(o.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),i[n]=-1))}return!0},CubeResource.test=function(t){return Array.isArray(t)&&t.length===CubeResource.SIDES},CubeResource.SIDES=6,CubeResource}(te),oe=function(t){function ImageResource(e,r){var i=this;if(r=r||{},!(e instanceof HTMLImageElement)){var n=new Image;re.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==r.createBitmap?r.createBitmap:V.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,i.alphaMode="number"==typeof r.alphaMode?r.alphaMode:null,void 0!==r.premultiplyAlpha&&(i.premultiplyAlpha=r.premultiplyAlpha),i.bitmap=null,i._load=null,!1!==r.autoLoad&&i.load(),i}return core_es_extends(ImageResource,t),ImageResource.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,r){var i=e.source;e.url=i.src;var completed=function(){e.destroyed||(i.onload=null,i.onerror=null,e.resize(i.width,i.height),e._load=null,e.createBitmap?t(e.process()):t(e))};i.complete&&i.src?completed():(i.onload=completed,i.onerror=function(t){r(t),e.onError.emit(t)})}))),this._load},ImageResource.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===k.UNPACK?"premultiply":"none"}).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process):Promise.resolve(this)},ImageResource.prototype.upload=function(e,r,i){if("number"==typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,r,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,r,i,this.bitmap),!this.preserveBitmap){var n=!0,o=r._glTextures;for(var s in o){var a=o[s];if(a!==i&&a.dirtyId!==r.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},ImageResource.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},ImageResource.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},ImageResource}(re),se=function(t){function SVGResource(e,r){var i=this;return r=r||{},(i=t.call(this,document.createElement("canvas"))||this)._width=0,i._height=0,i.svg=e,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,!1!==r.autoLoad&&i.load(),i}return core_es_extends(SVGResource,t),SVGResource.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},SVGResource.prototype._loadSvg=function(){var t=this,e=new Image;re.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(r){t._resolve&&(e.onerror=null,t.onError.emit(r))},e.onload=function(){if(t._resolve){var r=e.width,i=e.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=r*t.scale,o=i*t.scale;(t._overrideWidth||t._overrideHeight)&&(n=t._overrideWidth||t._overrideHeight/i*r,o=t._overrideHeight||t._overrideWidth/r*i),n=Math.round(n),o=Math.round(o);var s=t.source;s.width=n,s.height=o,s._pixiId="canvas_"+uid(),s.getContext("2d").drawImage(e,0,0,r,i,0,0,n,o),t._resolve(),t._resolve=null}}},SVGResource.getSize=function(t){var e=SVGResource.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r},SVGResource.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},SVGResource.test=function(t,e){return"svg"===e||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,SVGResource}(re),ae=function(t){function VideoResource(e,r){var i=this;if(r=r||{},!(e instanceof HTMLVideoElement)){var n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"==typeof e&&(e=[e]);var o=e[0].src||e[0];re.crossOrigin(n,o,r.crossorigin);for(var s=0;s<e.length;++s){var a=document.createElement("source"),u=e[s],h=u.src,c=u.mime,l=(h=h||e[s]).split("?").shift().toLowerCase(),d=l.substr(l.lastIndexOf(".")+1);c=c||VideoResource.MIME_TYPES[d]||"video/"+d,a.src=h,a.type=c,n.appendChild(a)}e=n}return(i=t.call(this,e)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return core_es_extends(VideoResource,t),VideoResource.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var r=kt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},VideoResource.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(r){t.valid?r(t):(t._resolve=r,e.load())})),this._load},VideoResource.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},VideoResource.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},VideoResource.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},VideoResource.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(kt.shared.add(this.update,this),this._isConnectedToTicker=!0)},VideoResource.prototype._onPlayStop=function(){this._isConnectedToTicker&&(kt.shared.remove(this.update,this),this._isConnectedToTicker=!1)},VideoResource.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},VideoResource.prototype.dispose=function(){this._isConnectedToTicker&&kt.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(VideoResource.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(kt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(kt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(VideoResource.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),VideoResource.test=function(t,e){return t instanceof HTMLVideoElement||VideoResource.TYPES.indexOf(e)>-1},VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},VideoResource}(re),ue=function(t){function ImageBitmapResource(){return null!==t&&t.apply(this,arguments)||this}return core_es_extends(ImageBitmapResource,t),ImageBitmapResource.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},ImageBitmapResource}(re);Zt.push(oe,ue,ie,ae,se,Qt,ne,ee);var he={Resource:Kt,BaseImageResource:re,INSTALLED:Zt,autoDetectResource:autoDetectResource,AbstractMultiResource:te,ArrayResource:ee,BufferResource:Qt,CanvasResource:ie,CubeResource:ne,ImageResource:oe,SVGResource:se,VideoResource:ae,ImageBitmapResource:ue},ce=function(){function System(t){this.renderer=t}return System.prototype.destroy=function(){this.renderer=null},System}(),le=function(t){function DepthResource(){return null!==t&&t.apply(this,arguments)||this}return core_es_extends(DepthResource,t),DepthResource.prototype.upload=function(t,e,r){var i=t.gl;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===k.UNPACK),r.width===e.width&&r.height===e.height?i.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(r.width=e.width,r.height=e.height,i.texImage2D(e.target,0,1===t.context.webGLVersion?i.DEPTH_COMPONENT:i.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},DepthResource}(Qt),de=function(){function Framebuffer(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new qt("disposeFramebuffer"),this.multisample=z.NONE}return Object.defineProperty(Framebuffer.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),Framebuffer.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new $t(null,{scaleMode:N.NEAREST,resolution:1,mipmap:U.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.addDepthTexture=function(t){return this.depthTexture=t||new $t(new le(null,{width:this.width,height:this.height}),{scaleMode:N.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:U.OFF,format:D.DEPTH_COMPONENT,type:F.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Framebuffer.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var i=this.colorTextures[r],n=i.resolution;i.setSize(t/n,e/n)}if(this.depthTexture){n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,e/n)}}},Framebuffer.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Framebuffer.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},Framebuffer}(),pe=function(t){function BaseRenderTexture(e){var r=this;if("number"==typeof e){var i=arguments[0],n=arguments[1],o=arguments[2],s=arguments[3];e={width:i,height:n,scaleMode:o,resolution:s}}r=t.call(this,null,e)||this;var a=e||{},u=a.width,h=a.height;return r.mipmap=0,r.width=Math.ceil(u)||100,r.height=Math.ceil(h)||100,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new de(r.width*r.resolution,r.height*r.resolution).addColorTexture(0,r),r.maskStack=[],r.filterStack=[{}],r}return core_es_extends(BaseRenderTexture,t),BaseRenderTexture.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},BaseRenderTexture.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},BaseRenderTexture.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},BaseRenderTexture}($t),fe=function(){function TextureUvs(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return TextureUvs.prototype.set=function(t,e,r){var i=e.width,n=e.height;if(r){var o=t.width/2/i,s=t.height/2/n,a=t.x/i+o,u=t.y/n+s;r=Ot.add(r,Ot.NW),this.x0=a+o*Ot.uX(r),this.y0=u+s*Ot.uY(r),r=Ot.add(r,2),this.x1=a+o*Ot.uX(r),this.y1=u+s*Ot.uY(r),r=Ot.add(r,2),this.x2=a+o*Ot.uX(r),this.y2=u+s*Ot.uY(r),r=Ot.add(r,2),this.x3=a+o*Ot.uX(r),this.y3=u+s*Ot.uY(r)}else this.x0=t.x/i,this.y0=t.y/n,this.x1=(t.x+t.width)/i,this.y1=t.y/n,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/n,this.x3=t.x/i,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},TextureUvs}(),me=new fe,ye=function(t){function Texture(e,r,i,n,o,s){var a=t.call(this)||this;if(a.noFrame=!1,r||(a.noFrame=!0,r=new ft(0,0,1,1)),e instanceof Texture&&(e=e.baseTexture),a.baseTexture=e,a._frame=r,a.trim=n,a.valid=!1,a._uvs=me,a.uvMatrix=null,a.orig=i||r,a._rotate=Number(o||0),!0===o)a._rotate=2;else if(a._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return a.defaultAnchor=s?new _t(s.x,s.y):new _t(0,0),a._updateID=0,a.textureCacheIds=[],e.valid?a.noFrame?e.valid&&a.onBaseTextureUpdated(e):a.frame=r:e.once("loaded",a.onBaseTextureUpdated,a),a.noFrame&&e.on("update",a.onBaseTextureUpdated,a),a}return core_es_extends(Texture,t),Texture.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},Texture.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},Texture.prototype.destroy=function(t){if(this.baseTexture){if(t){var e=this.baseTexture;e&&e.url&&ot[e.url]&&Texture.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null},Texture.prototype.clone=function(){return new Texture(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},Texture.prototype.updateUvs=function(){this._uvs===me&&(this._uvs=new fe),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},Texture.from=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=V.STRICT_TEXTURE_CACHE);var i="string"==typeof t,n=null;i?n=t:(t._pixiId||(t._pixiId="pixiid_"+uid()),n=t._pixiId);var o=ot[n];if(i&&r&&!o)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return o||(e.resolution||(e.resolution=getResolutionOfUrl(t)),(o=new Texture(new $t(t,e))).baseTexture.cacheId=n,$t.addToCache(o.baseTexture,n),Texture.addToCache(o,n)),o},Texture.fromURL=function(t,e){var r=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),i=Texture.from(t,Object.assign({resourceOptions:r},e),!1),n=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):n.load().then((function(){return Promise.resolve(i)}))},Texture.fromBuffer=function(t,e,r,i){return new Texture($t.fromBuffer(t,e,r,i))},Texture.fromLoader=function(t,e,r){var i=new oe(t);i.url=e;var n=new Texture(new $t(i,{scaleMode:V.SCALE_MODE,resolution:getResolutionOfUrl(e)}));return r||(r=e),$t.addToCache(n.baseTexture,r),Texture.addToCache(n,r),r!==e&&($t.addToCache(n.baseTexture,e),Texture.addToCache(n,e)),n},Texture.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),ot[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),ot[e]=t)},Texture.removeFromCache=function(t){if("string"==typeof t){var e=ot[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete ot[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)ot[t.textureCacheIds[i]]===t&&delete ot[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(Texture.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,o=e+i>this.baseTexture.width,s=r+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,h="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+h)}this.valid=i&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(Texture.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),Texture.prototype.castToBaseTexture=function(){return this.baseTexture},Texture}(W.a);function removeAllHandlers(t){t.destroy=function _emptyDestroy(){},t.on=function _emptyOn(){},t.once=function _emptyOnce(){},t.emit=function _emptyEmit(){}}ye.EMPTY=new ye(new $t),removeAllHandlers(ye.EMPTY),removeAllHandlers(ye.EMPTY.baseTexture),ye.WHITE=function createWhiteTexture(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new ye(new $t(new ie(t)))}(),removeAllHandlers(ye.WHITE),removeAllHandlers(ye.WHITE.baseTexture);var ge=function(t){function RenderTexture(e,r){var i=this,n=null;if(!(e instanceof pe)){var o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+s+") instead of the ctor directly."),n=arguments[0],r=null,e=new pe({width:o,height:s,scaleMode:a,resolution:u})}return(i=t.call(this,e,r)||this).legacyRenderer=n,i.valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return core_es_extends(RenderTexture,t),Object.defineProperty(RenderTexture.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),RenderTexture.prototype.resize=function(t,e,r){void 0===r&&(r=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r&&this.baseTexture.resize(t,e),this.updateUvs()},RenderTexture.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},RenderTexture.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new RenderTexture(new pe(t))},RenderTexture}(ye),ve=function(){function RenderTexturePool(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return RenderTexturePool.prototype.createTexture=function(t,e){var r=new pe(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new ge(r)},RenderTexturePool.prototype.getOptimalTexture=function(t,e,r){void 0===r&&(r=1);var i=RenderTexturePool.SCREEN_KEY;t*=r,e*=r,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(i=(65535&(t=nextPow2(t)))<<16|65535&(e=nextPow2(e))),this.texturePool[i]||(this.texturePool[i]=[]);var n=this.texturePool[i].pop();return n||(n=this.createTexture(t,e)),n.filterPoolKey=i,n.setResolution(r),n},RenderTexturePool.prototype.getFilterTexture=function(t,e){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},RenderTexturePool.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},RenderTexturePool.prototype.returnFilterTexture=function(t){this.returnTexture(t)},RenderTexturePool.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}},RenderTexturePool.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=RenderTexturePool.SCREEN_KEY,r=this.texturePool[e];if(this.enableFullScreen=t.width>0&&t.height>0,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},RenderTexturePool.SCREEN_KEY="screen",RenderTexturePool}(),_e=function(){function Attribute(t,e,r,i,n,o,s){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===i&&(i=5126),this.buffer=t,this.size=e,this.normalized=r,this.type=i,this.stride=n,this.start=o,this.instance=s}return Attribute.prototype.destroy=function(){this.buffer=null},Attribute.from=function(t,e,r,i,n){return new Attribute(t,e,r,i,n)},Attribute}(),xe=0,be=function(){function Buffer(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=xe++,this.disposeRunner=new qt("disposeBuffer")}return Buffer.prototype.update=function(t){this.data=t||this.data,this._updateID++},Buffer.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Buffer.prototype.destroy=function(){this.dispose(),this.data=null},Buffer.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new Buffer(t)},Buffer}();function core_es_getBufferType(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Te={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Ee={5126:4,5123:2,5121:1},Se=0,Pe={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},we=function(){function Geometry(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Se++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new qt("disposeGeometry"),this.refCount=0}return Geometry.prototype.addAttribute=function(t,e,r,i,n,o,s,a){if(void 0===r&&(r=0),void 0===i&&(i=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof be||(e instanceof Array&&(e=new Float32Array(e)),e=new be(e));var u=t.split("|");if(u.length>1){for(var h=0;h<u.length;h++)this.addAttribute(u[h],e,r,i,n);return this}var c=this.buffers.indexOf(e);return-1===c&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new _e(c,r,i,n,o,s,a),this.instanced=this.instanced||a,this},Geometry.prototype.getAttribute=function(t){return this.attributes[t]},Geometry.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Geometry.prototype.addIndex=function(t){return t instanceof be||(t instanceof Array&&(t=new Uint16Array(t)),t=new be(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Geometry.prototype.getIndex=function(){return this.indexBuffer},Geometry.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],i=new be;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),r.push(n.size*Ee[n.type]/4),n.buffer=0}for(i.data=function core_es_interleaveTypedArrays(t,e){for(var r=0,i=0,n={},o=0;o<t.length;o++)i+=e[o],r+=t[o].length;var s=new ArrayBuffer(4*r),a=null,u=0;for(o=0;o<t.length;o++){var h=e[o],c=t[o],l=core_es_getBufferType(c);n[l]||(n[l]=new Te[l](s)),a=n[l];for(var d=0;d<c.length;d++)a[(d/h|0)*i+u+d%h]=c[d];u+=h}return new Float32Array(s)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Geometry.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},Geometry.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Geometry.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Geometry.prototype.clone=function(){for(var t=new Geometry,e=0;e<this.buffers.length;e++)t.buffers[e]=new be(this.buffers[e].data.slice(0));for(var e in this.attributes){var r=this.attributes[e];t.attributes[e]=new _e(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Geometry.merge=function(t){for(var e,r=new Geometry,i=[],n=[],o=[],s=0;s<t.length;s++){e=t[s];for(var a=0;a<e.buffers.length;a++)n[a]=n[a]||0,n[a]+=e.buffers[a].data.length,o[a]=0}for(s=0;s<e.buffers.length;s++)i[s]=new(Pe[core_es_getBufferType(e.buffers[s].data)])(n[s]),r.buffers[s]=new be(i[s]);for(s=0;s<t.length;s++){e=t[s];for(a=0;a<e.buffers.length;a++)i[a].set(e.buffers[a].data,o[a]),o[a]+=e.buffers[a].data.length}if(r.attributes=e.attributes,e.indexBuffer){r.indexBuffer=r.buffers[e.buffers.indexOf(e.indexBuffer)],r.indexBuffer.index=!0;var u=0,h=0,c=0,l=0;for(s=0;s<e.buffers.length;s++)if(e.buffers[s]!==e.indexBuffer){l=s;break}for(var s in e.attributes){var d=e.attributes[s];(0|d.buffer)===l&&(h+=d.size*Ee[d.type]/4)}for(s=0;s<t.length;s++){var p=t[s].indexBuffer.data;for(a=0;a<p.length;a++)r.indexBuffer.data[a+c]+=u;u+=e.buffers[l].data.length/h,c+=p.length}}return r},Geometry}(),Ie=function(t){function Quad(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return core_es_extends(Quad,t),Quad}(we),Ae=function(t){function QuadUv(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new be(e.vertices),e.uvBuffer=new be(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return core_es_extends(QuadUv,t),QuadUv.prototype.map=function(t,e){var r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.invalidate(),this},QuadUv.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},QuadUv}(we),Oe=0,Re=function(){function UniformGroup(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Oe++,this.static=!!e}return UniformGroup.prototype.update=function(){this.dirtyId++},UniformGroup.prototype.add=function(t,e,r){this.uniforms[t]=new UniformGroup(e,r)},UniformGroup.from=function(t,e){return new UniformGroup(t,e)},UniformGroup}(),Me=function(){function FilterState(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new ft,this.destinationFrame=new ft,this.filters=[]}return FilterState.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},FilterState}(),Ce=function(t){function FilterSystem(e){var r=t.call(this,e)||this;return r.defaultFilterStack=[{}],r.texturePool=new ve,r.texturePool.setScreenSize(e.view),r.statePool=[],r.quad=new Ie,r.quadUv=new Ae,r.tempRect=new ft,r.activeState={},r.globalUniforms=new Re({outputFrame:r.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),r.forceClear=!1,r.useMaxPadding=!1,r}return core_es_extends(FilterSystem,t),FilterSystem.prototype.push=function(t,e){for(var r=this.renderer,i=this.defaultFilterStack,n=this.statePool.pop()||new Me,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,u=e[0].legacy,h=1;h<e.length;h++){var c=e[h];o=Math.min(o,c.resolution),s=this.useMaxPadding?Math.max(s,c.padding):s+c.padding,a=a||c.autoFit,u=u||c.legacy}1===i.length&&(this.defaultFilterStack[0].renderTexture=r.renderTexture.current),i.push(n),n.resolution=o,n.legacy=u,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(s),a&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(o),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var l=this.tempRect;l.width=n.sourceFrame.width,l.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,r.renderTexture.bind(n.renderTexture,n.sourceFrame,l),r.renderTexture.clear()},FilterSystem.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var i=this.globalUniforms.uniforms;i.outputFrame=e.sourceFrame,i.resolution=e.resolution;var n=i.inputSize,o=i.inputPixel,s=i.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=n[0]*e.resolution,o[1]=n[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*n[2]-.5*o[2],s[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){var a=i.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,u.renderTexture,G.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var h=e.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,e.resolution);c.filterFrame=h.filterFrame;var l=0;for(l=0;l<r.length-1;++l){r[l].apply(this,h,c,G.CLEAR,e);var d=h;h=c,c=d}r[l].apply(this,h,u.renderTexture,G.BLEND,e),this.returnFilterTexture(h),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},FilterSystem.prototype.bindAndClear=function(t,e){if(void 0===e&&(e=G.CLEAR),t&&t.filterFrame){var r=this.tempRect;r.width=t.filterFrame.width,r.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,r)}else this.renderer.renderTexture.bind(t);"boolean"==typeof e&&(e=e?G.CLEAR:G.BLEND,deprecation("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===G.CLEAR||e===G.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},FilterSystem.prototype.applyFilter=function(t,e,r,i){var n=this.renderer;this.bindAndClear(r,i),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.state.set(t.state),n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(C.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(C.TRIANGLE_STRIP))},FilterSystem.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,i=r.sourceFrame,n=r.destinationFrame,o=e._texture.orig,s=t.set(n.width,0,0,n.height,i.x,i.y),a=e.worldTransform.copyTo(bt.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},FilterSystem.prototype.destroy=function(){this.texturePool.clear(!1)},FilterSystem.prototype.getOptimalFilterTexture=function(t,e,r){return void 0===r&&(r=1),this.texturePool.getOptimalTexture(t,e,r)},FilterSystem.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},FilterSystem.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},FilterSystem.prototype.emptyPool=function(){this.texturePool.clear(!0)},FilterSystem.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},FilterSystem}(ce),De=function(){function ObjectRenderer(t){this.renderer=t}return ObjectRenderer.prototype.flush=function(){},ObjectRenderer.prototype.destroy=function(){this.renderer=null},ObjectRenderer.prototype.start=function(){},ObjectRenderer.prototype.stop=function(){this.flush()},ObjectRenderer.prototype.render=function(t){},ObjectRenderer}(),Le=function(t){function BatchSystem(e){var r=t.call(this,e)||this;return r.emptyRenderer=new De(e),r.currentRenderer=r.emptyRenderer,r}return core_es_extends(BatchSystem,t),BatchSystem.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},BatchSystem.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},BatchSystem.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,i=e-1;i>=0;--i)t[i]=r[i]||null,t[i]&&(t[i]._batchLocation=i)},BatchSystem.prototype.boundArray=function(t,e,r,i){for(var n=t.elements,o=t.ids,s=t.count,a=0,u=0;u<s;u++){var h=n[u],c=h._batchLocation;if(c>=0&&c<i&&e[c]===h)o[u]=c;else for(;a<i;){var l=e[a];if(!l||l._batchEnabled!==r||l._batchLocation!==a){o[u]=a,h._batchLocation=a,e[a]=h;break}a++}}},BatchSystem}(ce),Fe=0,Ne=function(t){function ContextSystem(e){var r=t.call(this,e)||this;return r.webGLVersion=1,r.extensions={},r.supports={uint32Indices:!1},r.handleContextLost=r.handleContextLost.bind(r),r.handleContextRestored=r.handleContextRestored.bind(r),e.view.addEventListener("webglcontextlost",r.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",r.handleContextRestored,!1),r}return core_es_extends(ContextSystem,t),Object.defineProperty(ContextSystem.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),ContextSystem.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Fe++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},ContextSystem.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Fe++,this.renderer.runners.contextChange.emit(t)},ContextSystem.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},ContextSystem.prototype.createContext=function(t,e){var r;if(V.PREFER_ENV>=A.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},ContextSystem.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},ContextSystem.prototype.handleContextLost=function(t){t.preventDefault()},ContextSystem.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},ContextSystem.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},ContextSystem.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},ContextSystem.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var e="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=e,e||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},ContextSystem}(ce),Be=function GLFramebuffer(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=z.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},Ue=new ft,ke=function(t){function FramebufferSystem(e){var r=t.call(this,e)||this;return r.managedFramebuffers=[],r.unknownFramebuffer=new de(10,10),r.msaaSamples=null,r}return core_es_extends(FramebufferSystem,t),FramebufferSystem.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ft,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;V.PREFER_ENV===A.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},FramebufferSystem.prototype.bind=function(t,e){var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var o=t.colorTextures[n];this.renderer.texture.unbind(o.parentTextureArray||o)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},FramebufferSystem.prototype.setViewport=function(t,e,r,i){var n=this.viewport;n.width===r&&n.height===i&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=r,n.height=i,this.gl.viewport(t,e,r,i))},Object.defineProperty(FramebufferSystem.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),FramebufferSystem.prototype.clear=function(t,e,r,i,n){void 0===n&&(n=R.COLOR|R.DEPTH);var o=this.gl;o.clearColor(t,e,r,i),o.clear(n)},FramebufferSystem.prototype.initFramebuffer=function(t){var e=this.gl,r=new Be(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r},FramebufferSystem.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var i=t.colorTextures,n=0;n<i.length;n++)this.renderer.texture.bind(i[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},FramebufferSystem.prototype.updateFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures.length;e.drawBuffers||(i=Math.min(i,1)),r.multisample>1&&(r.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,r.msaaBuffer));for(var n=[],o=0;o<i;o++)if(!(0===o&&r.multisample>1)){var s=t.colorTextures[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,s.target,a._glTextures[this.CONTEXT_UID].texture,0),n.push(e.COLOR_ATTACHMENT0+o)}if((n.length>1&&e.drawBuffers(n),t.depthTexture)&&this.writeDepthTexture){var u=t.depthTexture;this.renderer.texture.bind(u,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,0)}r.stencil||!t.stencil&&!t.depth||(r.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,r.stencil))},FramebufferSystem.prototype.detectSamples=function(t){var e=this.msaaSamples,r=z.NONE;if(t<=1||null===e)return r;for(var i=0;i<e.length;i++)if(e[i]<=t){r=e[i];break}return 1===r&&(r=z.NONE),r},FramebufferSystem.prototype.blit=function(t,e,r){var i=this,n=i.current,o=i.renderer,s=i.gl,a=i.CONTEXT_UID;if(2===o.context.webGLVersion&&n){var u=n.glFramebuffers[a];if(u){if(!t){if(u.multisample<=1)return;u.blitFramebuffer||(u.blitFramebuffer=new de(n.width,n.height),u.blitFramebuffer.addColorTexture(0,n.colorTextures[0])),(t=u.blitFramebuffer).width=n.width,t.height=n.height}e||((e=Ue).width=n.width,e.height=n.height),r||(r=e);var h=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,u.framebuffer),s.blitFramebuffer(e.x,e.y,e.width,e.height,r.x,r.y,r.width,r.height,s.COLOR_BUFFER_BIT,h?s.NEAREST:s.LINEAR)}}},FramebufferSystem.prototype.disposeFramebuffer=function(t,e){var r=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(r){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(i.deleteFramebuffer(r.framebuffer),r.stencil&&i.deleteRenderbuffer(r.stencil))}},FramebufferSystem.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},FramebufferSystem.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var r=t.width,i=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r,i),e.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}}},FramebufferSystem.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ft},FramebufferSystem}(ce),Ge=function Ge(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},je={5126:4,5123:2,5121:1},Xe=function(t){function GeometrySystem(e){var r=t.call(this,e)||this;return r._activeGeometry=null,r._activeVao=null,r.hasVao=!0,r.hasInstance=!0,r.canUseUInt32ElementIndex=!1,r.managedGeometries={},r.managedBuffers={},r}return core_es_extends(GeometrySystem,t),GeometrySystem.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var r=this.renderer.context.extensions.vertexArrayObject;V.PREFER_ENV===A.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=function(){return r.createVertexArrayOES()},t.bindVertexArray=function(t){return r.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return r.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(!t.vertexAttribDivisor){var i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=function(t,e){return i.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,n,o){return i.drawElementsInstancedANGLE(t,e,r,n,o)},t.drawArraysInstanced=function(t,e,r,n){return i.drawArraysInstancedANGLE(t,e,r,n)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},GeometrySystem.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,i=t.glVertexArrayObjects[this.CONTEXT_UID];i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={});var n=i[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?r.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},GeometrySystem.prototype.reset=function(){this.unbind()},GeometrySystem.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,r=0;r<t.buffers.length;r++){var i=t.buffers[r],n=i._glBuffers[this.CONTEXT_UID];if(i._updateID!==n.updateID){n.updateID=i._updateID;var o=i.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,n.buffer),this._boundBuffer=n,n.byteLength>=i.data.byteLength)e.bufferSubData(o,0,i.data);else{var s=i.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=i.data.byteLength,e.bufferData(o,i.data,s)}}}},GeometrySystem.prototype.checkCompatibility=function(t,e){var r=t.attributes,i=e.attributeData;for(var n in i)if(!r[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},GeometrySystem.prototype.getSignature=function(t,e){var r=t.attributes,i=e.attributeData,n=["g",t.id];for(var o in r)i[o]&&n.push(o);return n.join("-")},GeometrySystem.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var r=this.gl,i=this.CONTEXT_UID,n=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],s=o[n];if(s)return o[e.id]=s,s;var a=t.buffers,u=t.attributes,h={},c={};for(var l in a)h[l]=0,c[l]=0;for(var l in u)!u[l].size&&e.attributeData[l]?u[l].size=e.attributeData[l].size:u[l].size||console.warn("PIXI Geometry attribute '"+l+"' size cannot be determined (likely the bound shader does not have the attribute)"),h[u[l].buffer]+=u[l].size*je[u[l].type];for(var l in u){var d=u[l],p=d.size;void 0===d.stride&&(h[d.buffer]===p*je[d.type]?d.stride=0:d.stride=h[d.buffer]),void 0===d.start&&(d.start=c[d.buffer],c[d.buffer]+=p*je[d.type])}s=r.createVertexArray(),r.bindVertexArray(s);for(var f=0;f<a.length;f++){var m=a[f];m._glBuffers[i]||(m._glBuffers[i]=new Ge(r.createBuffer()),this.managedBuffers[m.id]=m,m.disposeRunner.add(this)),m._glBuffers[i].refCount++}return this.activateVao(t,e),this._activeVao=s,o[e.id]=s,o[n]=s,s},GeometrySystem.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var r=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),r&&(e||i.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}},GeometrySystem.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),r){for(var o=0;o<n.length;o++){var s=n[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(n[o],e)}if(!e)for(var a in r)if("g"===a[0]){var u=r[a];this._activeVao===u&&this.unbind(),i.deleteVertexArray(u)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},GeometrySystem.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t);e=Object.keys(this.managedBuffers);for(r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},GeometrySystem.prototype.activateVao=function(t,e){var r=this.gl,i=this.CONTEXT_UID,n=t.buffers,o=t.attributes;t.indexBuffer&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[i].buffer);var s=null;for(var a in o){var u=o[a],h=n[u.buffer]._glBuffers[i];if(e.attributeData[a]){s!==h&&(r.bindBuffer(r.ARRAY_BUFFER,h.buffer),s=h);var c=e.attributeData[a].location;if(r.enableVertexAttribArray(c),r.vertexAttribPointer(c,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(c,1)}}}},GeometrySystem.prototype.draw=function(t,e,r,i){var n=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(r||0)*s,i||1):n.drawElements(t,e||o.indexBuffer.data.length,a,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,r,e||o.getSize(),i||1):n.drawArrays(t,r,e||o.getSize());return this},GeometrySystem.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},GeometrySystem}(ce),He=function(){function MaskData(t){void 0===t&&(t=null),this.type=H.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return MaskData.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=H.NONE,this.autoDetect=!0),this._target=null},MaskData.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},MaskData}();function compileShader(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function compileProgram(t,e,r,i){var n=compileShader(t,t.VERTEX_SHADER,e),o=compileShader(t,t.FRAGMENT_SHADER,r),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,o),i)for(var a in i)t.bindAttribLocation(s,i[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(o,t.COMPILE_STATUS)||(console.warn(r),console.error(t.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(n),t.deleteShader(o),s}function booleanArray(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function core_es_defaultValue(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return booleanArray(2*e);case"bvec3":return booleanArray(3*e);case"bvec4":return booleanArray(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ze,Ve={},Ye=Ve;function getTestContext(){if(Ye===Ve||Ye&&Ye.isContextLost()){var t=document.createElement("canvas"),e=void 0;V.PREFER_ENV>=A.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Ye=e}return Ye}function setPrecision(t,e,r){if("precision"!==t.substring(0,9)){var i=e;return e===X.HIGH&&r!==X.HIGH&&(i=X.MEDIUM),"precision "+i+" float;\n"+t}return r!==X.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var We={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(t){return We[t]}var qe=null,Ze={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(t,e){if(!qe){var r=Object.keys(Ze);qe={};for(var i=0;i<r.length;++i){var n=r[i];qe[t[n]]=Ze[n]}}return qe[e]}var Ke=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Qe={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Je={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var $e,tr=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function generateIfTestSrc(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}function checkMaxIfStatementsInShader(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=tr.replace(/%forloop%/gi,generateIfTestSrc(t));if(e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var er=0,rr={},ir=function(){function Program(t,e,r){void 0===r&&(r="pixi-shader"),this.id=er++,this.vertexSrc=t||Program.defaultVertexSrc,this.fragmentSrc=e||Program.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),rr[r]?(rr[r]++,r+="-"+rr[r]):rr[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,V.PRECISION_VERTEX,X.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,V.PRECISION_FRAGMENT,function getMaxFragmentPrecision(){if(!ze){ze=X.MEDIUM;var t=getTestContext();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);ze=e.precision?X.HIGH:X.MEDIUM}}return ze}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return Program.prototype.extractData=function(t,e){var r=getTestContext();if(r){var i=compileProgram(r,t,e);this.attributeData=this.getAttributeData(i,r),this.uniformData=this.getUniformData(i,r),r.deleteProgram(i)}else this.uniformData={},this.attributeData={}},Program.prototype.getAttributeData=function(t,e){for(var r={},i=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<n;o++){var s=e.getActiveAttrib(t,o),a=mapType(e,s.type),u={type:a,name:s.name,size:mapSize(a),location:0};r[s.name]=u,i.push(u)}i.sort((function(t,e){return t.name>e.name?1:-1}));for(o=0;o<i.length;o++)i[o].location=o;return r},Program.prototype.getUniformData=function(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<i;n++){var o=e.getActiveUniform(t,n),s=o.name.replace(/\[.*?\]$/,""),a=o.name.match(/\[.*?\]$/),u=mapType(e,o.type);r[s]={type:u,size:o.size,isArray:a,value:core_es_defaultValue(u,o.size)}}return r},Object.defineProperty(Program,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Program,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),Program.from=function(t,e,r){var i=t+e,n=nt[i];return n||(nt[i]=n=new Program(t,e,r)),n},Program}(),nr=function(){function Shader(t,e){for(var r in this.program=t,this.uniformGroup=e?e instanceof Re?e:new Re(e):new Re({}),t.uniformData)this.uniformGroup.uniforms[r]instanceof Array&&(this.uniformGroup.uniforms[r]=new Float32Array(this.uniformGroup.uniforms[r]))}return Shader.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var i=e.uniforms[r];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},Shader.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Shader.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Shader.from=function(t,e,r){return new Shader(ir.from(t,e),r)},Shader}(),or=function(){function State(){this.data=0,this.blendMode=M.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(State.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==M.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(State.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),State.for2d=function(){var t=new State;return t.depthTest=!1,t.blend=!0,t},State}(),sr=function(t){function Filter(e,r,i){var n=this,o=ir.from(e||Filter.defaultVertexSrc,r||Filter.defaultFragmentSrc);return(n=t.call(this,o,i)||this).padding=0,n.resolution=V.FILTER_RESOLUTION,n.enabled=!0,n.autoFit=!0,n.legacy=!!n.program.attributeData.aTextureCoord,n.state=new or,n}return core_es_extends(Filter,t),Filter.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},Object.defineProperty(Filter.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Filter,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Filter,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Filter}(nr),ar=new bt,ur=function(){function TextureMatrix(t,e){this._texture=t,this.mapCoord=new bt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(TextureMatrix.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),TextureMatrix.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],o=t[i+1];e[i]=n*r.a+o*r.c+r.tx,e[i+1]=n*r.b+o*r.d+r.ty}return e},TextureMatrix.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(ar.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(ar));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(e._frame.x+a+u)/o.width,s[1]=(e._frame.y+a+u)/o.height,s[2]=(e._frame.x+e._frame.width-a+u)/o.width,s[3]=(e._frame.y+e._frame.height-a+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},TextureMatrix}(),hr=function(t){function SpriteMaskFilter(e){var r=this,i=new bt;return r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,r.maskSprite=e,r.maskMatrix=i,r}return core_es_extends(SpriteMaskFilter,t),SpriteMaskFilter.prototype.apply=function(t,e,r,i){var n=this.maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ur(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,r,i))},SpriteMaskFilter}(sr),cr=function(t){function MaskSystem(e){var r=t.call(this,e)||this;return r.enableScissor=!1,r.alphaMaskPool=[],r.maskDataPool=[],r.maskStack=[],r.alphaMaskIndex=0,r}return core_es_extends(MaskSystem,t),MaskSystem.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},MaskSystem.prototype.push=function(t,e){var r=e;if(!r.isMaskData){var i=this.maskDataPool.pop()||new He;i.pooled=!0,i.maskObject=e,r=i}switch(r.autoDetect&&this.detect(r),r.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),r._target=t,r.type){case H.SCISSOR:this.maskStack.push(r),this.renderer.scissor.push(r);break;case H.STENCIL:this.maskStack.push(r),this.renderer.stencil.push(r);break;case H.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r),this.maskStack.push(r)}},MaskSystem.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case H.SCISSOR:this.renderer.scissor.pop();break;case H.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case H.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},MaskSystem.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=H.SPRITE;else if(t.type=H.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var r=e.worldTransform,i=Math.atan2(r.b,r.a),n=Math.atan2(r.d,r.c);i=Math.round(i*(180/Math.PI)*100),n=((n=Math.round(n*(180/Math.PI)*100)-i)%18e3+18e3)%18e3,0===(i=(i%9e3+9e3)%9e3)&&9e3===n&&(t.type=H.SCISSOR)}},MaskSystem.prototype.pushSpriteMask=function(t){var e=t.maskObject,r=t._target,i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new hr(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var n=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=n,this.alphaMaskIndex++},MaskSystem.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},MaskSystem}(ce),lr=function(t){function AbstractMaskSystem(e){var r=t.call(this,e)||this;return r.maskStack=[],r.glConst=0,r}return core_es_extends(AbstractMaskSystem,t),AbstractMaskSystem.prototype.getStackLength=function(){return this.maskStack.length},AbstractMaskSystem.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;var i=this.getStackLength();i!==r&&(0===i?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},AbstractMaskSystem.prototype._useCurrent=function(){},AbstractMaskSystem.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},AbstractMaskSystem}(ce),dr=function(t){function ScissorSystem(e){var r=t.call(this,e)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return core_es_extends(ScissorSystem,t),ScissorSystem.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},ScissorSystem.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var r=t._scissorRect,i=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,r?i.fit(r):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=i,this._useCurrent()},ScissorSystem.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},ScissorSystem.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,r=this.renderer.projection,i=r.transform,n=r.sourceFrame,o=r.destinationFrame,s=e?e.resolution:this.renderer.resolution,a=(t.x-n.x)*s+o.x,u=(t.y-n.y)*s+o.y,h=t.width*s,c=t.height*s;i&&(a+=i.tx*s,u+=i.ty*s),e||(u=this.renderer.height-c-u),this.renderer.gl.scissor(a,u,h,c)},ScissorSystem}(lr),pr=function(t){function StencilSystem(e){var r=t.call(this,e)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return core_es_extends(StencilSystem,t),StencilSystem.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},StencilSystem.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,i=t._stencilCounter;0===i&&(this.renderer.framebuffer.forceStencil(),r.enable(r.STENCIL_TEST)),t._stencilCounter++,r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.EQUAL,i,this._getBitwiseMask()),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},StencilSystem.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},StencilSystem.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},StencilSystem.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},StencilSystem}(lr),fr=function(t){function ProjectionSystem(e){var r=t.call(this,e)||this;return r.destinationFrame=null,r.sourceFrame=null,r.defaultFrame=null,r.projectionMatrix=new bt,r.transform=null,r}return core_es_extends(ProjectionSystem,t),ProjectionSystem.prototype.update=function(t,e,r,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},ProjectionSystem.prototype.calculateProjection=function(t,e,r,i){var n=this.projectionMatrix,o=i?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d},ProjectionSystem.prototype.setTransform=function(t){},ProjectionSystem}(ce),mr=new ft,yr=new ft,gr=new ft,vr=function(t){function RenderTextureSystem(e){var r=t.call(this,e)||this;return r.clearColor=e._backgroundColorRgba,r.defaultMaskStack=[],r.current=null,r.sourceFrame=new ft,r.destinationFrame=new ft,r}return core_es_extends(RenderTextureSystem,t),RenderTextureSystem.prototype.bind=function(t,e,r){void 0===t&&(t=null);var i,n,o,s=this.renderer;this.current=t,t?(o=(i=t.baseTexture).resolution,e||(mr.width=t.frame.width,mr.height=t.frame.height,e=mr),r||(yr.x=t.frame.x,yr.y=t.frame.y,yr.width=e.width,yr.height=e.height,r=yr),n=i.framebuffer):(o=s.resolution,e||(mr.width=s.screen.width,mr.height=s.screen.height,e=mr),r||((r=mr).width=e.width,r.height=e.height)),gr.x=r.x*o,gr.y=r.y*o,gr.width=r.width*o,gr.height=r.height*o,this.renderer.framebuffer.bind(n,gr),this.renderer.projection.update(r,e,o,!n),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},RenderTextureSystem.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},RenderTextureSystem.prototype.resize=function(){this.bind(null)},RenderTextureSystem.prototype.reset=function(){this.bind(null)},RenderTextureSystem}(ce),_r=function _r(){},xr=function(){function GLProgram(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return GLProgram.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},GLProgram}(),br=0,Tr={textureCount:0},Er=function(t){function ShaderSystem(e){var r=t.call(this,e)||this;return r.destroyed=!1,r.systemCheck(),r.gl=null,r.shader=null,r.program=null,r.cache={},r.id=br++,r}return core_es_extends(ShaderSystem,t),ShaderSystem.prototype.systemCheck=function(){if(!function unsafeEvalSupported(){if("boolean"==typeof $e)return $e;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");$e=!0===t({a:"b"},"a","b")}catch(t){$e=!1}return $e}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},ShaderSystem.prototype.contextChange=function(t){this.gl=t,this.reset()},ShaderSystem.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),e||(Tr.textureCount=0,this.syncUniformGroup(t.uniformGroup,Tr)),i},ShaderSystem.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},ShaderSystem.prototype.syncUniformGroup=function(t,e){var r=this.getglProgram();t.static&&t.dirtyId===r.uniformGroups[t.id]||(r.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},ShaderSystem.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},ShaderSystem.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function generateUniformsSync(t,e){var r=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var i in t.uniforms){var n=e[i];if(n){for(var o=t.uniforms[i],s=!1,a=0;a<Ke.length;a++)if(Ke[a].test(n,o)){r.push(Ke[a].code(i,o)),s=!0;break}if(!s){var u=(1===n.size?Qe:Je)[n.type].replace("location",'ud["'+i+'"].location');r.push('\n            cv = ud["'+i+'"].value;\n            v = uv["'+i+'"];\n            '+u+";")}}else t.uniforms[i].group&&r.push('\n                    renderer.shader.syncUniformGroup(uv["'+i+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},ShaderSystem.prototype.getSignature=function(t,e){var r=t.uniforms,i=[];for(var n in r)i.push(n),e[n]&&i.push(e[n].type);return i.join("-")},ShaderSystem.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},ShaderSystem.prototype.generateShader=function(t){var e=this.gl,r=t.program,i={};for(var n in r.attributeData)i[n]=r.attributeData[n].location;var o=compileProgram(e,r.vertexSrc,r.fragmentSrc,i),s={};for(var n in r.uniformData){var a=r.uniformData[n];s[n]={location:e.getUniformLocation(o,n),value:core_es_defaultValue(a.type,a.size)}}var u=new xr(o,s);return r.glPrograms[this.renderer.CONTEXT_UID]=u,u},ShaderSystem.prototype.reset=function(){this.program=null,this.shader=null},ShaderSystem.prototype.destroy=function(){this.destroyed=!0},ShaderSystem}(ce);var Sr=function(t){function StateSystem(e){var r=t.call(this,e)||this;return r.gl=null,r.stateId=0,r.polygonOffset=0,r.blendMode=M.NONE,r._blendEq=!1,r.map=[],r.map[0]=r.setBlend,r.map[1]=r.setOffset,r.map[2]=r.setCullFace,r.map[3]=r.setDepthTest,r.map[4]=r.setFrontFace,r.checks=[],r.defaultState=new or,r.defaultState.blend=!0,r}return core_es_extends(StateSystem,t),StateSystem.prototype.contextChange=function(t){this.gl=t,this.blendModes=function mapWebGLBlendModesToPixi(t,e){return void 0===e&&(e=[]),e[M.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.ADD]=[t.ONE,t.ONE],e[M.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.NONE]=[0,0],e[M.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[M.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[M.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[M.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[M.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[M.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[M.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[M.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[M.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[M.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[M.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},StateSystem.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},StateSystem.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},StateSystem.prototype.setBlend=function(t){this.updateCheck(StateSystem.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},StateSystem.prototype.setOffset=function(t){this.updateCheck(StateSystem.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},StateSystem.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},StateSystem.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},StateSystem.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},StateSystem.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},StateSystem.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},StateSystem.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},StateSystem.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},StateSystem.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},StateSystem.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},StateSystem}(ce),Pr=function(t){function TextureGCSystem(e){var r=t.call(this,e)||this;return r.count=0,r.checkCount=0,r.maxIdle=V.GC_MAX_IDLE,r.checkCountMax=V.GC_MAX_CHECK_COUNT,r.mode=V.GC_MODE,r}return core_es_extends(TextureGCSystem,t),TextureGCSystem.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==j.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},TextureGCSystem.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[i]=null,r=!0)}if(r){var o=0;for(i=0;i<e.length;i++)null!==e[i]&&(e[o++]=e[i]);e.length=o}},TextureGCSystem.prototype.unload=function(t){var e,r=this.renderer.texture;(null===(e=t._texture)||void 0===e?void 0:e.framebuffer)&&r.destroyTexture(t._texture);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},TextureGCSystem}(ce),wr=function wr(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},Ir=function(t){function TextureSystem(e){var r=t.call(this,e)||this;return r.boundTextures=[],r.currentLocation=-1,r.managedTextures=[],r._unknownBoundTextures=!1,r.unknownTexture=new $t,r}return core_es_extends(TextureSystem,t),TextureSystem.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var i=new wr(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new wr(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},TextureSystem.prototype.bind=function(t,e){void 0===e&&(e=0);var r=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null},TextureSystem.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},TextureSystem.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(i=0;i<r.length;i++)r[i]===t&&(this.currentLocation!==i&&(e.activeTexture(e.TEXTURE0+i),this.currentLocation=i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),r[i]=null)},TextureSystem.prototype.initTexture=function(t){var e=new wr(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},TextureSystem.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var r=this.renderer.gl;t.type===r.FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA32F),t.type===F.HALF_FLOAT&&(e.type=r.HALF_FLOAT),e.type===r.HALF_FLOAT&&t.format===r.RGBA&&(e.internalFormat=r.RGBA16F)}},TextureSystem.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var r=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(r,t,e));else{var i=t.realWidth,n=t.realHeight,o=r.gl;(e.width!==i||e.height!==n||e.dirtyId<0)&&(e.width=i,e.height=n,o.texImage2D(t.target,0,e.internalFormat,i,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},TextureSystem.prototype.destroyTexture=function(t,e){var r=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var i=this.managedTextures.indexOf(t);-1!==i&&removeItems(this.managedTextures,i,1)}},TextureSystem.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==U.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=B.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},TextureSystem.prototype.setStyle=function(t,e){var r=this.gl;if(e.mipmap&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===N.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===N.LINEAR){var n=Math.min(t.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===N.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===N.LINEAR?r.LINEAR:r.NEAREST)},TextureSystem}(ce),Ar={FilterSystem:Ce,BatchSystem:Le,ContextSystem:Ne,FramebufferSystem:ke,GeometrySystem:Xe,MaskSystem:cr,ScissorSystem:dr,StencilSystem:pr,ProjectionSystem:fr,RenderTextureSystem:vr,ShaderSystem:Er,StateSystem:Sr,TextureGCSystem:Pr,TextureSystem:Ir},Or=new bt,Rr=function(t){function AbstractRenderer(e,r){void 0===e&&(e=O.UNKNOWN);var i=t.call(this)||this;return(r=Object.assign({},V.RENDER_OPTIONS,r)).roundPixels&&(V.ROUND_PIXELS=r.roundPixels,deprecation("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),i.options=r,i.type=e,i.screen=new ft(0,0,r.width,r.height),i.view=r.view||document.createElement("canvas"),i.resolution=r.resolution||V.RESOLUTION,i.transparent=r.transparent,i.autoDensity=r.autoDensity||r.autoResize||!1,i.preserveDrawingBuffer=r.preserveDrawingBuffer,i.clearBeforeRender=r.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=r.backgroundColor||i._backgroundColor,i._lastObjectRendered=null,i.plugins={},i}return core_es_extends(AbstractRenderer,t),AbstractRenderer.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(AbstractRenderer.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(AbstractRenderer.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),AbstractRenderer.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},AbstractRenderer.prototype.generateTexture=function(t,e,r,i){0===(i=i||t.getLocalBounds(null,!0)).width&&(i.width=1),0===i.height&&(i.height=1);var n=ge.create({width:0|i.width,height:0|i.height,scaleMode:e,resolution:r});return Or.tx=-i.x,Or.ty=-i.y,this.render(t,n,!1,Or,!!t.parent),n},AbstractRenderer.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var r=this;r.plugins=null,r.type=O.UNKNOWN,r.view=null,r.screen=null,r._tempDisplayObjectParent=null,r.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(AbstractRenderer.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=hex2string(t),hex2rgb(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),AbstractRenderer}(W.a),Mr=function(t){function Renderer(e){var r=t.call(this,O.WEBGL,e)||this;return e=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new qt("destroy"),contextChange:new qt("contextChange"),reset:new qt("reset"),update:new qt("update"),postrender:new qt("postrender"),prerender:new qt("prerender"),resize:new qt("resize")},r.globalUniforms=new Re({projectionMatrix:new bt},!0),r.addSystem(cr,"mask").addSystem(Ne,"context").addSystem(Sr,"state").addSystem(Er,"shader").addSystem(Ir,"texture").addSystem(Xe,"geometry").addSystem(ke,"framebuffer").addSystem(dr,"scissor").addSystem(pr,"stencil").addSystem(fr,"projection").addSystem(Pr,"textureGC").addSystem(Ce,"filter").addSystem(vr,"renderTexture").addSystem(Le,"batch"),r.initPlugins(Renderer.__plugins),e.context?r.context.initFromContext(e.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:e.antialias,premultipliedAlpha:r.transparent&&"notMultiplied"!==r.transparent,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,sayHello(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return core_es_extends(Renderer,t),Renderer.create=function(t){if(isWebGLSupported())return new Renderer(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Renderer.prototype.addSystem=function(t,e){e||(e=t.name);var r=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var i in this[e]=r,this.runners)this.runners[i].add(r);return this},Renderer.prototype.render=function(t,e,r,i,n){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(e||(this._lastObjectRendered=t),!n){var o=t.enableTempParent();t.updateTransform(),t.disableTempParent(o)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},Renderer.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.runners.resize.emit(e,r)},Renderer.prototype.reset=function(){return this.runners.reset.emit(),this},Renderer.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},Renderer.prototype.destroy=function(e){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();t.prototype.destroy.call(this,e),this.gl=null},Renderer.registerPlugin=function(t,e){Renderer.__plugins=Renderer.__plugins||{},Renderer.__plugins[t]=e},Renderer}(Rr);function autoDetectRenderer(t){return Mr.create(t)}var Cr="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Dr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Lr=function BatchDrawCall(){this.texArray=null,this.blend=0,this.type=C.TRIANGLES,this.start=0,this.size=0,this.data=null},Fr=function(){function BatchTextureArray(){this.elements=[],this.ids=[],this.count=0}return BatchTextureArray.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},BatchTextureArray}(),Nr=function(){function ViewableBuffer(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(ViewableBuffer.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(ViewableBuffer.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),ViewableBuffer.prototype.view=function(t){return this[t+"View"]},ViewableBuffer.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},ViewableBuffer.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},ViewableBuffer}(),Br=function(t){function AbstractBatchRenderer(e){var r=t.call(this,e)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=or.for2d(),r.size=4*V.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),e.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return core_es_extends(AbstractBatchRenderer,t),AbstractBatchRenderer.prototype.contextChange=function(){var t=this.renderer.gl;V.PREFER_ENV===A.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),V.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},AbstractBatchRenderer.prototype.initFlushBuffers=function(){for(var t=AbstractBatchRenderer._drawCallPool,e=AbstractBatchRenderer._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new Lr);for(;e.length<i;)e.push(new Fr);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},AbstractBatchRenderer.prototype.onPrerender=function(){this._flushId=0},AbstractBatchRenderer.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},AbstractBatchRenderer.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=AbstractBatchRenderer._textureArrayPool,i=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count,s=++$t._globalBatch,a=0,u=r[0],h=0;i.copyBoundTextures(n,e);for(var c=0;c<this._bufferSize;++c){var l=t[c];t[c]=null,l._batchEnabled!==s&&(u.count>=e&&(i.boundArray(u,n,s,e),this.buildDrawCalls(u,h,c),h=c,u=r[++a],++s),l._batchEnabled=s,l.touched=o,u.elements[u.count++]=l)}u.count>0&&(i.boundArray(u,n,s,e),this.buildDrawCalls(u,h,this._bufferSize),++a,++s);for(c=0;c<n.length;c++)n[c]=null;$t._globalBatch=s},AbstractBatchRenderer.prototype.buildDrawCalls=function(t,e,r){var i=this,n=i._bufferedElements,o=i._attributeBuffer,s=i._indexBuffer,a=i.vertexSize,u=AbstractBatchRenderer._drawCallPool,h=this._dcIndex,c=this._aIndex,l=this._iIndex,d=u[h];d.start=this._iIndex,d.texArray=t;for(var p=e;p<r;++p){var f=n[p],m=f._texture.baseTexture,y=tt[m.alphaMode?1:0][f.blendMode];n[p]=null,e<p&&d.blend!==y&&(d.size=l-d.start,e=p,(d=u[++h]).texArray=t,d.start=l),this.packInterleavedGeometry(f,o,s,c,l),c+=f.vertexData.length/2*a,l+=f.indices.length,d.blend=y}e<r&&(d.size=l-d.start,++h),this._dcIndex=h,this._aIndex=c,this._iIndex=l},AbstractBatchRenderer.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},AbstractBatchRenderer.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,r=t._attributeBuffer,i=t._indexBuffer;V.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},AbstractBatchRenderer.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,i=e.state,n=AbstractBatchRenderer._drawCallPool,o=null,s=0;s<t;s++){var a=n[s],u=a.texArray,h=a.type,c=a.size,l=a.start,d=a.blend;o!==u&&(o=u,this.bindAndClearTexArray(u)),this.state.blendMode=d,i.set(this.state),r.drawElements(h,c,r.UNSIGNED_SHORT,2*l)}},AbstractBatchRenderer.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},AbstractBatchRenderer.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),V.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},AbstractBatchRenderer.prototype.stop=function(){this.flush()},AbstractBatchRenderer.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},AbstractBatchRenderer.prototype.getAttributeBuffer=function(t){var e=nextPow2(Math.ceil(t/8)),r=log2(e),i=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._aBuffers[i];return n||(this._aBuffers[i]=n=new Nr(i*this.vertexSize*4)),n},AbstractBatchRenderer.prototype.getIndexBuffer=function(t){var e=nextPow2(Math.ceil(t/12)),r=log2(e),i=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var n=this._iBuffers[r];return n||(this._iBuffers[r]=n=new Uint16Array(i)),n},AbstractBatchRenderer.prototype.packInterleavedGeometry=function(t,e,r,i,n){for(var o=e.uint32View,s=e.float32View,a=i/this.vertexSize,u=t.uvs,h=t.indices,c=t.vertexData,l=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=d<1&&t._texture.baseTexture.alphaMode?premultiplyTint(t._tintRGB,d):t._tintRGB+(255*d<<24),f=0;f<c.length;f+=2)s[i++]=c[f],s[i++]=c[f+1],s[i++]=u[f],s[i++]=u[f+1],o[i++]=p,s[i++]=l;for(f=0;f<h.length;f++)r[n++]=a+h[f]},AbstractBatchRenderer._drawCallPool=[],AbstractBatchRenderer._textureArrayPool=[],AbstractBatchRenderer}(De),Ur=function(){function BatchShaderGenerator(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return BatchShaderGenerator.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Re.from({uSamplers:e},!0);var i=this.fragTemplate;i=(i=i.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ir(this.vertexSrc,i)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new bt,default:this.defaultGroupCache[t]};return new nr(this.programCache[t],n)},BatchShaderGenerator.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},BatchShaderGenerator}(),kr=function(t){function BatchGeometry(e){void 0===e&&(e=!1);var r=t.call(this)||this;return r._buffer=new be(null,e,!1),r._indexBuffer=new be(null,e,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,F.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,F.FLOAT).addAttribute("aColor",r._buffer,4,!0,F.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,F.FLOAT).addIndex(r._indexBuffer),r}return core_es_extends(BatchGeometry,t),BatchGeometry}(we),Gr="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",jr="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Xr=function(){function BatchPluginFactory(){}return BatchPluginFactory.create=function(t){var e=Object.assign({vertex:Gr,fragment:jr,geometryClass:kr,vertexSize:6},t),r=e.vertex,i=e.fragment,n=e.vertexSize,o=e.geometryClass;return function(t){function BatchPlugin(e){var s=t.call(this,e)||this;return s.shaderGenerator=new Ur(r,i),s.geometryClass=o,s.vertexSize=n,s}return core_es_extends(BatchPlugin,t),BatchPlugin}(Br)},Object.defineProperty(BatchPluginFactory,"defaultVertexSrc",{get:function(){return Gr},enumerable:!1,configurable:!0}),Object.defineProperty(BatchPluginFactory,"defaultFragmentTemplate",{get:function(){return jr},enumerable:!1,configurable:!0}),BatchPluginFactory}(),Hr=Xr.create(),zr=function(){function Application(t){var e=this;t=Object.assign({forceCanvas:!1},t),this.renderer=autoDetectRenderer(t),this.stage=new Lt,Application._plugins.forEach((function(r){r.init.call(e,t)}))}return Application.registerPlugin=function(t){Application._plugins.push(t)},Application.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(Application.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(Application.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),Application.prototype.destroy=function(t,e){var r=this,i=Application._plugins.slice(0);i.reverse(),i.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},Application}();zr._plugins=[];var Vr=function(){function ResizePlugin(){}return ResizePlugin.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,r;if(e.cancelResize(),e._resizeTo===window)t=window.innerWidth,r=window.innerHeight;else{var i=e._resizeTo;t=i.clientWidth,r=i.clientHeight}e.renderer.resize(t,r)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},ResizePlugin.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},ResizePlugin}();zr.registerPlugin(Vr);var Yr=new ft,Wr=function(){function Extract(t){this.renderer=t,t.extract=this}return Extract.prototype.image=function(t,e,r){var i=new Image;return i.src=this.base64(t,e,r),i},Extract.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},Extract.prototype.canvas=function(t){var e,r,i,n=this.renderer,o=!1,s=!1;t&&(t instanceof ge?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(e=i.baseTexture.resolution,r=i.frame,o=!1,n.renderTexture.bind(i)):(e=this.renderer.resolution,o=!0,(r=Yr).width=this.renderer.width,r.height=this.renderer.height,n.renderTexture.bind(null));var a=Math.floor(r.width*e+1e-4),u=Math.floor(r.height*e+1e-4),h=new at(a,u,1),c=new Uint8Array(4*a*u),l=n.gl;l.readPixels(r.x*e,r.y*e,a,u,l.RGBA,l.UNSIGNED_BYTE,c);var d=h.context.getImageData(0,0,a,u);if(Extract.arrayPostDivide(c,d.data),h.context.putImageData(d,0,0),o){var p=new at(h.width,h.height,1);p.context.scale(1,-1),p.context.drawImage(h.canvas,0,-u),h.destroy(),h=p}return s&&i.destroy(!0),h.canvas},Extract.prototype.pixels=function(t){var e,r,i,n=this.renderer,o=!1;t&&(t instanceof ge?i=t:(i=this.renderer.generateTexture(t),o=!0)),i?(e=i.baseTexture.resolution,r=i.frame,n.renderTexture.bind(i)):(e=n.resolution,(r=Yr).width=n.width,r.height=n.height,n.renderTexture.bind(null));var s=r.width*e,a=r.height*e,u=new Uint8Array(4*s*a),h=n.gl;return h.readPixels(r.x*e,r.y*e,s,a,h.RGBA,h.UNSIGNED_BYTE,u),o&&i.destroy(!0),Extract.arrayPostDivide(u,u),u},Extract.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Extract.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var i=e[r+3]=t[r+3];0!==i?(e[r]=Math.round(Math.min(255*t[r]/i,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/i,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/i,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}},Extract}(),qr=r(21),Zr=r.n(qr),Kr=r(1),Qr=r.n(Kr);function _noop(){}function eachSeries(t,e,r,i){var n=0,o=t.length;!function next(s){s||n===o?r&&r(s):i?setTimeout((function(){e(t[n++],next)}),1):e(t[n++],next)}()}function onlyOnce(t){return function onceWrapper(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function resource_loader_esm_queue(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=0,i={_tasks:[],concurrency:e,saturated:_noop,unsaturated:_noop,buffer:e/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function push(t,e){_insert(t,!1,e)},kill:function kill(){r=0,i.drain=_noop,i.started=!1,i._tasks=[]},unshift:function unshift(t,e){_insert(t,!0,e)},process:function process(){for(;!i.paused&&r<i.concurrency&&i._tasks.length;){var e=i._tasks.shift();0===i._tasks.length&&i.empty(),(r+=1)===i.concurrency&&i.saturated(),t(e.data,onlyOnce(_next(e)))}},length:function length(){return i._tasks.length},running:function running(){return r},idle:function idle(){return i._tasks.length+r===0},pause:function pause(){!0!==i.paused&&(i.paused=!0)},resume:function resume(){if(!1!==i.paused){i.paused=!1;for(var t=1;t<=i.concurrency;t++)i.process()}}};function _insert(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var n={data:t,callback:"function"==typeof r?r:_noop};e?i._tasks.unshift(n):i._tasks.push(n),setTimeout((function(){return i.process()}),1)}}function _next(t){return function next(){r-=1,t.callback.apply(t,arguments),null!=arguments[0]&&i.error(arguments[0],t.data),r<=i.concurrency-i.buffer&&i.unsaturated(),i.idle()&&i.drain(),i.process()}}return i}var Jr={};function _defineProperties(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}var $r=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),ti=null;function _noop$1(){}var ei=function(){function Resource(t,e,r){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(Resource.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Resource.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Qr.a,this.onProgress=new Qr.a,this.onComplete=new Qr.a,this.onAfterMiddleware=new Qr.a}Resource.setExtensionLoadType=function setExtensionLoadType(t,e){setExtMap(Resource._loadTypeMap,t,e)},Resource.setExtensionXhrType=function setExtensionXhrType(t,e){setExtMap(Resource._xhrTypeMap,t,e)};var t=Resource.prototype;return t.complete=function complete(){this._clearEvents(),this._finish()},t.abort=function abort(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Resource.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function load(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout((function(){return t(e)}),1);else switch(t&&this.onComplete.once(t),this._setFlag(Resource.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Resource.LOAD_TYPE.IMAGE:this.type=Resource.TYPE.IMAGE,this._loadElement("image");break;case Resource.LOAD_TYPE.AUDIO:this.type=Resource.TYPE.AUDIO,this._loadSourceElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this.type=Resource.TYPE.VIDEO,this._loadSourceElement("video");break;case Resource.LOAD_TYPE.XHR:default:$r&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function _hasFlag(t){return 0!=(this._flags&t)},t._setFlag=function _setFlag(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function _clearEvents(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function _finish(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Resource.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Resource.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function _loadElement(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function _loadSourceElement(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t._loadXhr=function _loadXhr(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=Resource.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function _loadXdr(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t._createSource=function _createSource(t,e,r){r||(r=t+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=r,i},t._onError=function _onError(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function _onProgress(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function _onTimeout(){this.abort("Load timed out.")},t._xhrOnError=function _xhrOnError(){var t=this.xhr;this.abort(reqType(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function _xhrOnTimeout(){var t=this.xhr;this.abort(reqType(t)+" Request timed out.")},t._xhrOnAbort=function _xhrOnAbort(){var t=this.xhr;this.abort(reqType(t)+" Request was aborted by the user.")},t._xhrOnLoad=function _xhrOnLoad(){var t=this.xhr,e="",r=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(e=t.responseText),0===r&&(e.length>0||t.responseType===Resource.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=Resource.TYPE.TEXT;else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=Resource.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(e,"text/xml")}else{var n=document.createElement("div");n.innerHTML=e,this.data=n}this.type=Resource.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=t.response||e;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},t._determineCrossOrigin=function _determineCrossOrigin(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,ti||(ti=document.createElement("a")),ti.href=t;var r=!(t=Zr()(ti.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t._determineXhrType=function _determineXhrType(){return Resource._xhrTypeMap[this.extension]||Resource.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function _determineLoadType(){return Resource._loadTypeMap[this.extension]||Resource.LOAD_TYPE.XHR},t._getExtension=function _getExtension(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var i=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(i>-1?i:t.length,n>-1?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t._getMimeFromXhrType=function _getMimeFromXhrType(t){switch(t){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},_createClass(Resource,[{key:"isDataUrl",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function get(){return this._hasFlag(Resource.STATUS_FLAGS.LOADING)}}]),Resource}();function setExtMap(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function reqType(t){return t.toString().replace("object ","")}ei.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},ei.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},ei.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},ei.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},ei._loadTypeMap={gif:ei.LOAD_TYPE.IMAGE,png:ei.LOAD_TYPE.IMAGE,bmp:ei.LOAD_TYPE.IMAGE,jpg:ei.LOAD_TYPE.IMAGE,jpeg:ei.LOAD_TYPE.IMAGE,tif:ei.LOAD_TYPE.IMAGE,tiff:ei.LOAD_TYPE.IMAGE,webp:ei.LOAD_TYPE.IMAGE,tga:ei.LOAD_TYPE.IMAGE,svg:ei.LOAD_TYPE.IMAGE,"svg+xml":ei.LOAD_TYPE.IMAGE,mp3:ei.LOAD_TYPE.AUDIO,ogg:ei.LOAD_TYPE.AUDIO,wav:ei.LOAD_TYPE.AUDIO,mp4:ei.LOAD_TYPE.VIDEO,webm:ei.LOAD_TYPE.VIDEO},ei._xhrTypeMap={xhtml:ei.XHR_RESPONSE_TYPE.DOCUMENT,html:ei.XHR_RESPONSE_TYPE.DOCUMENT,htm:ei.XHR_RESPONSE_TYPE.DOCUMENT,xml:ei.XHR_RESPONSE_TYPE.DOCUMENT,tmx:ei.XHR_RESPONSE_TYPE.DOCUMENT,svg:ei.XHR_RESPONSE_TYPE.DOCUMENT,tsx:ei.XHR_RESPONSE_TYPE.DOCUMENT,gif:ei.XHR_RESPONSE_TYPE.BLOB,png:ei.XHR_RESPONSE_TYPE.BLOB,bmp:ei.XHR_RESPONSE_TYPE.BLOB,jpg:ei.XHR_RESPONSE_TYPE.BLOB,jpeg:ei.XHR_RESPONSE_TYPE.BLOB,tif:ei.XHR_RESPONSE_TYPE.BLOB,tiff:ei.XHR_RESPONSE_TYPE.BLOB,webp:ei.XHR_RESPONSE_TYPE.BLOB,tga:ei.XHR_RESPONSE_TYPE.BLOB,json:ei.XHR_RESPONSE_TYPE.JSON,text:ei.XHR_RESPONSE_TYPE.TEXT,txt:ei.XHR_RESPONSE_TYPE.TEXT,ttf:ei.XHR_RESPONSE_TYPE.BUFFER,otf:ei.XHR_RESPONSE_TYPE.BUFFER},ei.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var ri=window.URL||window.webkitURL;var ii={caching:function caching(t,e){var r=this;Jr[t.url]?(t.data=Jr[t.url],t.complete()):t.onComplete.once((function(){return Jr[r.url]=r.data})),e()},parsing:function parsing(t,e){if(t.data){if(t.xhr&&t.xhrType===ei.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=ri.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=ei.TYPE.IMAGE,void(t.data.onload=function(){ri.revokeObjectURL(r),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function encodeBinary(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],o=0;o<i.length;++o)r<t.length?i[o]=255&t.charCodeAt(r++):i[o]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var s=0;s<n.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[s])}return e}(t.xhr.responseText),t.type=ei.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},ni=/(#[\w-]+)?$/,oi=function(){function Loader(t,e){var r=this;void 0===t&&(t=""),void 0===e&&(e=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=resource_loader_esm_queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new Qr.a,this.onError=new Qr.a,this.onLoad=new Qr.a,this.onStart=new Qr.a,this.onComplete=new Qr.a;for(var i=0;i<Loader._defaultBeforeMiddleware.length;++i)this.pre(Loader._defaultBeforeMiddleware[i]);for(var n=0;n<Loader._defaultAfterMiddleware.length;++n)this.use(Loader._defaultAfterMiddleware[n])}var t=Loader.prototype;return t.add=function add(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=e||t.callback||t.onComplete,r=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new ei(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=r.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var u=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var h=0;h<s.length;++h)s[h].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},t.pre=function pre(t){return this._beforeMiddleware.push(t),this},t.use=function use(t){return this._afterMiddleware.push(t),this},t.reset=function reset(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.load=function load(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function _prepareUrl(t){var e,r=Zr()(t,{strictMode:!0});if(e=r.protocol||!r.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var i=ni.exec(e)[0];-1!==(e=e.substr(0,e.length-i.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=i}return e},t._loadResource=function _loadResource(t,e){var r=this;t._dequeue=e,eachSeries(this._beforeMiddleware,(function(e,i){e.call(r,t,(function(){i(t.isComplete?{}:null)}))}),(function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())}),!0)},t._onStart=function _onStart(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function _onComplete(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function _onLoad(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),eachSeries(this._afterMiddleware,(function(r,i){r.call(e,t,i)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},_createClass(Loader,[{key:"concurrency",get:function get(){return this._queue.concurrency},set:function set(t){this._queue.concurrency=t}}]),Loader}();oi._defaultBeforeMiddleware=[],oi._defaultAfterMiddleware=[],oi.pre=function LoaderPreStatic(t){return oi._defaultBeforeMiddleware.push(t),oi},oi.use=function LoaderUseStatic(t){return oi._defaultAfterMiddleware.push(t),oi};var si=ei,loaders_es_extendStatics=function(t,e){return(loaders_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var ai=function(){function TextureLoader(){}return TextureLoader.use=function(t,e){t.data&&t.type===ei.TYPE.IMAGE&&(t.texture=ye.fromLoader(t.data,t.url,t.name)),e()},TextureLoader}(),ui=function(t){function Loader(e,r){for(var i=t.call(this,e,r)||this,n=0;n<Loader._plugins.length;++n){var o=Loader._plugins[n],s=o.pre,a=o.use;s&&i.pre(s),a&&i.use(a)}return i._protected=!1,i}return function loaders_es_extends(t,e){function __(){this.constructor=t}loaders_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(Loader,t),Loader.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(Loader,"shared",{get:function(){var t=Loader._shared;return t||((t=new Loader)._protected=!0,Loader._shared=t),t},enumerable:!1,configurable:!0}),Loader.registerPlugin=function(t){return Loader._plugins.push(t),t.add&&t.add(),Loader},Loader._plugins=[],Loader}(oi);ui.registerPlugin({use:ii.parsing}),ui.registerPlugin(ai);var hi=function(){function AppLoaderPlugin(){}return AppLoaderPlugin.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?ui.shared:new ui},AppLoaderPlugin.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},AppLoaderPlugin}(),particles_es_extendStatics=function(t,e){return(particles_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function particles_es_extends(t,e){function __(){this.constructor=t}particles_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var ci,li,di=function(t){function ParticleContainer(e,r,i,n){void 0===e&&(e=1500),void 0===i&&(i=16384),void 0===n&&(n=!1);var o=t.call(this)||this;return i>16384&&(i=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=i,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=M.NORMAL,o.autoResize=n,o.roundPixels=!0,o.baseTexture=null,o.setProperties(r),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return particles_es_extends(ParticleContainer,t),ParticleContainer.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(ParticleContainer.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),ParticleContainer.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},ParticleContainer.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},ParticleContainer.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},ParticleContainer.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},ParticleContainer}(Lt),pi=function(){function ParticleBuffer(t,e,r){this.geometry=new we,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var n=t[i];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||F.FLOAT,offset:n.offset},e[i]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return ParticleBuffer.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new be(createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){(s=this.dynamicProperties[r]).offset=e,e+=s.size,this.dynamicStride+=s.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new be(this.dynamicData,!1,!1);var n=0;this.staticStride=0;for(r=0;r<this.staticProperties.length;++r){(s=this.staticProperties[r]).offset=n,n+=s.size,this.staticStride+=s.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new be(this.staticData,!0,!1);for(r=0;r<this.dynamicProperties.length;++r){var s=this.dynamicProperties[r];t.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===F.UNSIGNED_BYTE,s.type,4*this.dynamicStride,4*s.offset)}for(r=0;r<this.staticProperties.length;++r){s=this.staticProperties[r];t.addAttribute(s.attributeName,this.staticBuffer,0,s.type===F.UNSIGNED_BYTE,s.type,4*this.staticStride,4*s.offset)}},ParticleBuffer.prototype.uploadDynamic=function(t,e,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(t,e,r,n.type===F.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},ParticleBuffer.prototype.uploadStatic=function(t,e,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(t,e,r,n.type===F.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},ParticleBuffer.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},ParticleBuffer}(),fi=function(t){function ParticleRenderer(e){var r=t.call(this,e)||this;return r.shader=null,r.properties=null,r.tempMatrix=new bt,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:F.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=nr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=or.for2d(),r}return particles_es_extends(ParticleRenderer,t),ParticleRenderer.prototype.render=function(t){var e=t.children,r=t._maxSize,i=t._batchSize,n=this.renderer,o=e.length;if(0!==o){o>r&&!t.autoResize&&(o=r);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.state.blendMode=correctBlendMode(t.blendMode,a.alphaMode),n.state.set(this.state);var u=n.gl,h=t.worldTransform.copyTo(this.tempMatrix);h.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.alphaMode),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var c=!1,l=0,d=0;l<o;l+=i,d+=1){var p=o-l;p>i&&(p=i),d>=s.length&&s.push(this._generateOneMoreBuffer(t));var f=s[d];f.uploadDynamic(e,l,p);var m=t._bufferUpdateIDs[d]||0;(c=c||f._updateID<m)&&(f._updateID=t._updateID,f.uploadStatic(e,l,p)),n.geometry.bind(f.geometry),u.drawElements(u.TRIANGLES,6*p,u.UNSIGNED_SHORT,0)}}},ParticleRenderer.prototype.generateBuffers=function(t){for(var e=[],r=t._maxSize,i=t._batchSize,n=t._properties,o=0;o<r;o+=i)e.push(new pi(this.properties,n,i));return e},ParticleRenderer.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,r=t._properties;return new pi(this.properties,r,e)},ParticleRenderer.prototype.uploadVertices=function(t,e,r,i,n,o){for(var s=0,a=0,u=0,h=0,c=0;c<r;++c){var l=t[e+c],d=l._texture,p=l.scale.x,f=l.scale.y,m=d.trim,y=d.orig;m?(s=(a=m.x-l.anchor.x*y.width)+m.width,u=(h=m.y-l.anchor.y*y.height)+m.height):(s=y.width*(1-l.anchor.x),a=y.width*-l.anchor.x,u=y.height*(1-l.anchor.y),h=y.height*-l.anchor.y),i[o]=a*p,i[o+1]=h*f,i[o+n]=s*p,i[o+n+1]=h*f,i[o+2*n]=s*p,i[o+2*n+1]=u*f,i[o+3*n]=a*p,i[o+3*n+1]=u*f,o+=4*n}},ParticleRenderer.prototype.uploadPosition=function(t,e,r,i,n,o){for(var s=0;s<r;s++){var a=t[e+s].position;i[o]=a.x,i[o+1]=a.y,i[o+n]=a.x,i[o+n+1]=a.y,i[o+2*n]=a.x,i[o+2*n+1]=a.y,i[o+3*n]=a.x,i[o+3*n+1]=a.y,o+=4*n}},ParticleRenderer.prototype.uploadRotation=function(t,e,r,i,n,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;i[o]=a,i[o+n]=a,i[o+2*n]=a,i[o+3*n]=a,o+=4*n}},ParticleRenderer.prototype.uploadUvs=function(t,e,r,i,n,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(i[o]=a.x0,i[o+1]=a.y0,i[o+n]=a.x1,i[o+n+1]=a.y1,i[o+2*n]=a.x2,i[o+2*n+1]=a.y2,i[o+3*n]=a.x3,i[o+3*n+1]=a.y3,o+=4*n):(i[o]=0,i[o+1]=0,i[o+n]=0,i[o+n+1]=0,i[o+2*n]=0,i[o+2*n+1]=0,i[o+3*n]=0,i[o+3*n+1]=0,o+=4*n)}},ParticleRenderer.prototype.uploadTint=function(t,e,r,i,n,o){for(var s=0;s<r;++s){var a=t[e+s],u=a._texture.baseTexture.alphaMode>0,h=a.alpha,c=h<1&&u?premultiplyTint(a._tintRGB,h):a._tintRGB+(255*h<<24);i[o]=c,i[o+n]=c,i[o+2*n]=c,i[o+3*n]=c,o+=4*n}},ParticleRenderer.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},ParticleRenderer}(De);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(ci||(ci={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(li||(li={}));var mi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},yi=function(){function FillStyle(){this.color=16777215,this.alpha=1,this.texture=ye.WHITE,this.matrix=null,this.visible=!1,this.reset()}return FillStyle.prototype.clone=function(){var t=new FillStyle;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},FillStyle.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ye.WHITE,this.matrix=null,this.visible=!1},FillStyle.prototype.destroy=function(){this.texture=null,this.matrix=null},FillStyle}(),graphics_es_extendStatics=function(t,e){return(graphics_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function graphics_es_extends(t,e){function __(){this.constructor=t}graphics_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var gi={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,i=t.holes,n=e.points,o=e.indices;if(r.length>=6){for(var s=[],a=0;a<i.length;a++){var u=i[a];s.push(r.length/2),r=r.concat(u.points)}var h=Z()(r,s,2);if(!h)return;var c=n.length/2;for(a=0;a<h.length;a+=3)o.push(h[a]+c),o.push(h[a+1]+c),o.push(h[a+2]+c);for(a=0;a<r.length;a++)n.push(r[a])}}},vi={build:function(t){var e,r,i=t.shape,n=t.points,o=i.x,s=i.y;if(n.length=0,t.type===ct.CIRC)e=i.radius,r=i.radius;else{var a=t.shape;e=a.width,r=a.height}if(0!==e&&0!==r){var u=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(e+r));u/=2.3;for(var h=2*Math.PI/u,c=0;c<u-.5;c++)n.push(o+Math.sin(-h*c)*e,s+Math.cos(-h*c)*r);n.push(n[0],n[1])}},triangulate:function(t,e){var r=t.points,i=e.points,n=e.indices,o=i.length/2,s=o,a=t.shape,u=t.matrix,h=a.x,c=a.y;i.push(t.matrix?u.a*h+u.c*c+u.tx:h,t.matrix?u.b*h+u.d*c+u.ty:c);for(var l=0;l<r.length;l+=2)i.push(r[l],r[l+1]),n.push(o++,s,o)}},_i={build:function(t){var e=t.shape,r=e.x,i=e.y,n=e.width,o=e.height,s=t.points;s.length=0,s.push(r,i,r+n,i,r+n,i+o,r,i+o)},triangulate:function(t,e){var r=t.points,i=e.points,n=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function getPt(t,e,r){return t+(e-t)*r}function quadraticBezierCurve(t,e,r,i,n,o,s){void 0===s&&(s=[]);for(var a=s,u=0,h=0,c=0,l=0,d=0,p=0,f=0,m=0;f<=20;++f)u=getPt(t,r,m=f/20),h=getPt(e,i,m),c=getPt(r,n,m),l=getPt(i,o,m),d=getPt(u,c,m),p=getPt(h,l,m),a.push(d,p);return a}var xi={build:function(t){var e=t.shape,r=t.points,i=e.x,n=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));r.length=0,a?(quadraticBezierCurve(i,n+a,i,n,i+a,n,r),quadraticBezierCurve(i+o-a,n,i+o,n,i+o,n+a,r),quadraticBezierCurve(i+o,n+s-a,i+o,n+s,i+o-a,n+s,r),quadraticBezierCurve(i+a,n+s,i,n+s,i,n+s-a,r)):r.push(i,n,i+o,n,i+o,n+s,i,n+s)},triangulate:function(t,e){for(var r=t.points,i=e.points,n=e.indices,o=i.length/2,s=Z()(r,null,2),a=0,u=s.length;a<u;a+=3)n.push(s[a]+o),n.push(s[a+1]+o),n.push(s[a+2]+o);for(a=0,u=r.length;a<u;a++)i.push(r[a],r[++a])}};function square(t,e,r,i,n,o,s,a){var u,h;s?(u=i,h=-r):(u=-i,h=r);var c=t-r*n+u,l=e-i*n+h,d=t+r*o+u,p=e+i*o+h;return a.push(c,l),a.push(d,p),2}function round(t,e,r,i,n,o,s,a){var u=r-t,h=i-e,c=Math.atan2(u,h),l=Math.atan2(n-t,o-e);a&&c<l?c+=2*Math.PI:!a&&c>l&&(l+=2*Math.PI);var d=c,p=l-c,f=Math.abs(p),m=Math.sqrt(u*u+h*h),y=1+(15*f*Math.sqrt(m)/Math.PI>>0),g=p/y;if(d+=g,a){s.push(t,e),s.push(r,i);for(var v=1,_=d;v<y;v++,_+=g)s.push(t,e),s.push(t+Math.sin(_)*m,e+Math.cos(_)*m);s.push(t,e),s.push(n,o)}else{s.push(r,i),s.push(t,e);for(v=1,_=d;v<y;v++,_+=g)s.push(t+Math.sin(_)*m,e+Math.cos(_)*m),s.push(t,e);s.push(n,o),s.push(t,e)}return 2*y}function buildLine(t,e){t.lineStyle.native?function buildNativeLine(t,e){var r=0,i=t.shape,n=t.points||i.points,o=i.type!==ct.POLY||i.closeStroke;if(0!==n.length){var s=e.points,a=e.indices,u=n.length/2,h=s.length/2,c=h;for(s.push(n[0],n[1]),r=1;r<u;r++)s.push(n[2*r],n[2*r+1]),a.push(c,c+1),c++;o&&a.push(c,h)}}(t,e):function buildNonNativeLine(t,e){var r=t.shape,i=t.points||r.points.slice(),n=e.closePointEps;if(0!==i.length){var o=t.lineStyle,s=new _t(i[0],i[1]),a=new _t(i[i.length-2],i[i.length-1]),u=r.type!==ct.POLY||r.closeStroke,h=Math.abs(s.x-a.x)<n&&Math.abs(s.y-a.y)<n;if(u){i=i.slice(),h&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));var c=.5*(s.x+a.x),l=.5*(a.y+s.y);i.unshift(c,l),i.push(c,l)}var d=e.points,p=i.length/2,f=i.length,m=d.length/2,y=o.width/2,g=y*y,v=o.miterLimit*o.miterLimit,_=i[0],x=i[1],b=i[2],T=i[3],E=0,S=0,P=-(x-T),w=_-b,I=0,A=0,O=Math.sqrt(P*P+w*w);P/=O,w/=O,P*=y,w*=y;var R=o.alignment,M=2*(1-R),C=2*R;u||(o.cap===li.ROUND?f+=round(_-P*(M-C)*.5,x-w*(M-C)*.5,_-P*M,x-w*M,_+P*C,x+w*C,d,!0)+2:o.cap===li.SQUARE&&(f+=square(_,x,P,w,M,C,!0,d))),d.push(_-P*M,x-w*M),d.push(_+P*C,x+w*C);for(var D=1;D<p-1;++D){_=i[2*(D-1)],x=i[2*(D-1)+1],b=i[2*D],T=i[2*D+1],E=i[2*(D+1)],S=i[2*(D+1)+1],P=-(x-T),w=_-b,P/=O=Math.sqrt(P*P+w*w),w/=O,P*=y,w*=y,I=-(T-S),A=b-E,I/=O=Math.sqrt(I*I+A*A),A/=O,I*=y,A*=y;var L=b-_,F=x-T,N=b-E,B=S-T,U=F*N-B*L,k=U<0;if(Math.abs(U)<.1)d.push(b-P*M,T-w*M),d.push(b+P*C,T+w*C);else{var G=(-P+_)*(-w+T)-(-P+b)*(-w+x),j=(-I+E)*(-A+T)-(-I+b)*(-A+S),X=(L*j-N*G)/U,H=(B*G-F*j)/U,z=(X-b)*(X-b)+(H-T)*(H-T),V=b+(X-b)*M,Y=T+(H-T)*M,W=b-(X-b)*C,q=T-(H-T)*C;o.join===ci.BEVEL||z/g>v?(k?(d.push(V,Y),d.push(b+P*C,T+w*C),d.push(V,Y),d.push(b+I*C,T+A*C)):(d.push(b-P*M,T-w*M),d.push(W,q),d.push(b-I*M,T-A*M),d.push(W,q)),f+=2):o.join===ci.ROUND?k?(d.push(V,Y),d.push(b+P*C,T+w*C),f+=round(b,T,b+P*C,T+w*C,b+I*C,T+A*C,d,!0)+4,d.push(V,Y),d.push(b+I*C,T+A*C)):(d.push(b-P*M,T-w*M),d.push(W,q),f+=round(b,T,b-P*M,T-w*M,b-I*M,T-A*M,d,!1)+4,d.push(b-I*M,T-A*M),d.push(W,q)):(d.push(V,Y),d.push(W,q))}}_=i[2*(p-2)],x=i[2*(p-2)+1],b=i[2*(p-1)],P=-(x-(T=i[2*(p-1)+1])),w=_-b,P/=O=Math.sqrt(P*P+w*w),w/=O,P*=y,w*=y,d.push(b-P*M,T-w*M),d.push(b+P*C,T+w*C),u||(o.cap===li.ROUND?f+=round(b-P*(M-C)*.5,T-w*(M-C)*.5,b-P*M,T-w*M,b+P*C,T+w*C,d,!1)+2:o.cap===li.SQUARE&&(f+=square(b,T,P,w,M,C,!1,d)));var Z=e.indices,K=mi.epsilon*mi.epsilon;for(D=m;D<f+m-2;++D)_=d[2*D],x=d[2*D+1],b=d[2*(D+1)],T=d[2*(D+1)+1],E=d[2*(D+2)],S=d[2*(D+2)+1],Math.abs(_*(T-S)+b*(S-x)+E*(x-T))<K||Z.push(D,D+1,D+2)}}(t,e)}var bi,Ti=function(t){function Star(e,r,i,n,o,s){void 0===s&&(s=0);o=o||n/2;for(var a=-1*Math.PI/2+s,u=2*i,h=lt/u,c=[],l=0;l<u;l++){var d=l%2?o:n,p=l*h+a;c.push(e+d*Math.cos(p),r+d*Math.sin(p))}return t.call(this,c)||this}return graphics_es_extends(Star,t),Star}(gt),Ei=function(){function ArcUtils(){}return ArcUtils.curveTo=function(t,e,r,i,n,o){var s=o[o.length-2],a=o[o.length-1]-e,u=s-t,h=i-e,c=r-t,l=Math.abs(a*c-u*h);if(l<1e-8||0===n)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var d=a*a+u*u,p=h*h+c*c,f=a*h+u*c,m=n*Math.sqrt(d)/l,y=n*Math.sqrt(p)/l,g=m*f/d,v=y*f/p,_=m*c+y*u,x=m*h+y*a,b=u*(y+g),T=a*(y+g),E=c*(m+v),S=h*(m+v);return{cx:_+t,cy:x+e,radius:n,startAngle:Math.atan2(T-x,b-_),endAngle:Math.atan2(S-x,E-_),anticlockwise:u*h>c*a}},ArcUtils.arc=function(t,e,r,i,n,o,s,a,u){for(var h=s-o,c=mi._segmentsCount(Math.abs(h)*n,40*Math.ceil(Math.abs(h)/lt)),l=h/(2*c),d=2*l,p=Math.cos(l),f=Math.sin(l),m=c-1,y=m%1/m,g=0;g<=m;++g){var v=l+o+d*(g+y*g),_=Math.cos(v),x=-Math.sin(v);u.push((p*_+f*x)*n+r,(p*-x+f*_)*n+i)}},ArcUtils}(),Si=function(){function BezierUtils(){}return BezierUtils.curveLength=function(t,e,r,i,n,o,s,a){for(var u=0,h=0,c=0,l=0,d=0,p=0,f=0,m=0,y=0,g=0,v=0,_=t,x=e,b=1;b<=10;++b)g=_-(m=(f=(p=(d=1-(h=b/10))*d)*d)*t+3*p*h*r+3*d*(c=h*h)*n+(l=c*h)*s),v=x-(y=f*e+3*p*h*i+3*d*c*o+l*a),_=m,x=y,u+=Math.sqrt(g*g+v*v);return u},BezierUtils.curveTo=function(t,e,r,i,n,o,s){var a=s[s.length-2],u=s[s.length-1];s.length-=2;var h=mi._segmentsCount(BezierUtils.curveLength(a,u,t,e,r,i,n,o)),c=0,l=0,d=0,p=0,f=0;s.push(a,u);for(var m=1,y=0;m<=h;++m)d=(l=(c=1-(y=m/h))*c)*c,f=(p=y*y)*y,s.push(d*a+3*l*y*t+3*c*p*r+f*n,d*u+3*l*y*e+3*c*p*i+f*o)},BezierUtils}(),Pi=function(){function QuadraticUtils(){}return QuadraticUtils.curveLength=function(t,e,r,i,n,o){var s=t-2*r+n,a=e-2*i+o,u=2*r-2*t,h=2*i-2*e,c=4*(s*s+a*a),l=4*(s*u+a*h),d=u*u+h*h,p=2*Math.sqrt(c+l+d),f=Math.sqrt(c),m=2*c*f,y=2*Math.sqrt(d),g=l/f;return(m*p+f*l*(p-y)+(4*d*c-l*l)*Math.log((2*f+g+p)/(g+y)))/(4*m)},QuadraticUtils.curveTo=function(t,e,r,i,n){for(var o=n[n.length-2],s=n[n.length-1],a=mi._segmentsCount(QuadraticUtils.curveLength(o,s,t,e,r,i)),u=0,h=0,c=1;c<=a;++c){var l=c/a;u=o+(t-o)*l,h=s+(e-s)*l,n.push(u+(t+(r-t)*l-u)*l,h+(e+(i-e)*l-h)*l)}},QuadraticUtils}(),wi=function(){function BatchPart(){this.reset()}return BatchPart.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},BatchPart.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},BatchPart.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},BatchPart}(),Ii=((bi={})[ct.POLY]=gi,bi[ct.CIRC]=vi,bi[ct.ELIP]=vi,bi[ct.RECT]=_i,bi[ct.RREC]=xi,bi),Ai=[],Oi=[],Ri={buildPoly:gi,buildCircle:vi,buildRectangle:_i,buildRoundedRectangle:xi,FILL_COMMANDS:Ii,BATCH_POOL:Ai,DRAW_CALL_POOL:Oi,buildLine:buildLine,Star:Ti,ArcUtils:Ei,BezierUtils:Si,QuadraticUtils:Pi,BatchPart:wi},Mi=function(){function GraphicsData(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=null),this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=i,this.type=t.type,this.points=[],this.holes=[]}return GraphicsData.prototype.clone=function(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)},GraphicsData.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},GraphicsData}(),Ci=new _t,Di=new Mt,Li=function(t){function GraphicsGeometry(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new Mt,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return graphics_es_extends(GraphicsGeometry,t),Object.defineProperty(GraphicsGeometry.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),GraphicsGeometry.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Oi.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),Ai.push(e)}this.batches.length=0},GraphicsGeometry.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},GraphicsGeometry.prototype.drawShape=function(t,e,r,i){void 0===e&&(e=null),void 0===r&&(r=null),void 0===i&&(i=null);var n=new Mi(t,e,r,i);return this.graphicsData.push(n),this.dirty++,this},GraphicsGeometry.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var r=new Mi(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this},GraphicsGeometry.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},GraphicsGeometry.prototype.containsPoint=function(t){for(var e=this.graphicsData,r=0;r<e.length;++r){var i=e[r];if(i.fillStyle.visible&&(i.shape&&(i.matrix?i.matrix.applyInverse(t,Ci):Ci.copyFrom(t),i.shape.contains(Ci.x,Ci.y)))){var n=!1;if(i.holes)for(var o=0;o<i.holes.length;o++){if(i.holes[o].shape.contains(Ci.x,Ci.y)){n=!0;break}}if(!n)return!0}}return!1},GraphicsGeometry.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,r=this.graphicsData,i=null,n=null;this.batches.length>0&&(n=(i=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<r.length;o++){this.shapeIndex++;var s=r[o],a=s.fillStyle,u=s.lineStyle;Ii[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix);for(var h=0;h<2;h++){var c=0===h?a:u;if(c.visible){var l=c.texture.baseTexture,d=this.indices.length,p=this.points.length/2;l.wrapMode=B.REPEAT,0===h?this.processFill(s):this.processLine(s);var f=this.points.length/2-p;0!==f&&(i&&!this._compareStyles(n,c)&&(i.end(d,p),i=null),i||((i=Ai.pop()||new wi).begin(c,d,p),this.batches.push(i),n=c),this.addUvs(this.points,e,c.texture,p,f,c.matrix))}}}var m=this.indices.length,y=this.points.length/2;if(i&&i.end(m,y),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var g=y>65535&&t;this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},GraphicsGeometry.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},GraphicsGeometry.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var r=this.graphicsData[t],i=r.fillStyle,n=r.lineStyle;if(i&&!i.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},GraphicsGeometry.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,r=t.length;e<r;e++)for(var i=t[e],n=0;n<i.size;n++){var o=i.start+n;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}},GraphicsGeometry.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*GraphicsGeometry.BATCHABLE_SIZE},GraphicsGeometry.prototype.buildDrawCalls=function(){for(var t=++$t._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Oi.push(this.drawCalls[e]);this.drawCalls.length=0;var r=this.colors,i=this.textureIds,n=Oi.pop();n||((n=new Lr).texArray=new Fr),n.texArray.count=0,n.start=0,n.size=0,n.type=C.TRIANGLES;var o=0,s=null,a=0,u=!1,h=C.TRIANGLES,c=0;this.drawCalls.push(n);for(e=0;e<this.batches.length;e++){var l=this.batches[e],d=l.style,p=d.texture.baseTexture;u!==!!d.native&&(h=(u=!!d.native)?C.LINES:C.TRIANGLES,s=null,o=8,t++),s!==p&&(s=p,p._batchEnabled!==t&&(8===o&&(t++,o=0,n.size>0&&((n=Oi.pop())||((n=new Lr).texArray=new Fr),this.drawCalls.push(n)),n.start=c,n.size=0,n.texArray.count=0,n.type=h),p.touched=1,p._batchEnabled=t,p._batchLocation=o,p.wrapMode=10497,n.texArray.elements[n.texArray.count++]=p,o++)),n.size+=l.size,c+=l.size,a=p._batchLocation,this.addColors(r,d.color,d.alpha,l.attribSize),this.addTextureIds(i,a,l.attribSize)}$t._globalBatch=t,this.packAttributes()},GraphicsGeometry.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,r=this.colors,i=this.textureIds,n=new ArrayBuffer(3*t.length*4),o=new Float32Array(n),s=new Uint32Array(n),a=0,u=0;u<t.length/2;u++)o[a++]=t[2*u],o[a++]=t[2*u+1],o[a++]=e[2*u],o[a++]=e[2*u+1],s[a++]=r[u],o[a++]=i[u];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},GraphicsGeometry.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),gi.triangulate(t,this)):Ii[t.type].triangulate(t,this)},GraphicsGeometry.prototype.processLine=function(t){buildLine(t,this);for(var e=0;e<t.holes.length;e++)buildLine(t.holes[e],this)},GraphicsGeometry.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var r=t[e];Ii[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},GraphicsGeometry.prototype.calculateBounds=function(){var t=this._bounds,e=Di,r=bt.IDENTITY;this._bounds.clear(),e.clear();for(var i=0;i<this.graphicsData.length;i++){var n=this.graphicsData[i],o=n.shape,s=n.type,a=n.lineStyle,u=n.matrix||bt.IDENTITY,h=0;if(a&&a.visible){var c=a.alignment;h=a.width,s===ct.POLY?h*=.5+Math.abs(.5-c):h*=Math.max(0,c)}if(r!==u&&(e.isEmpty()||(t.addBoundsMatrix(e,r),e.clear()),r=u),s===ct.RECT||s===ct.RREC){var l=o;e.addFramePad(l.x,l.y,l.x+l.width,l.y+l.height,h,h)}else if(s===ct.CIRC){var d=o;e.addFramePad(d.x,d.y,d.x,d.y,d.radius+h,d.radius+h)}else if(s===ct.ELIP){var p=o;e.addFramePad(p.x,p.y,p.x,p.y,p.width+h,p.height+h)}else{var f=o;t.addVerticesMatrix(r,f.points,0,f.points.length,h,h)}}e.isEmpty()||t.addBoundsMatrix(e,r),t.pad(this.boundsPadding,this.boundsPadding)},GraphicsGeometry.prototype.transformPoints=function(t,e){for(var r=0;r<t.length/2;r++){var i=t[2*r],n=t[2*r+1];t[2*r]=e.a*i+e.c*n+e.tx,t[2*r+1]=e.b*i+e.d*n+e.ty}},GraphicsGeometry.prototype.addColors=function(t,e,r,i){for(var n=premultiplyTint((e>>16)+(65280&e)+((255&e)<<16),r);i-- >0;)t.push(n)},GraphicsGeometry.prototype.addTextureIds=function(t,e,r){for(;r-- >0;)t.push(e)},GraphicsGeometry.prototype.addUvs=function(t,e,r,i,n,o){void 0===o&&(o=null);for(var s=0,a=e.length,u=r.frame;s<n;){var h=t[2*(i+s)],c=t[2*(i+s)+1];if(o){var l=o.a*h+o.c*c+o.tx;c=o.b*h+o.d*c+o.ty,h=l}s++,e.push(h/u.width,c/u.height)}var d=r.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(e,r,a,n)},GraphicsGeometry.prototype.adjustUvs=function(t,e,r,i){for(var n=e.baseTexture,o=1e-6,s=r+2*i,a=e.frame,u=a.width/n.width,h=a.height/n.height,c=a.x/a.width,l=a.y/a.height,d=Math.floor(t[r]+o),p=Math.floor(t[r+1]+o),f=r+2;f<s;f+=2)d=Math.min(d,Math.floor(t[f]+o)),p=Math.min(p,Math.floor(t[f+1]+o));c-=d,l-=p;for(f=r;f<s;f+=2)t[f]=(t[f]+c)*u,t[f+1]=(t[f+1]+l)*h},GraphicsGeometry.BATCHABLE_SIZE=100,GraphicsGeometry}(kr),Fi=function(t){function LineStyle(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=li.BUTT,e.join=ci.MITER,e.miterLimit=10,e}return graphics_es_extends(LineStyle,t),LineStyle.prototype.clone=function(){var t=new LineStyle;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},LineStyle.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},LineStyle}(yi),Ni=new Float32Array(3),Bi={},Ui=function(t){function Graphics(e){void 0===e&&(e=null);var r=t.call(this)||this;return r._geometry=e||new Li,r._geometry.refCount++,r.shader=null,r.state=or.for2d(),r._fillStyle=new yi,r._lineStyle=new Fi,r._matrix=null,r._holeMode=!1,r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r.pluginName="batch",r._transformID=-1,r.tint=16777215,r.blendMode=M.NORMAL,r}return graphics_es_extends(Graphics,t),Object.defineProperty(Graphics.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),Graphics.prototype.clone=function(){return this.finishPoly(),new Graphics(this._geometry)},Object.defineProperty(Graphics.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(Graphics.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),Graphics.prototype.lineStyle=function(t){if(void 0===t&&(t=null),"number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},Graphics.prototype.lineTextureStyle=function(t){if("number"==typeof t){deprecation("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],u=e[6];t={width:r,texture:i,color:n,alpha:o,matrix:s,alignment:a,native:u},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({width:0,texture:ye.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:li.BUTT,join:ci.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var h=t.width>0&&t.alpha>0;return h?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:h},t)):this._lineStyle.reset(),this},Graphics.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new gt,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new gt,this.currentPath.closeStroke=!1},Graphics.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},Graphics.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},Graphics.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,i=r[r.length-2],n=r[r.length-1];return i===t&&n===e||r.push(t,e),this},Graphics.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},Graphics.prototype.quadraticCurveTo=function(t,e,r,i){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),Pi.curveTo(t,e,r,i,n),this},Graphics.prototype.bezierCurveTo=function(t,e,r,i,n,o){return this._initCurve(),Si.curveTo(t,e,r,i,n,o,this.currentPath.points),this},Graphics.prototype.arcTo=function(t,e,r,i,n){this._initCurve(t,e);var o=this.currentPath.points,s=Ei.curveTo(t,e,r,i,n,o);if(s){var a=s.cx,u=s.cy,h=s.radius,c=s.startAngle,l=s.endAngle,d=s.anticlockwise;this.arc(a,u,h,c,l,d)}return this},Graphics.prototype.arc=function(t,e,r,i,n,o){if(void 0===o&&(o=!1),i===n)return this;if(!o&&n<=i?n+=lt:o&&i<=n&&(i+=lt),0===n-i)return this;var s=t+Math.cos(i)*r,a=e+Math.sin(i)*r,u=this._geometry.closePointEps,h=this.currentPath?this.currentPath.points:null;if(h){var c=Math.abs(h[h.length-2]-s),l=Math.abs(h[h.length-1]-a);c<u&&l<u||h.push(s,a)}else this.moveTo(s,a),h=this.currentPath.points;return Ei.arc(s,a,t,e,r,i,n,o,h),this},Graphics.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:ye.WHITE,color:t,alpha:e})},Graphics.prototype.beginTextureFill=function(t){if(t instanceof ye){deprecation("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,r=e[0],i=e[1],n=e[2],o=e[3];t={texture:r,color:i,alpha:n,matrix:o},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:ye.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var s=t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:s},t)):this._fillStyle.reset(),this},Graphics.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},Graphics.prototype.drawRect=function(t,e,r,i){return this.drawShape(new ft(t,e,r,i))},Graphics.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new vt(t,e,r,i,n))},Graphics.prototype.drawCircle=function(t,e,r){return this.drawShape(new mt(t,e,r))},Graphics.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new yt(t,e,r,i))},Graphics.prototype.drawPolygon=function(){for(var t,e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var n=!0,o=r[0];o.points?(n=o.closeStroke,t=o.points):t=Array.isArray(r[0])?r[0]:r;var s=new gt(t);return s.closeStroke=n,this.drawShape(s),this},Graphics.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},Graphics.prototype.drawStar=function(t,e,r,i,n,o){return void 0===o&&(o=0),this.drawPolygon(new Ti(t,e,r,i,n,o))},Graphics.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},Graphics.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===ct.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},Graphics.prototype._render=function(t){this.finishPoly();var e=this._geometry,r=t.context.supports.uint32Indices;e.updateBatches(r),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},Graphics.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(var i=0;i<r;i++){var n=t.batches[i],o=n.style.color,s=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),u={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:a,_batchRGB:hex2rgb(o),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[i]=u}},Graphics.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,r=this.batches.length;e<r;e++){var i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}},Graphics.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),r=this._geometry,i=this.tint,n=this.worldAlpha,o=e.uniforms,s=r.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(i>>16&255)/255*n,o.tint[1]=(i>>8&255)/255*n,o.tint[2]=(255&i)/255*n,o.tint[3]=n,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(var a=0,u=s.length;a<u;a++)this._renderDrawCallDirect(t,r.drawCalls[a])},Graphics.prototype._renderDrawCallDirect=function(t,e){for(var r=e.texArray,i=e.type,n=e.size,o=e.start,s=r.count,a=0;a<s;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(i,n,o)},Graphics.prototype._resolveDirectShader=function(t){var e=this.shader,r=this.pluginName;if(!e){if(!Bi[r]){for(var i=new Int32Array(16),n=0;n<16;n++)i[n]=n;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new bt,default:Re.from({uSamplers:i},!0)},s=t.plugins[r]._shader.program;Bi[r]=new nr(s,o)}e=Bi[r]}return e},Graphics.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,r=e.minX,i=e.minY,n=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,r,i,n,o)}},Graphics.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,Graphics._TEMP_POINT),this._geometry.containsPoint(Graphics._TEMP_POINT)},Graphics.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=hex2rgb(this.tint,Ni),e=0;e<this.batches.length;e++){var r=this.batches[e],i=r._batchRGB,n=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);r._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},Graphics.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,u=this._geometry.points,h=this.vertexData,c=0,l=0;l<u.length;l+=2){var d=u[l],p=u[l+1];h[c++]=r*d+n*p+s,h[c++]=o*p+i*d+a}}},Graphics.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},Graphics.prototype.setMatrix=function(t){return this._matrix=t,this},Graphics.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},Graphics.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},Graphics.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},Graphics._TEMP_POINT=new _t,Graphics}(Lt),sprite_es_extendStatics=function(t,e){return(sprite_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var ki,Gi=new _t,ji=new Uint16Array([0,1,2,0,2,3]),Xi=function(t){function Sprite(e){var r=t.call(this)||this;return r._anchor=new xt(r._onAnchorUpdate,r,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=M.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=e||ye.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=ji,r.pluginName="batch",r.isSprite=!0,r._roundPixels=V.ROUND_PIXELS,r}return function sprite_es_extends(t,e){function __(){this.constructor=t}sprite_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(Sprite,t),Sprite.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)},Sprite.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Sprite.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,h=t.trim,c=t.orig,l=this._anchor,d=0,p=0,f=0,m=0;if(h?(d=(p=h.x-l._x*c.width)+h.width,f=(m=h.y-l._y*c.height)+h.height):(d=(p=-l._x*c.width)+c.width,f=(m=-l._y*c.height)+c.height),u[0]=r*p+n*m+s,u[1]=o*m+i*p+a,u[2]=r*d+n*m+s,u[3]=o*m+i*d+a,u[4]=r*d+n*f+s,u[5]=o*f+i*d+a,u[6]=r*p+n*f+s,u[7]=o*f+i*p+a,this._roundPixels)for(var y=V.RESOLUTION,g=0;g<u.length;++g)u[g]=Math.round((u[g]*y|0)/y)}},Sprite.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,u=n.d,h=n.tx,c=n.ty,l=-i._x*r.width,d=l+r.width,p=-i._y*r.height,f=p+r.height;e[0]=o*l+a*p+h,e[1]=u*p+s*l+c,e[2]=o*d+a*p+h,e[3]=u*p+s*d+c,e[4]=o*d+a*f+h,e[5]=u*f+s*d+c,e[6]=o*l+a*f+h,e[7]=u*f+s*l+c},Sprite.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},Sprite.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},Sprite.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ft),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},Sprite.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Gi);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,n=0;return Gi.x>=i&&Gi.x<i+e&&(n=-r*this.anchor.y,Gi.y>=n&&Gi.y<n+r)},Sprite.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null},Sprite.from=function(t,e){return new Sprite(t instanceof ye?t:ye.from(t,e))},Object.defineProperty(Sprite.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(Sprite.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ye.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),Sprite}(Lt),text_es_extendStatics=function(t,e){return(text_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(ki||(ki={}));var Hi={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ki.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},zi=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Vi=function(){function TextStyle(t){this.styleID=0,this.reset(),deepCopyProperties(this,t,t)}return TextStyle.prototype.clone=function(){var t={};return deepCopyProperties(t,this,Hi),new TextStyle(t)},TextStyle.prototype.reset=function(){deepCopyProperties(this,Hi,Hi)},Object.defineProperty(TextStyle.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=getColor(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=getColor(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function areArraysEqual(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=getColor(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(TextStyle.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),TextStyle.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var i=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&zi.indexOf(i)<0&&(i='"'+i+'"'),e[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},TextStyle}();function getSingleColor(t){return"number"==typeof t?hex2string(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function getColor(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=getSingleColor(t[e]);return t}return getSingleColor(t)}function deepCopyProperties(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var Yi=function(){function TextMetrics(t,e,r,i,n,o,s,a,u){this.text=t,this.style=e,this.width=r,this.height=i,this.lines=n,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=u}return TextMetrics.measureText=function(t,e,r,i){void 0===i&&(i=TextMetrics._canvas),r=null==r?e.wordWrap:r;var n=e.toFontString(),o=TextMetrics.measureFont(n);0===o.fontSize&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);var s=i.getContext("2d");s.font=n;for(var a=(r?TextMetrics.wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(a.length),h=0,c=0;c<a.length;c++){var l=s.measureText(a[c]).width+(a[c].length-1)*e.letterSpacing;u[c]=l,h=Math.max(h,l)}var d=h+e.strokeThickness;e.dropShadow&&(d+=e.dropShadowDistance);var p=e.lineHeight||o.fontSize+e.strokeThickness,f=Math.max(p,o.fontSize+e.strokeThickness)+(a.length-1)*(p+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new TextMetrics(t,e,d,f,a,u,p+e.leading,h,o)},TextMetrics.wordWrap=function(t,e,r){void 0===r&&(r=TextMetrics._canvas);for(var i=r.getContext("2d"),n=0,o="",s="",a={},u=e.letterSpacing,h=e.whiteSpace,c=TextMetrics.collapseSpaces(h),l=TextMetrics.collapseNewlines(h),d=!c,p=e.wordWrapWidth+u,f=TextMetrics.tokenize(t),m=0;m<f.length;m++){var y=f[m];if(TextMetrics.isNewline(y)){if(!l){s+=TextMetrics.addLine(o),d=!c,o="",n=0;continue}y=" "}if(c){var g=TextMetrics.isBreakingSpace(y),v=TextMetrics.isBreakingSpace(o[o.length-1]);if(g&&v)continue}var _=TextMetrics.getFromCache(y,u,a,i);if(_>p)if(""!==o&&(s+=TextMetrics.addLine(o),o="",n=0),TextMetrics.canBreakWords(y,e.breakWords))for(var x=TextMetrics.wordWrapSplit(y),b=0;b<x.length;b++){for(var T=x[b],E=1;x[b+E];){var S=x[b+E],P=T[T.length-1];if(TextMetrics.canBreakChars(P,S,y,b,e.breakWords))break;T+=S,E++}b+=T.length-1;var w=TextMetrics.getFromCache(T,u,a,i);w+n>p&&(s+=TextMetrics.addLine(o),d=!1,o="",n=0),o+=T,n+=w}else{o.length>0&&(s+=TextMetrics.addLine(o),o="",n=0);var I=m===f.length-1;s+=TextMetrics.addLine(y,!I),d=!1,o="",n=0}else _+n>p&&(d=!1,s+=TextMetrics.addLine(o),o="",n=0),(o.length>0||!TextMetrics.isBreakingSpace(y)||d)&&(o+=y,n+=_)}return s+=TextMetrics.addLine(o,!1)},TextMetrics.addLine=function(t,e){return void 0===e&&(e=!0),t=TextMetrics.trimRight(t),t=e?t+"\n":t},TextMetrics.getFromCache=function(t,e,r,i){var n=r[t];if(void 0===n){var o=t.length*e;n=i.measureText(t).width+o,r[t]=n}return n},TextMetrics.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},TextMetrics.collapseNewlines=function(t){return"normal"===t},TextMetrics.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;e>=0;e--){var r=t[e];if(!TextMetrics.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},TextMetrics.isNewline=function(t){return"string"==typeof t&&TextMetrics._newlines.indexOf(t.charCodeAt(0))>=0},TextMetrics.isBreakingSpace=function(t){return"string"==typeof t&&TextMetrics._breakingSpaces.indexOf(t.charCodeAt(0))>=0},TextMetrics.tokenize=function(t){var e=[],r="";if("string"!=typeof t)return e;for(var i=0;i<t.length;i++){var n=t[i];TextMetrics.isBreakingSpace(n)||TextMetrics.isNewline(n)?(""!==r&&(e.push(r),r=""),e.push(n)):r+=n}return""!==r&&e.push(r),e},TextMetrics.canBreakWords=function(t,e){return e},TextMetrics.canBreakChars=function(t,e,r,i,n){return!0},TextMetrics.wordWrapSplit=function(t){return t.split("")},TextMetrics.measureFont=function(t){if(TextMetrics._fonts[t])return TextMetrics._fonts[t];var e={ascent:0,descent:0,fontSize:0},r=TextMetrics._canvas,i=TextMetrics._context;i.font=t;var n=TextMetrics.METRICS_STRING+TextMetrics.BASELINE_SYMBOL,o=Math.ceil(i.measureText(n).width),s=Math.ceil(i.measureText(TextMetrics.BASELINE_SYMBOL).width),a=2*s;s=s*TextMetrics.BASELINE_MULTIPLIER|0,r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(n,0,s);var u=i.getImageData(0,0,o,a).data,h=u.length,c=4*o,l=0,d=0,p=!1;for(l=0;l<s;++l){for(var f=0;f<c;f+=4)if(255!==u[d+f]){p=!0;break}if(p)break;d+=c}for(e.ascent=s-l,d=h-c,p=!1,l=a;l>s;--l){for(f=0;f<c;f+=4)if(255!==u[d+f]){p=!0;break}if(p)break;d-=c}return e.descent=l-s,e.fontSize=e.ascent+e.descent,TextMetrics._fonts[t]=e,e},TextMetrics.clearMetrics=function(t){void 0===t&&(t=""),t?delete TextMetrics._fonts[t]:TextMetrics._fonts={}},TextMetrics}(),Wi=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Wi.width=Wi.height=10,Yi._canvas=Wi,Yi._context=Wi.getContext("2d"),Yi._fonts={},Yi.METRICS_STRING="|ÉqÅ",Yi.BASELINE_SYMBOL="M",Yi.BASELINE_MULTIPLIER=1.4,Yi._newlines=[10,13],Yi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var qi={texture:!0,children:!1,baseTexture:!0},Zi=function(t){function Text(e,r,i){var n=this,o=!1;i||(i=document.createElement("canvas"),o=!0),i.width=3,i.height=3;var s=ye.from(i);return s.orig=new ft,s.trim=new ft,(n=t.call(this,s)||this)._ownCanvas=o,n.canvas=i,n.context=n.canvas.getContext("2d"),n._resolution=V.RESOLUTION,n._autoResolution=!0,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=e,n.style=r,n.localStyleID=-1,n}return function text_es_extends(t,e){function __(){this.constructor=t}text_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(Text,t),Text.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,i,n=this.context,o=Yi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,a=o.height,u=o.lines,h=o.lineHeight,c=o.lineWidths,l=o.maxLineWidth,d=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,a)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,f=0;f<p;++f){var m=e.dropShadow&&0===f,y=m?2*a:0,g=y*this.resolution;if(m){n.fillStyle="black",n.strokeStyle="black";var v=e.dropShadowColor,_=hex2rgb("number"==typeof v?v:string2hex(v));n.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+e.dropShadowAlpha+")",n.shadowBlur=e.dropShadowBlur,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+g}else n.fillStyle=this._generateFillStyle(e,u,o),n.strokeStyle=e.stroke,n.shadowColor="0",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var x=0;x<u.length;x++)r=e.strokeThickness/2,i=e.strokeThickness/2+x*h+d.ascent,"right"===e.align?r+=l-c[x]:"center"===e.align&&(r+=(l-c[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(u[x],r+e.padding,i+e.padding-y,!0),e.fill&&this.drawLetterSpacing(u[x],r+e.padding,i+e.padding-y)}this.updateTexture()}},Text.prototype.drawLetterSpacing=function(t,e,r,i){void 0===i&&(i=!1);var n=this._style.letterSpacing;if(0!==n)for(var o=e,s=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,u=0,h=0;h<s.length;++h){var c=s[h];i?this.context.strokeText(c,o,r):this.context.fillText(c,o,r),o+=a-(u=this.context.measureText(t.substring(h+1)).width)+n,a=u}else i?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},Text.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=trimCanvas(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,i=this._style,n=i.trim?0:i.padding,o=r.baseTexture;r.trim.width=r._frame.width=Math.ceil(t.width/this._resolution),r.trim.height=r._frame.height=Math.ceil(t.height/this._resolution),r.trim.x=-n,r.trim.y=-n,r.orig.width=r._frame.width-2*n,r.orig.height=r._frame.height-2*n,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},Text.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},Text.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},Text.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},Text.prototype._generateFillStyle=function(t,e,r){var i,n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];var o=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,a=Math.ceil(this.canvas.width/this._resolution)-o-2*s,u=Math.ceil(this.canvas.height/this._resolution)-o-2*s,h=n.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var l=h.length+1,d=1;d<l;++d)c.push(d/l);if(h.unshift(n[0]),c.unshift(0),h.push(n[n.length-1]),c.push(1),t.fillGradientType===ki.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,s,a/2,u+s);var p=0,f=(r.fontProperties.fontSize+t.strokeThickness)/u;for(d=0;d<e.length;d++)for(var m=r.lineHeight*d,y=0;y<h.length;y++){var g=m/u+("number"==typeof c[y]?c[y]:y/h.length)*f,v=Math.max(p,g);v=Math.min(v,1),i.addColorStop(v,h[y]),p=v}}else{i=this.context.createLinearGradient(s,u/2,a+s,u/2);var _=h.length+1,x=1;for(d=0;d<h.length;d++){var b=void 0;b="number"==typeof c[d]?c[d]:x/_,i.addColorStop(b,h[d]),x++}}return i},Text.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},qi,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(Text.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Vi?t:new Vi(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(Text.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Text}(Xi);V.UPLOADS_PER_FRAME=4;var prepare_es_extendStatics=function(t,e){return(prepare_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Ki=function(){function CountLimiter(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return CountLimiter.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},CountLimiter.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},CountLimiter}();function findMultipleBaseTextures(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof ye){var n=t._textures[i].baseTexture;-1===e.indexOf(n)&&(e.push(n),r=!0)}return r}function findBaseTexture(t,e){if(t.baseTexture instanceof $t){var r=t.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function findTexture(t,e){if(t._texture&&t._texture instanceof ye){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function drawText(t,e){return e instanceof Zi&&(e.updateText(!0),!0)}function calculateTextStyle(t,e){if(e instanceof Vi){var r=e.toFontString();return Yi.measureFont(r),!0}return!1}function findText(t,e){if(t instanceof Zi){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function findTextStyle(t,e){return t instanceof Vi&&(-1===e.indexOf(t)&&e.push(t),!0)}var Qi=function(){function BasePrepare(t){var e=this;this.limiter=new Ki(V.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return BasePrepare.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,kt.system.addOnce(this.tick,this,Nt.UTILITY))):e&&e()},BasePrepare.prototype.tick=function(){setTimeout(this.delayedTick,0)},BasePrepare.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)kt.system.addOnce(this.tick,this,Nt.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(r=0,i=n.length;r<i;r++)n[r]()}},BasePrepare.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},BasePrepare.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},BasePrepare.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Lt)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},BasePrepare.prototype.destroy=function(){this.ticking&&kt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},BasePrepare}();function uploadBaseTextures(t,e){return e instanceof $t&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function uploadGraphics(t,e){if(!(e instanceof Ui))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var i=r.batches,n=0;n<i.length;n++){var o=i[n].style.texture;o&&uploadBaseTextures(t,o.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function findGraphics(t,e){return t instanceof Ui&&(e.push(t),!0)}var Ji=function(t){function Prepare(e){var r=t.call(this,e)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(findGraphics),r.registerUploadHook(uploadBaseTextures),r.registerUploadHook(uploadGraphics),r}return function prepare_es_extends(t,e){function __(){this.constructor=t}prepare_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(Prepare,t),Prepare}(Qi),$i=function(){function TimeLimiter(t){this.maxMilliseconds=t,this.frameStart=0}return TimeLimiter.prototype.beginFrame=function(){this.frameStart=Date.now()},TimeLimiter.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},TimeLimiter}(),tn=function(){function Spritesheet(t,e,r){void 0===r&&(r=null),this._texture=t instanceof ye?t:null,this.baseTexture=t instanceof $t?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Spritesheet.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,r=getResolutionOfUrl(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&this.baseTexture.setResolution(r),r},Spritesheet.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=Spritesheet.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},Spritesheet.prototype._processFrames=function(t){for(var e=t,r=Spritesheet.BATCH_SIZE;e-t<r&&e<this._frameKeys.length;){var i=this._frameKeys[e],n=this._frames[i],o=n.frame;if(o){var s=null,a=null,u=!1!==n.trimmed&&n.sourceSize?n.sourceSize:n.frame,h=new ft(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s=n.rotated?new ft(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new ft(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==n.trimmed&&n.spriteSourceSize&&(a=new ft(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new ye(this.baseTexture,s,h,a,n.rotated?2:0,n.anchor),ye.addToCache(this.textures[i],i)}e++}},Spritesheet.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var i=t[e][r];this.animations[e].push(this.textures[i])}}},Spritesheet.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},Spritesheet.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*Spritesheet.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*Spritesheet.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},Spritesheet.prototype.destroy=function(t){var e;for(var r in void 0===t&&(t=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},Spritesheet.BATCH_SIZE=1e3,Spritesheet}(),en=function(){function SpritesheetLoader(){}return SpritesheetLoader.use=function(t,e){var r=this,i=t.name+"_image";if(t.data&&t.type===si.TYPE.JSON&&t.data.frames&&!r.resources[i]){var n={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},o=SpritesheetLoader.getResourcePath(t,r.baseUrl);r.add(i,o,n,(function onImageLoad(r){if(r.error)e(r.error);else{var i=new tn(r.texture,t.data,t.url);i.parse((function(){t.spritesheet=i,t.textures=i.textures,e()}))}}))}else e()},SpritesheetLoader.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:Q.a.resolve(t.url.replace(e,""),t.data.meta.image)},SpritesheetLoader}(),sprite_tiling_es_extendStatics=function(t,e){return(sprite_tiling_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function sprite_tiling_es_extends(t,e){function __(){this.constructor=t}sprite_tiling_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var rn=new _t,nn=function(t){function TilingSprite(e,r,i){void 0===r&&(r=100),void 0===i&&(i=100);var n=t.call(this,e)||this;return n.tileTransform=new Rt,n._width=r,n._height=i,n.uvMatrix=e.uvMatrix||new ur(e),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return sprite_tiling_es_extends(TilingSprite,t),Object.defineProperty(TilingSprite.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),TilingSprite.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},TilingSprite.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},TilingSprite.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,i)},TilingSprite.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ft),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},TilingSprite.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,rn);var e=this._width,r=this._height,i=-e*this.anchor._x;if(rn.x>=i&&rn.x<i+e){var n=-r*this.anchor._y;if(rn.y>=n&&rn.y<n+r)return!0}return!1},TilingSprite.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},TilingSprite.from=function(t,e){return"number"==typeof e&&(deprecation("5.3.0","TilingSprite.from use options instead of width and height args"),e={width:e,height:arguments[2]}),new TilingSprite(ye.from(t,e),e.width,e.height)},Object.defineProperty(TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),TilingSprite}(Xi),sn="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",an=new bt,un=function(t){function TilingSpriteRenderer(e){var r=t.call(this,e)||this,i={globals:r.renderer.globalUniforms};return r.shader=nr.from(sn,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",i),r.simpleShader=nr.from(sn,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",i),r.quad=new Ae,r.state=or.for2d(),r}return sprite_tiling_es_extends(TilingSpriteRenderer,t),TilingSpriteRenderer.prototype.render=function(t){var e=this.renderer,r=this.quad,i=r.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((i=r.uvs)[0]=i[6]=-t.anchor.x,i[1]=i[3]=-t.anchor.y,i[2]=i[4]=1-t.anchor.x,i[5]=i[7]=1-t.anchor.y),r.invalidate();var n=t._texture,o=n.baseTexture,s=t.tileTransform.localTransform,a=t.uvMatrix,u=o.isPowerOfTwo&&n.frame.width===o.width&&n.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==B.CLAMP:o.wrapMode===B.CLAMP&&(o.wrapMode=B.REPEAT));var h=u?this.simpleShader:this.shader,c=n.width,l=n.height,d=t._width,p=t._height;an.set(s.a*c/d,s.b*c/p,s.c*l/d,s.d*l/p,s.tx/d,s.ty/p),an.invert(),u?an.prepend(a.mapCoord):(h.uniforms.uMapCoord=a.mapCoord.toArray(!0),h.uniforms.uClampFrame=a.uClampFrame,h.uniforms.uClampOffset=a.uClampOffset),h.uniforms.uTransform=an.toArray(!0),h.uniforms.uColor=premultiplyTintToRgba(t.tint,t.worldAlpha,h.uniforms.uColor,o.alphaMode),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.uSampler=n,e.shader.bind(h),e.geometry.bind(r),this.state.blendMode=correctBlendMode(t.blendMode,o.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},TilingSpriteRenderer}(De),mesh_es_extendStatics=function(t,e){return(mesh_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function mesh_es_extends(t,e){function __(){this.constructor=t}mesh_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var hn=function(){function MeshBatchUvs(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return MeshBatchUvs.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},MeshBatchUvs}(),cn=new _t,ln=new gt,dn=function(t){function Mesh(e,r,i,n){void 0===n&&(n=C.TRIANGLES);var o=t.call(this)||this;return o.geometry=e,e.refCount++,o.shader=r,o.state=i||or.for2d(),o.drawMode=n,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=0,o._transformID=-1,o.tint=16777215,o.blendMode=M.NORMAL,o._roundPixels=V.ROUND_PIXELS,o.batchUvs=null,o}return mesh_es_extends(Mesh,t),Object.defineProperty(Mesh.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(Mesh.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),Mesh.prototype._render=function(t){var e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===C.TRIANGLES&&e.length<2*Mesh.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},Mesh.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},Mesh.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},Mesh.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,i=r.a,n=r.b,o=r.c,s=r.d,a=r.tx,u=r.ty,h=this.vertexData,c=0;c<h.length/2;c++){var l=e[2*c],d=e[2*c+1];h[2*c]=i*l+o*d+a,h[2*c+1]=n*l+s*d+u}if(this._roundPixels){var p=V.RESOLUTION;for(c=0;c<h.length;++c)h[c]=Math.round((h[c]*p|0)/p)}this.vertexDirty=t.vertexDirtyId}},Mesh.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new hn(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},Mesh.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},Mesh.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,cn);for(var e=this.geometry.getBuffer("aVertexPosition").data,r=ln.points,i=this.geometry.getIndex().data,n=i.length,o=4===this.drawMode?3:1,s=0;s+2<n;s+=o){var a=2*i[s],u=2*i[s+1],h=2*i[s+2];if(r[0]=e[a],r[1]=e[a+1],r[2]=e[u],r[3]=e[u+1],r[4]=e[h],r[5]=e[h+1],ln.contains(cn.x,cn.y))return!0}return!1},Mesh.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Mesh.BATCHABLE_SIZE=100,Mesh}(Lt),pn=function(t){function MeshMaterial(e,r){var i=this,n={uSampler:e,alpha:1,uTextureMatrix:bt.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(n,r.uniforms),(i=t.call(this,r.program||ir.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),n)||this)._colorDirty=!1,i.uvMatrix=new ur(e),i.batchable=void 0===r.program,i.pluginName=r.pluginName,i.tint=r.tint,i.alpha=r.alpha,i}return mesh_es_extends(MeshMaterial,t),Object.defineProperty(MeshMaterial.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(MeshMaterial.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),MeshMaterial.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},MeshMaterial}(nr),fn=function(t){function MeshGeometry(e,r,i){var n=t.call(this)||this,o=new be(e),s=new be(r,!0),a=new be(i,!0,!0);return n.addAttribute("aVertexPosition",o,2,!1,F.FLOAT).addAttribute("aTextureCoord",s,2,!1,F.FLOAT).addIndex(a),n._updateId=-1,n}return mesh_es_extends(MeshGeometry,t),Object.defineProperty(MeshGeometry.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),MeshGeometry}(we),text_bitmap_es_extendStatics=function(t,e){return(text_bitmap_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var mn=function mn(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},yn=[function(){function TextFormat(){}return TextFormat.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},TextFormat.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var i in e){var n=e[i].match(/^[a-z]+/gm)[0],o=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var a in o){var u=o[a].split("="),h=u[0],c=u[1].replace(/"/gm,""),l=parseFloat(c),d=isNaN(l)?c:l;s[h]=d}r[n].push(s)}var p=new mn;return r.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),r.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),r.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),r.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),r.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),p},TextFormat}(),function(){function XMLFormat(){}return XMLFormat.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},XMLFormat.parse=function(t){for(var e=new mn,r=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),a=0;a<r.length;a++)e.info.push({face:r[a].getAttribute("face"),size:parseInt(r[a].getAttribute("size"),10)});for(a=0;a<i.length;a++)e.common.push({lineHeight:parseInt(i[a].getAttribute("lineHeight"),10)});for(a=0;a<n.length;a++)e.page.push({id:parseInt(n[a].getAttribute("id"),10)||0,file:n[a].getAttribute("file")});for(a=0;a<o.length;a++){var u=o[a];e.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(a=0;a<s.length;a++)e.kerning.push({first:parseInt(s[a].getAttribute("first"),10),second:parseInt(s[a].getAttribute("second"),10),amount:parseInt(s[a].getAttribute("amount"),10)});return e},XMLFormat}()];function autoDetectFormat(t){for(var e=0;e<yn.length;e++)if(yn[e].test(t))return yn[e];return null}function generateFillStyle(t,e,r,i,n,o){var s,a=r.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var u=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,c=Math.ceil(t.width/i)-u-2*h,l=Math.ceil(t.height/i)-u-2*h,d=a.slice(),p=r.fillGradientStops.slice();if(!p.length)for(var f=d.length+1,m=1;m<f;++m)p.push(m/f);if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),r.fillGradientType===ki.LINEAR_VERTICAL){s=e.createLinearGradient(c/2,h,c/2,l+h);var y=0,g=(o.fontProperties.fontSize+r.strokeThickness)/l;for(m=0;m<n.length;m++)for(var v=o.lineHeight*m,_=0;_<d.length;_++){var x=v/l+("number"==typeof p[_]?p[_]:_/d.length)*g,b=Math.max(y,x);b=Math.min(b,1),s.addColorStop(b,d[_]),y=b}}else{s=e.createLinearGradient(h,l/2,c+h,l/2);var T=d.length+1,E=1;for(m=0;m<d.length;m++){var S=void 0;S="number"==typeof p[m]?p[m]:E/T,s.addColorStop(S,d[m]),E++}}return s}function drawGlyph(t,e,r,i,n,o,s){var a=r.text,u=r.fontProperties;e.translate(i,n),e.scale(o,o);var h=s.strokeThickness/2,c=-s.strokeThickness/2;e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=generateFillStyle(t,e,s,o,[a],r),e.strokeStyle=s.stroke,e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=generateFillStyle(t,e,s,o,[a],r),e.strokeStyle=s.stroke;var l=s.dropShadowColor,d=hex2rgb("number"==typeof l?l:string2hex(l));s.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+s.dropShadowAlpha+")",e.shadowBlur=s.dropShadowBlur,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(e.shadowColor="0",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),s.stroke&&s.strokeThickness&&e.strokeText(a,h,c+r.lineHeight-u.descent),s.fill&&e.fillText(a,h,c+r.lineHeight-u.descent),e.setTransform(),e.fillStyle="rgba(0, 0, 0, 0)"}var gn=function(){function BitmapFont(t,e){var r=t.info[0],i=t.common[0],n=getResolutionOfUrl(t.page[0].file),o={};this.font=r.face,this.size=r.size,this.lineHeight=i.lineHeight/n,this.chars={},this.pageTextures=o;for(var s=0;s<t.page.length;s++){var a=t.page[s],u=a.id,h=a.file;o[u]=e instanceof Array?e[s]:e[h]}for(s=0;s<t.char.length;s++){var c=t.char[s],l=(u=c.id,c.page),d=t.char[s],p=d.x,f=d.y,m=d.width,y=d.height,g=d.xoffset,v=d.yoffset,_=d.xadvance;f/=n,m/=n,y/=n,g/=n,v/=n,_/=n;var x=new ft((p/=n)+o[l].frame.x/n,f+o[l].frame.y/n,m,y);this.chars[u]={xOffset:g,yOffset:v,xAdvance:_,kerning:{},texture:new ye(o[l].baseTexture,x),page:l}}for(s=0;s<t.kerning.length;s++){var b=t.kerning[s],T=b.first,E=b.second,S=b.amount;T/=n,E/=n,S/=n,this.chars[E]&&(this.chars[E].kerning[T]=S)}}return BitmapFont.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},BitmapFont.install=function(t,e){var r;if(t instanceof mn)r=t;else{var i=autoDetectFormat(t);if(!i)throw new Error("Unrecognized data format for font.");r=i.parse(t)}e instanceof ye&&(e=[e]);var n=new BitmapFont(r,e);return BitmapFont.available[n.font]=n,n},BitmapFont.uninstall=function(t){var e=BitmapFont.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete BitmapFont.available[t]},BitmapFont.from=function(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},BitmapFont.defaultOptions,r),n=i.chars,o=i.padding,s=i.resolution,a=i.textureWidth,u=i.textureHeight,h=function resolveCharacters(t){"string"==typeof t&&(t=[t]);for(var e=[],r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var o=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,u=s;a<=u;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,n.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(n),c=e instanceof Vi?e:new Vi(e),l=a,d=new mn;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};for(var p,f,m,y=0,g=0,v=0,_=[],x=0;x<h.length;x++){p||((p=document.createElement("canvas")).width=a,p.height=u,f=p.getContext("2d"),m=new $t(p,{resolution:s}),_.push(new ye(m)),d.page.push({id:_.length-1,file:""}));var b=Yi.measureText(h[x],c,!1,p),T=b.width,E=Math.ceil(b.height),S=Math.ceil(("italic"===c.fontStyle?2:1)*T);if(g>=u-E*s){if(0===g)throw new Error("[BitmapFont] textureHeight "+u+"px is too small for "+c.fontSize+"px fonts");--x,p=null,f=null,m=null,g=0,y=0,v=0}else if(v=Math.max(E+b.fontProperties.descent,v),S*s+y>=l)--x,g+=v*s,g=Math.ceil(g),y=0,v=0;else{drawGlyph(p,f,b,y,g,s,c);var P=b.text.charCodeAt(0);d.char.push({id:P,page:_.length-1,x:y/s,y:g/s,width:S,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(T-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),y+=(S+2*o)*s,y=Math.ceil(y)}}var w=new BitmapFont(d,_);return void 0!==BitmapFont.available[t]&&BitmapFont.uninstall(t),BitmapFont.available[t]=w,w},BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],BitmapFont.NUMERIC=[["0","9"]],BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],BitmapFont.ASCII=[[" ","~"]],BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:BitmapFont.ALPHANUMERIC},BitmapFont.available={},BitmapFont}(),vn=[],_n=[],xn=function(t){function BitmapText(e,r){void 0===r&&(r={});var i=t.call(this)||this;i._tint=16777215,r.font&&(deprecation("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),i._upgradeStyle(r));var n=Object.assign({},BitmapText.styleDefaults,r),o=n.align,s=n.tint,a=n.maxWidth,u=n.letterSpacing,h=n.fontName,c=n.fontSize;if(!gn.available[h])throw new Error('Missing BitmapFont "'+h+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=o,i._tint=s,i._fontName=h,i._fontSize=c||gn.available[h].size,i._text=e,i._maxWidth=a,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new xt((function(){i.dirty=!0}),i,0,0),i.roundPixels=V.ROUND_PIXELS,i.dirty=!0,i}return function text_bitmap_es_extends(t,e){function __(){this.constructor=t}text_bitmap_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(BitmapText,t),BitmapText.prototype.updateText=function(){for(var t,e=gn.available[this._fontName],r=this._fontSize/e.size,i=new _t,n=[],o=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",a=s.length,u=this._maxWidth*e.size/this._fontSize,h=null,c=0,l=0,d=0,p=-1,f=0,m=0,y=0,g=0;g<a;g++){var v=s.charCodeAt(g),_=s.charAt(g);if(/(?:\s)/.test(_)&&(p=g,f=c),"\r"!==_&&"\n"!==_){var x=e.chars[v];if(x){h&&x.kerning[h]&&(i.x+=x.kerning[h]);var b=_n.pop()||{texture:ye.EMPTY,line:0,charCode:0,position:new _t};b.texture=x.texture,b.line=d,b.charCode=v,b.position.x=i.x+x.xOffset+this._letterSpacing/2,b.position.y=i.y+x.yOffset,n.push(b),i.x+=x.xAdvance+this._letterSpacing,c=i.x,y=Math.max(y,x.yOffset+x.texture.height),h=v,-1!==p&&u>0&&i.x>u&&(removeItems(n,1+p-++m,1+g-p),g=p,p=-1,o.push(f),l=Math.max(l,f),d++,i.x=0,i.y+=e.lineHeight,h=null)}}else o.push(c),l=Math.max(l,c),++d,++m,i.x=0,i.y+=e.lineHeight,h=null}var T=s.charAt(s.length-1);"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(c=f),o.push(c),l=Math.max(l,c));var E=[];for(g=0;g<=d;g++){var S=0;"right"===this._align?S=l-o[g]:"center"===this._align&&(S=(l-o[g])/2),E.push(S)}var P=n.length,w={},I=[],A=this._activePagesMeshData;for(g=0;g<A.length;g++)vn.push(A[g]);for(g=0;g<P;g++){var O=(D=n[g].texture).baseTexture.uid;if(!w[O]){if(!(G=vn.pop())){var R=new fn,M=new pn(ye.EMPTY);G={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new dn(R,M),vertices:null,uvs:null,indices:null}}G.index=0,G.indexCount=0,G.vertexCount=0,G.uvsCount=0,G.total=0,G.mesh.texture=new ye(D.baseTexture),G.mesh.tint=this._tint,I.push(G),w[O]=G}w[O].total++}for(g=0;g<A.length;g++)-1===I.indexOf(A[g])&&this.removeChild(A[g].mesh);for(g=0;g<I.length;g++)I[g].mesh.parent!==this&&this.addChild(I[g].mesh);for(var g in this._activePagesMeshData=I,w){var C=(G=w[g]).total;(null===(t=G.indices)||void 0===t?void 0:t.length)>6*C&&!(G.vertices.length<2*dn.BATCHABLE_SIZE)||(G.vertices=new Float32Array(8*C),G.uvs=new Float32Array(8*C),G.indices=new Uint16Array(6*C)),G.mesh.size=6*C}for(g=0;g<P;g++){var D,L=((_=n[g]).position.x+E[_.line])*r,F=_.position.y*r,N=w[(D=_.texture).baseTexture.uid],B=D.frame,U=D._uvs,k=N.index++;N.indices[6*k+0]=0+4*k,N.indices[6*k+1]=1+4*k,N.indices[6*k+2]=2+4*k,N.indices[6*k+3]=0+4*k,N.indices[6*k+4]=2+4*k,N.indices[6*k+5]=3+4*k,N.vertices[8*k+0]=L,N.vertices[8*k+1]=F,N.vertices[8*k+2]=L+B.width*r,N.vertices[8*k+3]=F,N.vertices[8*k+4]=L+B.width*r,N.vertices[8*k+5]=F+B.height*r,N.vertices[8*k+6]=L,N.vertices[8*k+7]=F+B.height*r,N.uvs[8*k+0]=U.x0,N.uvs[8*k+1]=U.y0,N.uvs[8*k+2]=U.x1,N.uvs[8*k+3]=U.y1,N.uvs[8*k+4]=U.x2,N.uvs[8*k+5]=U.y2,N.uvs[8*k+6]=U.x3,N.uvs[8*k+7]=U.y3}for(var g in this._textWidth=l*r,this._textHeight=(i.y+e.lineHeight)*r,w){var G=w[g];if(0!==this.anchor.x||0!==this.anchor.y)for(var j=0,X=this._textWidth*this.anchor.x,H=this._textHeight*this.anchor.y,z=0;z<G.total;z++)G.vertices[j++]-=X,G.vertices[j++]-=H,G.vertices[j++]-=X,G.vertices[j++]-=H,G.vertices[j++]-=X,G.vertices[j++]-=H,G.vertices[j++]-=X,G.vertices[j++]-=H;this._maxLineHeight=y*r;var V=G.mesh.geometry.getBuffer("aVertexPosition"),Y=G.mesh.geometry.getBuffer("aTextureCoord"),W=G.mesh.geometry.getIndex();V.data=G.vertices,Y.data=G.uvs,W.data=G.indices,V.update(),Y.update(),W.update()}for(g=0;g<n.length;g++)_n.push(n[g])},BitmapText.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},BitmapText.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},BitmapText.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!gn.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(BitmapText.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),BitmapText.prototype._upgradeStyle=function(t){if("string"==typeof t.font){var e=t.font.split(" ");t.fontName=1===e.length?e[0]:e.slice(1).join(" "),e.length>=2&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize="number"==typeof t.font.size?t.font.size:parseInt(t.font.size,10)},BitmapText.registerFont=function(t,e){return deprecation("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),gn.install(t,e)},Object.defineProperty(BitmapText,"fonts",{get:function(){return deprecation("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),gn.available},enumerable:!1,configurable:!0}),BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},BitmapText}(Lt),bn=function(){function BitmapFontLoader(){}return BitmapFontLoader.add=function(){si.setExtensionXhrType("fnt",si.XHR_RESPONSE_TYPE.DOCUMENT)},BitmapFontLoader.use=function(t,e){var r=autoDetectFormat(t.data);if(r)for(var i=BitmapFontLoader.getBaseUrl(this,t),n=r.parse(t.data),o={},completed=function(r){o[r.metadata.pageFile]=r.texture,Object.keys(o).length===n.page.length&&(t.bitmapFont=gn.install(n,o),e())},s=0;s<n.page.length;++s){var a=n.page[s].file,u=i+a,h=!1;for(var c in this.resources){var l=this.resources[c];if(l.url===u){l.metadata.pageFile=a,l.texture?completed(l):l.onAfterMiddleware.add(completed),h=!0;break}}if(!h){var d={crossOrigin:t.crossOrigin,loadType:si.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:a},t.metadata.imageMetadata),parentResource:t};this.add(u,d,completed)}}else e()},BitmapFontLoader.getBaseUrl=function(t,e){var r=e.isDataUrl?"":BitmapFontLoader.dirname(e.url);return e.isDataUrl&&("."===r&&(r=""),t.baseUrl&&r&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(r+="/")),(r=r.replace(t.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},BitmapFontLoader.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},BitmapFontLoader}(),filter_alpha_es_extendStatics=function(t,e){return(filter_alpha_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Tn=function(t){function AlphaFilter(e){void 0===e&&(e=1);var r=t.call(this,Cr,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return r.alpha=e,r}return function filter_alpha_es_extends(t,e){function __(){this.constructor=t}filter_alpha_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(AlphaFilter,t),Object.defineProperty(AlphaFilter.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),AlphaFilter}(sr),filter_blur_es_extendStatics=function(t,e){return(filter_blur_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function filter_blur_es_extends(t,e){function __(){this.constructor=t}filter_blur_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var En,Sn,Pn,wn,In,An,On,Rn,Mn,Cn,Dn,Ln,Fn,Nn,Bn,Un,kn,Gn={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},jn=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(En||(En={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Sn||(Sn={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Pn||(Pn={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(wn||(wn={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(In||(In={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(An||(An={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(On||(On={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Rn||(Rn={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Mn||(Mn={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Cn||(Cn={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(Dn||(Dn={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(Ln||(Ln={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Fn||(Fn={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Nn||(Nn={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Bn||(Bn={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Un||(Un={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(kn||(kn={}));var Xn=function(t){function BlurFilterPass(e,r,i,n,o){void 0===r&&(r=8),void 0===i&&(i=4),void 0===n&&(n=V.RESOLUTION),void 0===o&&(o=5);var s=this,a=function generateBlurVertSource(t,e){var r,i=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";r=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=r.replace("%index%",s.toString());o+=a=a.replace("%sampleIndex%",s-(i-1)+".0"),o+="\n"}return(n=n.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),u=function generateBlurFragSource(t){for(var e,r=Gn[t],i=r.length,n=jn,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());e=s,s>=i&&(e=t-s-1),o+=a=a.replace("%value%",r[e].toString()),o+="\n"}return(n=n.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(s=t.call(this,a,u)||this).horizontal=e,s.resolution=n,s._quality=0,s.quality=i,s.blur=r,s}return filter_blur_es_extends(BlurFilterPass,t),BlurFilterPass.prototype.apply=function(t,e,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{var n=t.getFilterTexture(),o=t.renderer,s=e,a=n;this.state.blend=!1,t.applyFilter(this,s,a,Fn.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(s,Fn.BLIT),this.uniforms.uSampler=a;var h=a;a=s,s=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,r,i),t.returnFilterTexture(n)}},Object.defineProperty(BlurFilterPass.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilterPass.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),BlurFilterPass}(sr),Hn=function(t){function BlurFilter(e,r,i,n){void 0===e&&(e=8),void 0===r&&(r=4),void 0===i&&(i=V.RESOLUTION),void 0===n&&(n=5);var o=t.call(this)||this;return o.blurXFilter=new Xn(!0,e,r,i,n),o.blurYFilter=new Xn(!1,e,r,i,n),o.resolution=i,o.quality=r,o.blur=e,o.repeatEdgePixels=!1,o}return filter_blur_es_extends(BlurFilter,t),BlurFilter.prototype.apply=function(t,e,r,i){var n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,Fn.CLEAR),this.blurYFilter.apply(t,s,r,i),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,r,i):this.blurXFilter.apply(t,e,r,i)},BlurFilter.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(BlurFilter.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),BlurFilter}(sr),filter_color_matrix_es_extendStatics=function(t,e){return(filter_color_matrix_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var zn=function(t){function ColorMatrixFilter(){var e=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,Dr,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,e}return function filter_color_matrix_es_extends(t,e){function __(){this.constructor=t}filter_color_matrix_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(ColorMatrixFilter,t),ColorMatrixFilter.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},ColorMatrixFilter.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},ColorMatrixFilter.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},ColorMatrixFilter.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},ColorMatrixFilter.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},ColorMatrixFilter.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},ColorMatrixFilter.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=1/3,o=(0,Math.sqrt)(n),s=[r+(1-r)*n,n*(1-r)-o*i,n*(1-r)+o*i,0,0,n*(1-r)+o*i,r+n*(1-r),n*(1-r)-o*i,0,0,n*(1-r)-o*i,n*(1-r)+o*i,r+n*(1-r),0,0,0,0,0,1,0];this._loadMatrix(s,e)},ColorMatrixFilter.prototype.contrast=function(t,e){var r=(t||0)+1,i=-.5*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,e)},ColorMatrixFilter.prototype.saturate=function(t,e){void 0===t&&(t=0);var r=2*t/3+1,i=-.5*(r-1),n=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(n,e)},ColorMatrixFilter.prototype.desaturate=function(){this.saturate(-1)},ColorMatrixFilter.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},ColorMatrixFilter.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},ColorMatrixFilter.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},ColorMatrixFilter.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},ColorMatrixFilter.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},ColorMatrixFilter.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},ColorMatrixFilter.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},ColorMatrixFilter.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},ColorMatrixFilter.prototype.colorTone=function(t,e,r,i,n){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,u=((i=i||3375104)>>16&255)/255,h=(i>>8&255)/255,c=(255&i)/255,l=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,u,h,c,e=e||.15,0,o-u,s-h,a-c,0,0];this._loadMatrix(l,n)},ColorMatrixFilter.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},ColorMatrixFilter.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},ColorMatrixFilter.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},ColorMatrixFilter.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(ColorMatrixFilter.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),ColorMatrixFilter}(sr);zn.prototype.grayscale=zn.prototype.greyscale;var filter_displacement_es_extendStatics=function(t,e){return(filter_displacement_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Vn=function(t){function DisplacementFilter(e,r){var i=this,n=new bt;return e.renderable=!1,(i=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,i.maskMatrix=n,null==r&&(r=20),i.scale=new _t(r,r),i}return function filter_displacement_es_extends(t,e){function __(){this.constructor=t}filter_displacement_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(DisplacementFilter,t),DisplacementFilter.prototype.apply=function(t,e,r,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),s=Math.sqrt(n.c*n.c+n.d*n.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/s,this.uniforms.rotation[3]=n.d/s),t.applyFilter(this,e,r,i)},Object.defineProperty(DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),DisplacementFilter}(sr),filter_fxaa_es_extendStatics=function(t,e){return(filter_fxaa_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Yn=function(t){function FXAAFilter(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function filter_fxaa_es_extends(t,e){function __(){this.constructor=t}filter_fxaa_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(FXAAFilter,t),FXAAFilter}(sr),filter_noise_es_extendStatics=function(t,e){return(filter_noise_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var Wn=function(t){function NoiseFilter(e,r){void 0===e&&(e=.5),void 0===r&&(r=Math.random());var i=t.call(this,Dr,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return i.noise=e,i.seed=r,i}return function filter_noise_es_extends(t,e){function __(){this.constructor=t}filter_noise_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(NoiseFilter,t),Object.defineProperty(NoiseFilter.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(NoiseFilter.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),NoiseFilter}(sr),qn=new bt;Ct.prototype._cacheAsBitmap=!1,Ct.prototype._cacheData=null;var Zn=function Zn(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Ct.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Zn),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Ct.prototype._renderCached=function _renderCached(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Ct.prototype._initCachedDisplayObject=function _initCachedDisplayObject(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters){var i=this.filters[0].padding;r.pad(i)}r.ceil(V.RESOLUTION);var n=t.renderTexture.current,o=t.renderTexture.sourceFrame.clone(),s=t.projection.transform,a=ge.create({width:r.width,height:r.height}),u="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=u,$t.addToCache(a.baseTexture,u),ye.addToCache(a,u);var h=this.transform.localTransform.copyTo(qn).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,a,!0,h,!1),t.projection.transform=s,t.renderTexture.bind(n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new Xi(a);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-r.x/r.width,c.anchor.y=-r.y/r.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)}},Ct.prototype._renderCachedCanvas=function _renderCachedCanvas(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Ct.prototype._initCachedDisplayObjectCanvas=function _initCachedDisplayObjectCanvas(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=t.context,n=t._projTransform;e.ceil(V.RESOLUTION);var o=ge.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+uid();this._cacheData.textureCacheId=s,$t.addToCache(o.baseTexture,s),ye.addToCache(o,s);var a=qn;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,o,!0,a,!1),t.context=i,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new Xi(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},Ct.prototype._calculateCachedBounds=function _calculateCachedBounds(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Ct.prototype._getCachedLocalBounds=function _getCachedLocalBounds(){return this._cacheData.sprite.getLocalBounds(null)},Ct.prototype._destroyCachedDisplayObject=function _destroyCachedDisplayObject(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,$t.removeFromCache(this._cacheData.textureCacheId),ye.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Ct.prototype._cacheAsBitmapDestroy=function _cacheAsBitmapDestroy(t){this.cacheAsBitmap=!1,this.destroy(t)},Ct.prototype.name=null,Lt.prototype.getChildByName=function getChildByName(t,e){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===t)return this.children[r];if(e)for(r=0,i=this.children.length;r<i;r++){if(this.children[r].getChildByName){var n=this.children[r].getChildByName(t,!0);if(n)return n}}return null},Ct.prototype.getGlobalPosition=function getGlobalPosition(t,e){return void 0===t&&(t=new _t),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var mesh_extras_es_extendStatics=function(t,e){return(mesh_extras_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function mesh_extras_es_extends(t,e){function __(){this.constructor=t}mesh_extras_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var Kn=function(t){function PlaneGeometry(e,r,i,n){void 0===e&&(e=100),void 0===r&&(r=100),void 0===i&&(i=10),void 0===n&&(n=10);var o=t.call(this)||this;return o.segWidth=i,o.segHeight=n,o.width=e,o.height=r,o.build(),o}return mesh_extras_es_extends(PlaneGeometry,t),PlaneGeometry.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],r=[],i=[],n=this.segWidth-1,o=this.segHeight-1,s=this.width/n,a=this.height/o,u=0;u<t;u++){var h=u%this.segWidth,c=u/this.segWidth|0;e.push(h*s,c*a),r.push(h/n,c/o)}var l=n*o;for(u=0;u<l;u++){var d=u%n,p=u/n|0,f=p*this.segWidth+d,m=p*this.segWidth+d+1,y=(p+1)*this.segWidth+d,g=(p+1)*this.segWidth+d+1;i.push(f,m,y,m,g,y)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},PlaneGeometry}(fn),Qn=function(t){function RopeGeometry(e,r,i){void 0===e&&(e=200),void 0===i&&(i=0);var n=t.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return n.points=r,n._width=e,n.textureScale=i,n.build(),n}return mesh_extras_es_extends(RopeGeometry,t),Object.defineProperty(RopeGeometry.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),RopeGeometry.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),i.data=new Uint16Array(6*(t.length-1)));var n=r.data,o=i.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var s=0,a=t[0],u=this._width*this.textureScale,h=t.length,c=0;c<h;c++){var l=4*c;if(this.textureScale>0){var d=a.x-t[c].x,p=a.y-t[c].y,f=Math.sqrt(d*d+p*p);a=t[c],s+=f/u}else s=c/(h-1);n[l]=s,n[l+1]=0,n[l+2]=s,n[l+3]=1}var m=0;for(c=0;c<h-1;c++){l=2*c;o[m++]=l,o[m++]=l+1,o[m++]=l+2,o[m++]=l+2,o[m++]=l+1,o[m++]=l+3}r.update(),i.update(),this.updateVertices()}}},RopeGeometry.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,r=t[0],i=0,n=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var u=t[a],h=4*a;n=-((e=a<t.length-1?t[a+1]:u).x-r.x),i=e.y-r.y;var c=Math.sqrt(i*i+n*n),l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;i/=c,n/=c,i*=l,n*=l,o[h]=u.x+i,o[h+1]=u.y+n,o[h+2]=u.x-i,o[h+3]=u.y-n,r=u}this.buffers[0].update()}},RopeGeometry.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},RopeGeometry}(fn),Jn=function(t){function SimpleRope(e,r,i){void 0===i&&(i=0);var n=this,o=new Qn(e.height,r,i),s=new pn(e);return i>0&&(e.baseTexture.wrapMode=B.REPEAT),(n=t.call(this,o,s)||this).autoUpdate=!0,n}return mesh_extras_es_extends(SimpleRope,t),SimpleRope.prototype._render=function(e){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),t.prototype._render.call(this,e)},SimpleRope}(dn),$n=function(t){function SimplePlane(e,r,i){var n=this,o=new Kn(e.width,e.height,r,i),s=new pn(ye.WHITE);return(n=t.call(this,o,s)||this).texture=e,n}return mesh_extras_es_extends(SimplePlane,t),SimplePlane.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(SimplePlane.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),SimplePlane.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},SimplePlane}(dn),to=function(t){function SimpleMesh(e,r,i,n,o){void 0===e&&(e=ye.EMPTY);var s=this,a=new fn(r,i,n);a.getBuffer("aVertexPosition").static=!1;var u=new pn(e);return(s=t.call(this,a,u,null,o)||this).autoUpdate=!0,s}return mesh_extras_es_extends(SimpleMesh,t),Object.defineProperty(SimpleMesh.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),SimpleMesh.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},SimpleMesh}(dn),eo=function(t){function NineSlicePlane(e,r,i,n,o){void 0===r&&(r=10),void 0===i&&(i=10),void 0===n&&(n=10),void 0===o&&(o=10);var s=t.call(this,ye.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=r,s._rightWidth=n,s._topHeight=i,s._bottomHeight=o,s.texture=e,s}return mesh_extras_es_extends(NineSlicePlane,t),NineSlicePlane.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(NineSlicePlane.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),NineSlicePlane.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},NineSlicePlane.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},NineSlicePlane.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(e,i)},Object.defineProperty(NineSlicePlane.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(NineSlicePlane.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),NineSlicePlane.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var r=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},NineSlicePlane}($n),sprite_animated_es_extendStatics=function(t,e){return(sprite_animated_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var ro=function(t){function AnimatedSprite(e,r){void 0===r&&(r=!0);var i=t.call(this,e[0]instanceof ye?e[0]:e[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=r,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=e,i}return function sprite_animated_es_extends(t,e){function __(){this.constructor=t}sprite_animated_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}(AnimatedSprite,t),AnimatedSprite.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(kt.shared.remove(this.update,this),this._isConnectedToTicker=!1))},AnimatedSprite.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(kt.shared.add(this.update,this,Nt.HIGH),this._isConnectedToTicker=!0))},AnimatedSprite.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},AnimatedSprite.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},AnimatedSprite.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())},AnimatedSprite.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},AnimatedSprite.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},AnimatedSprite.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(ye.from(t[r]));return new AnimatedSprite(e)},AnimatedSprite.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(ye.from(t[r]));return new AnimatedSprite(e)},Object.defineProperty(AnimatedSprite.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof ye)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(AnimatedSprite.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(kt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(kt.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),AnimatedSprite}(Xi),pixi_es_extendStatics=function(t,e){return(pixi_es_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function pixi_es_extends(t,e){function __(){this.constructor=t}pixi_es_extendStatics(t,e),t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)}var io="5.0.0";function useDeprecated(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return deprecation(io,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return deprecation(io,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return deprecation(io,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return deprecation(io,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return deprecation(io,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return deprecation(io,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return deprecation(io,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return deprecation(io,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}},CanvasTinter:{get:function(){return deprecation("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),t.canvasUtils}},GroupD8:{get:function(){return deprecation("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),t.groupD8}}}),t.accessibility={},Object.defineProperties(t.accessibility,{AccessibilityManager:{get:function(){return deprecation("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),t.AccessibilityManager}}}),t.interaction={},Object.defineProperties(t.interaction,{InteractionManager:{get:function(){return deprecation("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),t.InteractionManager}},InteractionData:{get:function(){return deprecation("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),t.InteractionData}},InteractionEvent:{get:function(){return deprecation("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),t.InteractionEvent}}}),t.prepare={},Object.defineProperties(t.prepare,{BasePrepare:{get:function(){return deprecation("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),t.BasePrepare}},Prepare:{get:function(){return deprecation("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),t.Prepare}},CanvasPrepare:{get:function(){return deprecation("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),t.CanvasPrepare}}}),t.extract={},Object.defineProperties(t.extract,{Extract:{get:function(){return deprecation("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),t.Extract}},CanvasExtract:{get:function(){return deprecation("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),t.CanvasExtract}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return deprecation(io,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return deprecation(io,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return deprecation(io,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return deprecation(io,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),t.TilingSprite.fromFrame=function fromFrame(e,r,i){return deprecation("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),t.TilingSprite.from(e,{width:r,height:i})},t.TilingSprite.fromImage=function fromImage(e,r,i,n){return void 0===n&&(n={}),deprecation("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),n&&"object"!=typeof n&&(n={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),n.width=r,n.height=i,t.TilingSprite.from(e,n)},Object.defineProperties(t.utils,{getSvgSize:{get:function(){return deprecation(io,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.resources.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return deprecation(io,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return deprecation(io,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return deprecation(io,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return deprecation(io,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return deprecation(io,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return deprecation(io,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return deprecation(io,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return deprecation(io,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return deprecation(io,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return deprecation(io,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return deprecation(io,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return deprecation(io,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return deprecation(io,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return deprecation(io,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){deprecation(io,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return deprecation(io,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return deprecation(io,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function addPixiMiddleware(e){return deprecation(io,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})};var eventToSignal=function(t){return"on"+t.charAt(0).toUpperCase()+t.slice(1)};Object.assign(t.Loader.prototype,{on:function(t){var e=eventToSignal(t);deprecation(io,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+e+".add")},once:function(t){var e=eventToSignal(t);deprecation(io,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+e+".once")},off:function(t){var e=eventToSignal(t);deprecation(io,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+e+".detach")}}),Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return deprecation(io,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),t.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return deprecation(io,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),t.Prepare}}),t.Container.prototype._renderWebGL=function _renderWebGL(t){deprecation(io,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},t.Container.prototype.renderWebGL=function renderWebGL(t){deprecation(io,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},t.DisplayObject.prototype.renderWebGL=function renderWebGL(t){deprecation(io,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},t.Container.prototype.renderAdvancedWebGL=function renderAdvancedWebGL(t){deprecation(io,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return deprecation(io,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){deprecation(io,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var e=t.BaseTexture;e.prototype.loadSource=function loadSource(e){deprecation(io,"PIXI.BaseTexture.loadSource method has been deprecated");var r=t.resources.autoDetectResource(e);r.internal=!0,this.setResource(r),this.update()};var r=!1;Object.defineProperties(e.prototype,{hasLoaded:{get:function(){return deprecation(io,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var t;return deprecation(io,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(t=this.resource)||void 0===t?void 0:t.url},set:function(t){deprecation(io,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return deprecation(io,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(t){deprecation(io,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return deprecation("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){deprecation("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return r||(deprecation("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),r=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),e.fromImage=function fromImage(t,r,i,n){deprecation(io,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var o={scale:n,crossorigin:r};return e.from(t,{scaleMode:i,resourceOptions:o})},e.fromCanvas=function fromCanvas(t,r){return deprecation(io,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),e.from(t,{scaleMode:r})},e.fromSVG=function fromSVG(t,r,i,n){deprecation(io,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var o={scale:n,crossorigin:r};return e.from(t,{scaleMode:i,resourceOptions:o})},Object.defineProperties(t.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return deprecation("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){deprecation("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),t.Point.prototype.copy=function copy(t){return deprecation(io,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},t.ObservablePoint.prototype.copy=function copy(t){return deprecation(io,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},t.Rectangle.prototype.copy=function copy(t){return deprecation(io,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},t.Matrix.prototype.copy=function copy(t){return deprecation(io,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},t.systems.StateSystem.prototype.setState=function setState(t){return deprecation("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return deprecation(io,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,e)},returnRenderTarget:function(t){deprecation(io,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){deprecation(io,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),r=this.activeState,i=r.sourceFrame,n=r.destinationFrame;return e.translate(i.x/n.width,i.y/n.height),e.scale(n.width,n.height),e},calculateNormalizedScreenSpaceMatrix:function(t){deprecation(io,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,r=e.sourceFrame,i=e.destinationFrame,n=t.identity();n.translate(r.x/i.width,r.y/i.height);var o=i.width/r.width,s=i.height/r.height;return n.scale(o,s),n}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return deprecation(io,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return deprecation(io,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var i=function(t){function BlurXFilter(e,r,i,n){return deprecation(io,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!0,e,r,i,n)||this}return pixi_es_extends(BlurXFilter,t),BlurXFilter}(t.filters.BlurFilterPass),n=function(t){function BlurYFilter(e,r,i,n){return deprecation(io,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!1,e,r,i,n)||this}return pixi_es_extends(BlurYFilter,t),BlurYFilter}(t.filters.BlurFilterPass);Object.assign(t.filters,{BlurXFilter:i,BlurYFilter:n});var o=t.Sprite,s=t.Texture,a=t.Graphics;function spriteFrom(t,e,r,i){return deprecation(io,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),o.from(e,{resourceOptions:{scale:i,crossorigin:r}})}function textureFrom(t,e,r,i){return deprecation(io,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),s.from(e,{resourceOptions:{scale:i,crossorigin:r}})}a.prototype.generateCanvasTexture||(a.prototype.generateCanvasTexture=function generateCanvasTexture(){deprecation(io,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(a.prototype,"graphicsData",{get:function(){return deprecation(io,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),o.fromImage=spriteFrom.bind(null,"fromImage"),o.fromSVG=spriteFrom.bind(null,"fromSVG"),o.fromCanvas=spriteFrom.bind(null,"fromCanvas"),o.fromVideo=spriteFrom.bind(null,"fromVideo"),o.fromFrame=spriteFrom.bind(null,"fromFrame"),s.fromImage=textureFrom.bind(null,"fromImage"),s.fromSVG=textureFrom.bind(null,"fromSVG"),s.fromCanvas=textureFrom.bind(null,"fromCanvas"),s.fromVideo=textureFrom.bind(null,"fromVideo"),s.fromFrame=textureFrom.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return deprecation(io,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){deprecation(io,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return deprecation(io,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){deprecation(io,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){deprecation(io,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){deprecation(io,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(t.BitmapText.prototype,"font",{get:function(){return deprecation("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(e){if(deprecation("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),e){var r={font:e};this._upgradeStyle(r),r.fontSize=r.fontSize||t.BitmapFont.available[r.fontName].size,this._fontName=r.fontName,this._fontSize=r.fontSize,this.dirty=!0}}})}Mr.registerPlugin("accessibility",Bt),Mr.registerPlugin("extract",Wr),Mr.registerPlugin("interaction",Wt),Mr.registerPlugin("particle",fi),Mr.registerPlugin("prepare",Ji),Mr.registerPlugin("batch",Hr),Mr.registerPlugin("tilingSprite",un),ui.registerPlugin(bn),ui.registerPlugin(en),zr.registerPlugin(Gt),zr.registerPlugin(hi);var no="5.3.3",oo={AlphaFilter:Tn,BlurFilter:Hn,BlurFilterPass:Xn,ColorMatrixFilter:zn,DisplacementFilter:Vn,FXAAFilter:Yn,NoiseFilter:Wn}}]]);